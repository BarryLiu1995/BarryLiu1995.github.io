<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title><![CDATA[关于callback函数我所知道的一切]]></title>
      <url>/2018/05/02/%E5%85%B3%E4%BA%8Ecallback%E5%87%BD%E6%95%B0%E6%88%91%E6%89%80%E7%9F%A5%E9%81%93%E7%9A%84%E4%B8%80%E5%88%87/</url>
      <content type="html"><![CDATA[<p>距上一篇博文已经好长时间了，这几个月入职公司实习，忙毕设设计，出去找房……大四狗的生活好累啊（抽泣脸）。回到博文本身，因为一直对使用 Node.js 写一些后台程序充满了极大的兴趣，不过直到入职公司的时候才开始逐步入门学习 Node.js 开发知识。学习 Node.js 最主要的学会如何异步编程，异步编程使用了 callback 函数，于是决定来认真学习一下 callback 函数的概念以及用法</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fqxb3aov9rj235s1irgxk.jpg" width="600" height="200" align="center/"></p>
<a id="more"></a>
<h2 id="扯扯-Node-js"><a href="#扯扯-Node-js" class="headerlink" title="扯扯 Node.js"></a>扯扯 Node.js</h2><p>最近学习 Node.js，看了一本挺不错的 Node.js 基础入门书《Node.js Succinctly》。了解到 Node.js 赖以成名的异步非阻塞特性。那何为异步非阻塞呢？首先我们得明白 JavaScript 本身就是一门事件驱动（观察者模式）和单线程的语言，它的特性是跟 JavaScript 的诞生背景是相关的。JavaScript 一开始设计出来就是为了丰富 Web 的交互效果也就是DOM操作，进行简单的表单验证。同样，Node.js 的执行程序本就是单线程，因为同样也是用 JavaScript（当初设计 Node.js 时决定使用 JavaScript 也是看重它单线程语言的特点）。单个线程如果遇到耗时操作例如 I/O操作，网络访问时则会阻塞该线程后面的执行流程，因此为了不阻塞这唯一的执行线程，因此就利用了异步的方式。所谓异步的方式就是让耗时操作在其他线程中完成的，我们姑且称他们为工作线程。当某些耗时操作完成后就需要将执行的结果返回给唯一的主线程，这一步则是通过 callback 函数完成的，同时也体现了事件驱动的特点。因此，我们可以说异步编程最直接的表现就是回调，但 <strong>callback 函数跟异步/同步并没有直接的关系</strong>。例如下面的例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">heavyCompute</span>(<span class="params">n, callback</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> count = <span class="number">0</span>,</span><br><span class="line">        i,</span><br><span class="line">        j;</span><br><span class="line">    <span class="keyword">for</span> (i = n; i &gt; <span class="number">0</span>;--i)&#123;</span><br><span class="line">        <span class="keyword">for</span>(j = n; j &gt; <span class="number">0</span>;--j)&#123;</span><br><span class="line">            count += <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    callback(count);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">heavyCompute(<span class="number">10000</span>, <span class="function"><span class="keyword">function</span>(<span class="params">count</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(count);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'hello'</span>);</span><br></pre></td></tr></table></figure>
<p>执行的结果为：</p>
<blockquote>
<p>100000000</p>
<p>hello</p>
</blockquote>
<p>可以看到，以上代码的回调函数仍然先于后续代码执行，也可以看出 <strong>JavaScript 函数也是一等公民</strong>的特点，毕竟也可以作为函数参数。这种方式就叫同步回调，而异步回调就类似于在写页面时经常会遇到的点击按钮触发弹出框弹出的动作，如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line"><span class="keyword">let</span> btn = <span class="built_in">document</span>.getElementByID(<span class="string">'myButton'</span>);</span><br><span class="line">btn.addEventListen(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">ev</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(ev.target);</span><br><span class="line">&#125;);</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<h2 id="什么是-callback-函数"><a href="#什么是-callback-函数" class="headerlink" title="什么是 callback 函数"></a>什么是 callback 函数</h2><p>绕远一点来说，编程分为系统编程和应用编程。系统编程就是编写库，这些编写的库函数相对来说更接近硬件。而应用编程就是利用写好的各种库来编写具有某种功用的程序。系统程序员会给自己编写的库留下一些接口，即 API （application programming interface，应用编程接口），以供应用程序员使用。所以在抽象层的图示里，库位于应用的底下。</p>
<p>当程序跑起来时，一般情况下应用程序会时常通过 API 调用库函数。这时会出现这样一种情况：某些库函数要求应用先传给它一个函数，好在合适的时候调用，已完成目标任务。这个被传入的，后又被调用的函数就称为 callback 函数。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fr1msicxozj20hd06h3ym.jpg" alt="callback 函数调用过程"></p>
<p>可以看到，callback 函数通常和应用处于同一抽象层（因为传入什么样的 callback 函数是在应用这一层决定的）。而所谓的“callback”就体现在：<strong>高层函数调用底层函数即库函数，底层函数回过头来调用高层函数的过程</strong>。</p>
<p>如果以饭馆吃饭买单的过程来比喻的话：在客人招呼服务员买单的时候，服务员就根据手上的订单计算总价后再告诉客人应付多少钱。这一过程中，客人招呼服务员买单就像应用程序的高层函数去调用底层函数，这里应用程序指的就是这一桌客人要买单的上下文环境，底层函数就是服务员计算总价的过程。服务员计算完总价之后再告诉客人就类似于底层函数调用高层函数，回到客人买单的上下文环境中去。</p>
<h2 id="为什么需要-Callback-函数"><a href="#为什么需要-Callback-函数" class="headerlink" title="为什么需要 Callback 函数"></a>为什么需要 Callback 函数</h2><p>callback 这种机制比简单的函数调用有着更大的灵活性。除了上面那种 callback 机制的应用场景外，其实任何时候我们都可以实现上面的那种 callback 机制，而不仅仅在应用和库之间。因此，从这里开始我们把上面的库函数称为中间函数。那 callback 机制的灵活性是如何实现的呢？我们可以认为中间函数在没有传入 callback 函数之前逻辑上是不完整的。换句话说，程序可以在运行时通过传入不同的 callback 函数来改变中间函数的行为，这比简单的函数调用要灵活得多。我们来看看用 python 写的示例：</p>
<p>even.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#回调函数1</span></span><br><span class="line"><span class="comment">#生成一个2k形式的偶数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">double</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x * <span class="number">2</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">#回调函数2</span></span><br><span class="line"><span class="comment">#生成一个4k形式的偶数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">quadruple</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x * <span class="number">4</span></span><br></pre></td></tr></table></figure>
<p>callback_demo.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> even <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="comment">#中间函数</span></span><br><span class="line"><span class="comment">#接受一个生成偶数的函数作为参数</span></span><br><span class="line"><span class="comment">#返回一个奇数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getOddNumber</span><span class="params">(k, getEvenNumber)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> + getEvenNumber(k)</span><br><span class="line">    </span><br><span class="line"><span class="comment">#起始函数，这里是程序的主函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span>    </span><br><span class="line">    k = <span class="number">1</span></span><br><span class="line">    <span class="comment">#当需要生成一个2k+1形式的奇数时</span></span><br><span class="line">    i = getOddNumber(k, double)</span><br><span class="line">    print(i)</span><br><span class="line">    <span class="comment">#当需要一个4k+1形式的奇数时</span></span><br><span class="line">    i = getOddNumber(k, quadruple)</span><br><span class="line">    print(i)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<p>运行<code>callback_demp.py</code>，输出如下： </p>
<blockquote>
<p>3</p>
<p>5</p>
</blockquote>
<p>上面的代码里，给<code>getOddNumber</code>传入不同的回调函数，它的表现也不同，这就是 callback 机制的优势所在。</p>
<p>但是在这里我们得强调：通过上面的论述，中间函数和 callback 函数是 callback 机制的两个必要部分，不过人们往往忽略了 callback 机制的起点：起始函数。它也是中间函数的调用者，在大部分情况下，可以把这个起始函数和程序的主函数等同起来。因此 callback 机制是起始函数、中间函数和 callback 函数的三方联动。同时起始函数和 callback 函数也不能简单看为一体。因为 callback 实际上有两种：阻塞式和延迟式。阻塞式，callback 函数的调用一定发生在起始函数返回之前；而延迟式，callback 函数的调用有可能是在起始函数返回之后。因此起始函数和 callback 函数并不为同一事物。</p>
<p>回到 JavaScript 中，为什么我们需要 callback 函数。因此上面我们也说到 JavaScript 是一门事件驱动的语言。这意味着 JavaScript 执行程序不会等待响应，而会在监听其他事件时继续执行。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol>
<li><a href="https://www.zhihu.com/question/19801131/answer/27459821" target="_blank" rel="noopener">回调函数（callback）是什么？ - no.body的回答 - 知乎 </a></li>
<li><a href="https://codeburst.io/javascript-what-the-heck-is-a-callback-aba4da2deced" target="_blank" rel="noopener">JavaScript: What the heck is a Callback?|Medium</a></li>
<li><a href="http://nqdeng.github.io/7-days-nodejs/#6.1" target="_blank" rel="noopener">七天学会NodeJS</a></li>
</ol>
]]></content>
      
        <categories>
            
            <category> 学习总结 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 理解计算机 </tag>
            
            <tag> Node.js </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[MIME是什么及其应用]]></title>
      <url>/2018/01/28/%E4%BB%80%E4%B9%88%E6%98%AFMIME/</url>
      <content type="html"><![CDATA[<p>前一篇 <a href="http://barryliu1995.studio/2017/12/28/%E6%96%87%E5%AD%97%E7%BC%96%E7%A0%81%E4%B8%8E%E5%89%8D%E7%AB%AF/">JavaScript与文字编码</a> 中谈到了 MIME，同时联系到<code>&lt;form&gt;</code>标签的<code>enctype</code>属性，所以这里做个小小的总结</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535ly1fnwdz1fs00j20qo0k03zx.jpg" width="600" height="200" align="center/"></p>
<a id="more"></a>
<h2 id="为什么会有-MIME"><a href="#为什么会有-MIME" class="headerlink" title="为什么会有 MIME"></a>为什么会有 MIME</h2><p>MIME 的全称为“Multipurpose Internet Mail Extensions”，中文译为“多用途互联网邮件扩展”，指的是一系列的电子邮件技术规范。它是作为 SMTP(Simple Mail Transfer Protocal) 的一个扩展。因为当初制定 SMTP 协议的时候并没有考虑传输内容可以有非文本内容（即二进制文件），同时制定者也没有考虑到非英语国家使用的文字。可能早期电子邮件的诞生只是为了解决简单信息即文本的问题，取代电报这一传统方式。</p>
<h2 id="MIME-的相关内容"><a href="#MIME-的相关内容" class="headerlink" title="MIME 的相关内容"></a>MIME 的相关内容</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>MIME 主要包括以下三部分内容：</p>
<ul>
<li>5 个新的邮件首部字段，它们可包含在原来邮件的首部中。这些字段提供了有关邮件主体的信息</li>
<li>定义了许多邮件内容的格式，对多媒体电子邮件的表示方法进行了标准化</li>
<li>定义了传送编码，可对任何内容格式进行转换，而不会被邮件系统改变</li>
</ul>
<p>下面时 MIME 增加的 5 个新的邮件首部的名称及其含义</p>
<ul>
<li>MIME-Version：标明 MIME 的版本。现在的版本号为 1.0。若邮件报文中无此项，表明是遵守 SMTP 协议的传统邮件报文，内容仅为 ASCII 字符</li>
<li>Contetn-Description：这是可读字符串，说明此邮件主题是否是图像、音频或视频</li>
<li>Content-Id：邮件的唯一标识符</li>
<li>Content-Transfer-Encoding：在传送时邮件的主体是如何编码的</li>
<li>Content-Type：说明邮件主体的数据类型和子类型</li>
</ul>
<p>上述前面三项意思说的很清楚，第四项<code>Content-Transfer-Encoding</code>的选项有：</p>
<ul>
<li>7 bit</li>
<li>8 bit</li>
<li>binary</li>
<li>quoted-printab</li>
<li>base64</li>
</ul>
<p>其中第一个方案时缺省值，即不用转化的 ASCII 字符。真正常用的是 quoted-printable 和 Base64 ，而 Base64 编码方案上篇博文 <a href="http://barryliu1995.studio/2017/12/28/%E6%96%87%E5%AD%97%E7%BC%96%E7%A0%81%E4%B8%8E%E5%89%8D%E7%AB%AF/">JavaScript与文字编码</a> 有详细介绍，而 quoted-printable 限于篇幅有限，这里就不细说，各位童鞋可以谷歌或者翻阅教科书。这里我们重点说说第五项：Content-Type</p>
<h3 id="最重要的-Content-Type-字段"><a href="#最重要的-Content-Type-字段" class="headerlink" title="最重要的 Content-Type 字段"></a>最重要的 Content-Type 字段</h3><p>这一邮件首部及其重要，它表明传递的信息类型和采用的编码。</p>
<p>MIME 标准规定该首部值为：内容类型/子类型。下面表格列举了部分基本内容类型及其子类型：</p>
<table>
<thead>
<tr>
<th style="text-align:center">内容类型</th>
<th style="text-align:center">子类型</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">text</td>
<td style="text-align:center">plain、html、xml、css</td>
<td style="text-align:center">不同格式的文本</td>
</tr>
<tr>
<td style="text-align:center">image</td>
<td style="text-align:center">gif、jpeg、tiff</td>
<td style="text-align:center">不同格式的图像</td>
</tr>
<tr>
<td style="text-align:center">audio</td>
<td style="text-align:center">basic、mpeg</td>
<td style="text-align:center">可听见的声音</td>
</tr>
<tr>
<td style="text-align:center">video</td>
<td style="text-align:center">mpeg、mp4、quicktime</td>
<td style="text-align:center">不同格式的影片</td>
</tr>
<tr>
<td style="text-align:center">application</td>
<td style="text-align:center">octet-stream、pdf、x-www-form-urlencoded</td>
<td style="text-align:center">不同应用程序产生的数据</td>
</tr>
<tr>
<td style="text-align:center">multipart</td>
<td style="text-align:center">mixed、alternative、parallel、digest</td>
<td style="text-align:center">多种类型的组合</td>
</tr>
</tbody>
</table>
<p>其中如果内容主体的类型为“text”，那么还必须指明编码类型“charset”，缺省值是 ASCII，其他可能值有 UTF-8、GB2312、GBK 等。还有 MIME 允许自定义内容类型。但为了避免可能出现名字冲突，标准要求自定义的内容类型的名称要以字符串<code>x-</code>开始。例如 HTML form 标签的 enctype 属性值之一：<code>x-www-form-urlencode</code></p>
<p>同时还要注意到 MIME 中的 multipart 内容类型，该内容类型很有用，因为它使邮件增加了相当大的灵活性，其子类型主要有：</p>
<ol>
<li>mixed——该子类型允许单个报文含有多个相互独立的子报文，每个子报文可有自己的类型和编码，可以是文本、图像或声音。在 mixed 后面还要用到一个关键字，即<code>Boundary=</code>，此关键字定义了分割报文各部分所用的字符串，只要在邮件的内容中不会出现这样的字符串即可，可以把它理解为分割标识符。当某一行以两个连字符“–”开始，后面紧跟上述的字符串，就表示下面开始了另一个子报文。</li>
<li>alternative——该子类型允许单个报文含有同一数据的多种表示。当给多个使用不同硬件平台或软件平台的收件人发送文本时就很有用。比如，用户可同时用普通的 ASCII 文本和格式化的形式发送文本，从而允许拥有图形功能的计算机用户在察看图形时选择格式化的形式。</li>
<li>parallel——该子类型允许单个报文含有可同时显示的各个子部分。例如，图像和声音同时播放。</li>
<li>digest——该子类型允许单个报文含有一组其他报文。</li>
</ol>
<h2 id="HTTP-报文中的实体首部"><a href="#HTTP-报文中的实体首部" class="headerlink" title="HTTP 报文中的实体首部"></a>HTTP 报文中的实体首部</h2><p>其实 Content-Type 字段不仅使用在电子邮件，后来也被移植到了 HTTP 协议中。HTTP 报文中的实体首部就有 Content-Type 这一字段，其用来说明报文实体部分的内容类型。</p>
<h2 id="form-标签的-enctype-属性"><a href="#form-标签的-enctype-属性" class="headerlink" title="form 标签的 enctype 属性"></a>form 标签的 enctype 属性</h2><p>enctype 属性规定了对表单提交给服务器时表单数据编码的内容类型（Content-Type），这里的“内容类型”就是来自 MIME 的 Content-Type 字段。但是 enctype 属性值只有三种：</p>
<ul>
<li>application/x-www-form-urlencoded</li>
<li>multipart/form-data</li>
<li>text/plain</li>
</ul>
<h3 id="application-x-www-form-urlencoded"><a href="#application-x-www-form-urlencoded" class="headerlink" title="application/x-www-form-urlencoded"></a>application/x-www-form-urlencoded</h3><p>form 表单提交的默认内容类型，使用该类型时，会将表单数据组合成<code>key1=value1&amp;key2=value2</code>形式。其中要注意表单数据中如果有非字母数字的字符，那么该字符会转换。因为 RFC 文档规定 URL 只能使用英文字母、阿拉伯数字和某些标点符号，不能使用其他文字和符号。所以如果 URL 中有汉字，就必须编码后使用。至于怎么编码，各位童鞋可查看阮一峰的 <a href="http://www.ruanyifeng.com/blog/2010/02/url_encoding.html" target="_blank" rel="noopener">关于URL编码|阮一峰的网络日志</a>。这篇文章虽然距今有点久远，具体方案可能会有所改变，但至少可以让你更加了解 URL 编码的问题。</p>
<p>采用此种内容类型，后端在取数据后，需要进行分解。同时还要注意，若此时表单中有文件，那么表单数据只有文件名。</p>
<h3 id="mulltipart-form-data"><a href="#mulltipart-form-data" class="headerlink" title="mulltipart/form-data"></a>mulltipart/form-data</h3><p>该内容类型不对字符编码，<strong>在使用包含文件上传控件的表单时，必须使用该值</strong>。</p>
<h3 id="text-plain"><a href="#text-plain" class="headerlink" title="text/plain"></a>text/plain</h3><p>表单数据中的空格转换为 “+” 加号，但不对特殊字符编码。要注意的是，若表单中有文件，则表单数据仅为文件名。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol>
<li><a href="http://www.ruanyifeng.com/blog/2008/06/mime.html" target="_blank" rel="noopener">MIME笔记|阮一峰的网络日志</a></li>
<li>《计算机网络》谢希仁著（第七版）</li>
<li><a href="https://segmentfault.com/a/1190000004955798#articleHeader4" target="_blank" rel="noopener">表单提交时编码类型enctype详解|SegmentFault</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2010/02/url_encoding.html" target="_blank" rel="noopener">关于URL编码|阮一峰的网络日志</a></li>
</ol>
]]></content>
      
        <categories>
            
            <category> 学习总结 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 理解计算机 </tag>
            
            <tag> 计算机网络 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[我的2017]]></title>
      <url>/2017/12/31/%E6%88%91%E7%9A%842017/</url>
      <content type="html"><![CDATA[<p>今天是2017年的最后一天，有些话想聊一聊，也就算个人的年度总结吧</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fn001f6vfkj20sg0g042o.jpg" width="600" height="200" align="center/"></p>
<a id="more"></a>
<h2 id="2017的那些选择"><a href="#2017的那些选择" class="headerlink" title="2017的那些选择"></a>2017的那些选择</h2><p>关注过我博客的各位童鞋应该都知道，我本不是计算机相关专业的学生。因为喜欢，就完完全全抛弃了自己的专业，在图书馆花了一整年的时间学习软件开发。先是学习了半年多时间的Android开发，因为一开始的目标就是想弄个有趣的 app 出来，结果因为六七月份找实习的时候发现情况不太好，就尝试了往前端开发方向发展了。最终在10月份的时候成功找到一份实习，接着在11月底找到一份待遇还算不错的正式工作。一开始决定往软件开发方向发展时，自己都不知道结果会是怎么样，而且当时已经是大三了，没有那么多时间给自己学习，所以一开始的时候还是很忐忑，家里人一开始也不是很支持我往开发方向发展。然而到今年底，也可以说是上帝眷顾自己的努力吧，算比较幸运的找到了一份待遇、工作氛围、工作内容都挺满意的工作，最高兴的还算是父母终于肯定了自己的付出。自己一年来的努力算是没有辜负当初自己做出这个选择时下定的决心，没有忘记当初是为了什么才做出这个决定。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fn02woazxlj20m30ao0ud.jpg" alt=""></p>
<h2 id="2017年的那些人"><a href="#2017年的那些人" class="headerlink" title="2017年的那些人"></a>2017年的那些人</h2><p>话说，今年一整年都在忙着学习开发，等到了今天回过头来看。发现自己还有半年就算是结束了自己16年的学生生涯。想想一下子不去教室上课了，还真的是很伤感。因为今年平时都忙着学习开发，自己的专业课基本都逃了，已经忘记了上课是一种什么感觉了，然而今年一过，后面就再也不用去上课了。所以好多东西，都是过去了才懂得珍惜。这也让我想起了高考完几天后，在家里收拾着高三一整年的资料书籍，突然不知怎么的，看着这一大堆书籍、资料，觉得高考考完，好像自己的生活就没了意义，于是就好想回到课堂上跟大家一起做“五三”，好想和高三(1)班的同学一起聊天、玩耍。如今大学快毕业了，发现跟自己很好的那帮同学还是以前的高中同学，毕竟他们和你度过了青春中最美好的六个年华。所以呀，过年回家的时候就特别期待着班级聚会，想看看大家，特别是当年那个自己特别喜欢的女生变什么样了。而等到上大学之后，特别是今年去了湖北十堰，九、十月份秋招的时候跑了一些宣讲会、十月份到十二月份实习，就发现等你见过各色各样的人之后，你会觉得找到一个打心底里跟自己能敞开心扉的人其实很难，而当你跟中学时代的那一帮同学度过了最美好的时光后，你也会发现，从某种情况下你跟他们的关系已经超越了同学的层面。所以上大学后，就越发珍惜以前的超越同学的情谊，一有时间我就会找那帮同学聊聊天。而大学同学，大多数人都只是从你生活“路过”而已。</p>
<h2 id="2017年的那些看过的电视剧、电影"><a href="#2017年的那些看过的电视剧、电影" class="headerlink" title="2017年的那些看过的电视剧、电影"></a>2017年的那些看过的电视剧、电影</h2><p>今年年初的时候看了两部日剧《逃避虽可耻》、《求婚大作战》和一部日影《你的名字。》。看完这些后就非常喜欢这两部电视剧和电影里带给人的那种感觉。特别是《你的名字。》，感觉日本人的生活气息是特别空灵的那种，也特别祥和。所以那时就决定以后有机会一定要去日本感受一下那种不一样的生活气息。年底的时候在同学推荐下又看了《请回答1988》，剧里面透露出来的亲情、爱情、友情真是很让人羡慕，虽然生活算不上富裕，但能够遇上如此有爱的邻居，和邻居家的孩子一起长大，最后到相爱相知，我想这就已经足够了。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fn02itif4pj21hc0u0e82.jpg" alt=""></p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fn02qigar4j21hc0u0wth.jpg" alt=""></p>
<h2 id="2017年的科比"><a href="#2017年的科比" class="headerlink" title="2017年的科比"></a>2017年的科比</h2><p>今年还有一件重要的事就是科比球衣退役。想想前年还坐在电脑前看科比球员生涯的最后一场比赛，到球衣退役那天，发现仅仅两年多的时间，科比却感觉明显老了一些。想想当年为什么喜欢科比，或许只是因为投入关键球后他那龇牙咧嘴的狠劲。还有早年，Nike 09年的广告《只要心够绝》让我喜欢上了科比的那种竞争精神。现在他已退役了，但科比精神仍在！话说，今年双十一的时候入了科比14年的低帮球鞋，突然就找回以前打球的欲望了，这大概就是球星的力量吧。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fn021bq1koj20i20i23za.jpg" alt=""></p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fn0262zov6j20hs0uvqa7.jpg" alt=""></p>
<h2 id="展望2018"><a href="#展望2018" class="headerlink" title="展望2018"></a>展望2018</h2><p>既然现在我已是程序员的身份了，希望新的一年戒骄戒躁，脚踏实地干实事。还有提醒自己记得注意自己的身体，多多锻炼，有机会去报个班学跳舞。有机会能多带父母走走，有闲钱可以入个MBP，有机会多出去看看外面的世界…..嗯，大概就这样吧。记住，少说套话多干实事！</p>
]]></content>
      
        <categories>
            
            <category> 生活日常 </category>
            
        </categories>
        
        
    </entry>
    
    <entry>
      <title><![CDATA[JavaScript与文字编码]]></title>
      <url>/2017/12/28/JavaScript%E4%B8%8E%E6%96%87%E5%AD%97%E7%BC%96%E7%A0%81/</url>
      <content type="html"><![CDATA[<p>在学习阮一峰的 <a href="http://es6.ruanyifeng.com/#docs/string" target="_blank" rel="noopener">字符串的扩展|ECMAScript 6 入门</a> 章节的时候其中有一处“JavaScript 共有 6 种方法可以表示一个字符”。然后想起之前看的一篇关于文字编码的文章，所以现在打算重新复习一下文字编码</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fr1lv8y975j20jg0ap75b.jpg" width="600" height="200" align="center/"></p>
<a id="more"></a>
<h2 id="文字编码"><a href="#文字编码" class="headerlink" title="文字编码"></a>文字编码</h2><p>在物理层面上，我们存入计算机的所有文件都是以二进制形式保存的。但现实生活中，我们会发现计算机中保存的文件形式各式各样，有音频文件、文本文件、视频文件、还有我们程序员熟悉的源代码文件等等。由此可以看出，不同文件的差别只是我们解读二进制的方式不同。然而即使同为一个类别的文件，解读二进制文件又会有不同。其中我们以网页开发中最常接触到的文本文件的编码方式拿来细说。这里所说的文本文件，一般是指基于字符编码的文件。计算机发展到现在为止，出现的字符编码就有 ASCII、GB2312、Unicode等等。</p>
<h3 id="ASCII"><a href="#ASCII" class="headerlink" title="ASCII"></a>ASCII</h3><p>使用 8 个二进制位进行编码的方案，最多可以给 256 个字符（包括字母、数字、标点符号、控制字符及其他符号）分配数值。基本的 ASCII 字符集共有 128 （0~127）个字符，其中有 96 个可打印字符，包括常用的字母、数字、标点符号等，另外还有 32 个控制字符。因为这 128 个基本字符就可以用 7 位二进制表示。所以多出来的最高位设为 0 （在数据传输时可用作奇偶校验位）。剩下的 128 个拿来扩充 ASCII 字符集，为了以后方便加入新的字符。这些扩充字符的编码最高为均为 1 的二进制数字（即十进制 128~255），称为扩展 ASCII 码。由于这些基本 ASCII 字符集字符数目有限，在实际应用中往往无法满足要求。国际标准化组织（ISO）制定了新的标准，该标准是兼容了基本 ASCII 字符集，在不同国家地区有不同具体的方案。</p>
<h3 id="Unicode"><a href="#Unicode" class="headerlink" title="Unicode"></a>Unicode</h3><p>为了解决不同国家地区间编码方案的不同引起的不便，于是就有了这样一个想法：将全世界所有的字符包含在一个集合里，计算机只要支持这一个字符集，就能显示所有的字符，再也不会乱码了。</p>
<p>Unicode 就是在这种背景下诞生了。Unicode 规定了每个字符的编号，这个编号也叫做“码点”（code point)。它从 0 开始，目前 Unicode 的最新版本一共收入了 109449 个符号，其中的中日韩文字为 74500 个。这么多符号，Unicode 不是一次性定义的，而是分区定义。每个区可以放 65536 （$2^{16}$)个字符，称为一个平面（plane）。目前，一共有 17 （$2^{5}$)个平面，也就是说，整个 Unicode 字符集的大小现在是 $2^{21}$ 个。其中最前面的 65536 个字符位，称为基本平面（缩写BMP），它的码点范围是从 0 ~ $2^{16}-1$，写成十六进制就是从 U+0000 ~ U+FFFF 。所有最常见的字符都放在这个平面，这是 Unicode 最先定义和公布的一个平面。剩下的字符都放在辅助平面（缩写SMP），码点范围从 U+010000 ~ U+10FFFF。</p>
<p>Unicode 只规定了每个字符的码点，到底用什么样的字节序表示这个码点，就涉及到编码方法。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fr1lvwov9hj20jg0ap74v.jpg" alt=""></p>
<h4 id="UTF-32"><a href="#UTF-32" class="headerlink" title="UTF-32"></a>UTF-32</h4><p>最直观的编码方法就是，每个码点使用 4 个字节表示，字节内容一一对应码点。这种编码方法就叫做 UTF-32。例如码点 597D </p>
<blockquote>
<p>U+597D = 0x0000 597D</p>
</blockquote>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fr1lw935dxj20jg0apwey.jpg" alt="UTF-32"></p>
<p>UTF-32 的优点在于，转换规则简单直观，查找效率高。缺点在于浪费空间，同样内容的英语文本，它会比 ASCII编码大四倍。这个缺点很致命，导致实际上没有人使用这种编码方法，HTML 5 标准就明文规定，网页不得编码成UTF-32。</p>
<h4 id="UTF-8"><a href="#UTF-8" class="headerlink" title="UTF-8"></a>UTF-8</h4><p>UTF-32 太过于浪费空间，所以急需一种节省空间的表示方案，这导致了 UTF-8 的诞生。UTF-8 是一种变长的编码方法，字符长度从 1 个字节到 4 个字节不等。越是常用的字符，字节越短，最前面的 128 个字符，只使用 1 个字节表示，与 ASCII 码完全相同。由于 UTF-8 这种节省空间的特性，导致它成为互联网上最常见的网页编码。</p>
<table>
<thead>
<tr>
<th style="text-align:center">字节</th>
<th style="text-align:center">编号范围</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0x0000 - 0x007F</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">0x0080 - 0x07FF</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td style="text-align:center">0x0800 - 0xFFFF</td>
<td style="text-align:center">3</td>
</tr>
<tr>
<td style="text-align:center">0x010000 - 0x10FFFF</td>
<td style="text-align:center">4</td>
</tr>
</tbody>
</table>
<p>我们来看看 UTF-8 具体是如何存储字符的，如下面的字符</p>
<blockquote>
<p>we 发 财 🤑</p>
</blockquote>
<p>上面的字符对应的十进制编码如下</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fmyle1uxb6j20mo05itav.jpg" alt=""></p>
<p>其中 20 是空格的编码，可以看到一个英文还是 1 个字节，一个中文用了 3 个字节，而一个 Emoj 用了 4 个字节。它怎么知道每次应该读取多少个字节呢？如下图所示：</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fmyle1v67kj20nj0bb78l.jpg" alt=""></p>
<p>如果一个字节是 0 开头，表示这个字节就表示一个字符，如果是 3 个 1 开头表示这个字符要占 3 个字节，有多少个 1 就表示当前字符占用了多少个字节。这个就是 UTF-8 的存储特点，UTF 规定了每个字符的编号，而 UTF-8 定义了字符应该怎么存储。从 <a href="https://link.juejin.im/?target=http%3A%2F%2Fwww.unicode.org%2F" target="_blank" rel="noopener">Unicode官网</a> 可以查到，“我”的UTF编码是6211，如下图所示：</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fmyle1w7bsj20n70cpqba.jpg" alt=""></p>
<p>6211 怎么变成 UTF-8 编码呢？因为 6211 落在下面这个范围：</p>
<blockquote>
<p>U+ 0800 ~ U+ FFFF: 1110XXXX 10XXXXXX 10XXXXXX</p>
</blockquote>
<p>所以是这么转的：</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fmyle1vjmsj20k20dpgpj.jpg" alt=""></p>
<p>“我”的 UTF-8 就是 E6 88 91</p>
<h4 id="UTF-16"><a href="#UTF-16" class="headerlink" title="UTF-16"></a>UTF-16</h4><p>UTF-16 编码介于 UTF-32 与 UTF-8 之间，同时结合了定长和变长两种编码方法的特点。它的编码规则很简单：基本平面的字符占用 2 个字节，辅助平面的字符占用 4 个字节。<strong>也就是说，UTF-16 的编码长度要么是 2 个字节（U+0000到U+FFFF），要么是 4 个字节（U+010000到U+10FFFF）。</strong> </p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fr1pbp16noj20jg0apdg2.jpg" alt=""></p>
<p>但是现在面临一个问题就是：当我们遇到两个字节，怎么看出它本身是一个字符，还是需要跟其他两个字节放在一起解读？然而在基本平面内，从 U+D800 ~ U+DFFF 是一个空段，即这些码点不对应任何字符。因此，这个空段被拿来映射辅助平面的字符。<strong>当我们遇到两个字节，发现它的码点在 U+D800 ~ U+DBFF 之间，就可以断定，紧跟在后面的两个字节的码点，应该在U+DC00 ~ U+DFFF之间，这四个字节必须放在一起解读。</strong></p>
<p>到此，我们可以看出，UTF-8 的优点在于 1 个英文只要 1 个字节，但是 1 个中文却是 3 个字节，UTF-16 的优点在于编码长度固定，1 个中文只要 2 个字节，但是 1 个英文也要 2 个字节。所以对于英文网页 UTF-8 编码更加有利，而对于中文网页使用 UTF-16 应该更加有利。因为绝大部分的中文都是落在 U+0000 ~ U+FFFF。</p>
<h3 id="Base64"><a href="#Base64" class="headerlink" title="Base64"></a>Base64</h3><p>早期电子邮件的 SMTP（Simple Mail Transfer Protocol） 协议仅限于传送 7 位的 ASCII 码。许多其他非英语国家的文字以及多媒体资源就无法传送，所以说早期的电子邮件就只能传送英文文字。或许是早期电子邮件的诞生的时候，美国人民以为只有他们自己会传送文字以取消传统的电报业务。</p>
<p>于是后来就提出了通用互联网邮件扩充（MIME）。MIME 并没有改动或取代 SMTP。MIME 的意图是继续使用原来的邮件格式，但增加了邮件主体的结构，并定义了传送非 ASCII 码的编码规则。因此在这种情况下，Base64 就诞生了。</p>
<p>Base64 可以把原本 ASCII 码的控制字符甚至 ASCII 码之外的字符都转成可打印的 6 bit 字符，也就是说用 6 bit 字符表达了原本 8 bit 字符。我们看看下面的图片：</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fmyjjdg2rrj20ly04xt9l.jpg" alt=""></p>
<p>像表格中那样，8 Bit$\times$3 的字符串可以每 6 个 bit 分成一组，每一组 bit 对应一个十进制的 index，每一个 index 值又对应了 Base64 的字符。由于 6 bit 的二进制代码共有 64 种不同的值，从 0 到 63。用 A 表示 0 ，用 B 表示 1 ，等等。26 个大写字母排列完毕后，接下去再排 26 个小写字母，再后面是 10 个数字，最后用“+”表示 62，而用“/”表示 63。再用两个连在一起的等号 “==” 和一个等号 “=” 分别表示最后一组的代码只有 8 bit 或 16 bit。</p>
<h2 id="JavaScript-与编码"><a href="#JavaScript-与编码" class="headerlink" title="JavaScript 与编码"></a>JavaScript 与编码</h2><h3 id="JavaScript使用哪种编码"><a href="#JavaScript使用哪种编码" class="headerlink" title="JavaScript使用哪种编码"></a>JavaScript使用哪种编码</h3><p>JavaScript 语言采用 Unicode 字符集，但是它编码使用的既不是 UTF-16，也不是UTF-8，更不是 UTF-32，而是 UCS-2。他们之间是什么关系呢？我们讲讲一些历史。</p>
<p>互联网还没出现的年代，曾经有两个团队，不约而同想搞统一字符集。一个是 1988 年成立的Unicode 团队，另一个是 1989 年成立的 UCS 团队。等到他们发现了对方的存在，很快就达成一致：世界上不需要两套统一字符集。1991 年 10 月，两个团队决定合并字符集。也就是说，从今以后只发布一套字符集，就是 Unicode，并且修订此前发布的字符集，UCS 的码点将与 Unicode 完全一致。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fr1lwmci1lj20jg0apmzc.jpg" alt="UCS与Unicode"></p>
<p>UCS 的开发进度快于 Unicode，1990 年就公布了第一套编码方法 UCS-2，使用 2 个字节表示已经有码点的字符。（那个时候只有一个平面，就是基本平面，所以 2 个字节就够用了。）UTF-16 编码迟至 1996 年 7 月才公布，明确宣布是 UCS-2 的超集，即基本平面字符沿用 UCS-2 编码，辅助平面字符定义了 4 个字节的表示方法。</p>
<p><strong>两者的关系简单说，就是 UTF-16 取代了 UCS-2 ，或者说 UCS-2 整合进了 UTF-16。</strong>所以，现在只有 UTF-16，没有 UCS-2。</p>
<h3 id="JavaScript为什么不使用-UTF-16"><a href="#JavaScript为什么不使用-UTF-16" class="headerlink" title="JavaScript为什么不使用 UTF-16"></a>JavaScript为什么不使用 UTF-16</h3><p>那么，为什么 JavaScript 不选择更高级的 UTF-16，而用了已经被淘汰的 UCS-2 呢？答案很简单：非不想也，是不能也。<strong>因为在 JavaScript 语言出现的时候，还没有 UTF-16 编码。</strong></p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fr1lx1wdehj20jg0apdgb.jpg" alt="JavaScript字符编码历史"></p>
<h3 id="JavaScript-字符函数的局限"><a href="#JavaScript-字符函数的局限" class="headerlink" title="JavaScript 字符函数的局限"></a>JavaScript 字符函数的局限</h3><p>由于 JavaScript 只能处理 UCS-2 编码，造成所有字符在这门语言中都是 2 个字节，如果是 4 个字节的字符，会当作两个双字节的字符处理。JavaScript 的字符函数都受到这一点的影响，无法返回正确结果。所以当遍历字符串的时，必须对码点做一个判断，然后手动调整。</p>
<blockquote>
<ul>
<li>String.prototype.replace()</li>
<li>String.prototype.substring()</li>
<li>String.prototype.slice()</li>
<li>…</li>
</ul>
</blockquote>
<p>上面的字符函数都只对 2 字节的码点有效。要正确处理 4 字节的码点要手动处理。</p>
<h3 id="ES6"><a href="#ES6" class="headerlink" title="ES6"></a>ES6</h3><p>JavaScript 的下一个版本 ECMAScript 6（ES6），大幅增强了 Unicode 支持，基本上解决了上面的问题。新增了以下特点：</p>
<ul>
<li>ES6能够自动识别 4 字节的码点</li>
<li>允许直接用码点表示 Unicode 字符</li>
<li>新增了几个专门处理 4 字节码点的函数</li>
<li>对正则表达式添加了 4 字节码点的支持</li>
<li>Unicode 正规化</li>
</ul>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="https://baike.baidu.com/item/%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81/8446880?fr=aladdin#7" target="_blank" rel="noopener">字符编码|百度百科</a></li>
<li><a href="https://juejin.im/post/5a06d6546fb9a045076f232a" target="_blank" rel="noopener">文字编码的那些事|掘金</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2014/12/unicode.html" target="_blank" rel="noopener">Unicode 与 JavaScript 详解|阮一峰的网络日志</a></li>
<li>《计算机网络》谢希仁著（第七版）</li>
<li><a href="https://w.wujunze.com/2017/09/26/%E6%BC%AB%E7%94%BB%EF%BC%9A%E4%BB%80%E4%B9%88%E6%98%AF-base64-%E7%AE%97%E6%B3%95%EF%BC%9F/" target="_blank" rel="noopener">漫画：什么是 Base64 算法|算法爱好者</a></li>
</ul>
]]></content>
      
        <categories>
            
            <category> 学习总结 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 理解计算机 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[学习日记(四)]]></title>
      <url>/2017/11/24/%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0(%E5%9B%9B)/</url>
      <content type="html"><![CDATA[<p>本文章将记录后面几个月的学习笔记</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fltf3zvk13j21dg0vmqu2.jpg" width="600" height="200" align="center/"></p>
<a id="more"></a>
<h2 id="2017-11-23"><a href="#2017-11-23" class="headerlink" title="2017.11.23"></a>2017.11.23</h2><h3 id="节流与防抖"><a href="#节流与防抖" class="headerlink" title="节流与防抖"></a>节流与防抖</h3><p>他们的出现主要是为了解决一些短时间内连续执行的事件带来性能上的不佳和内存的消耗巨大等问题。</p>
<ul>
<li>节流——在一定时间内触发一次</li>
<li>防抖——在一定时间之后才触发指定函数</li>
</ul>
<h3 id="用途"><a href="#用途" class="headerlink" title="用途"></a>用途</h3><ol>
<li>当我们做 keyup 向后台请求检验的时候，可以使用防抖函数，不然我们每按一次键盘就请求一次，请求太频繁，这样当我们结束按键盘的时候再去请求，请求少很多了，性能自然不用说</li>
<li>resize 窗口大小调整的时候，我们可以采用防抖技术也可以使用节流</li>
<li>mousemove 鼠标移动事件我们既可以采用防抖也可以使用节流</li>
<li>scroll 滚动条触发的事件，当然既可以采用防抖也可以采用节流</li>
<li>连续高频发的事件都可以采用这两种方式去解决，优化页面性能</li>
</ol>
<h2 id="2017-11-25"><a href="#2017-11-25" class="headerlink" title="2017.11.25"></a>2017.11.25</h2><h3 id="Three-js-中关于Mesh、Geometry、Material的关系"><a href="#Three-js-中关于Mesh、Geometry、Material的关系" class="headerlink" title="Three.js 中关于Mesh、Geometry、Material的关系"></a>Three.js 中关于Mesh、Geometry、Material的关系</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mesh = <span class="keyword">new</span> THREE.Mesh(<span class="keyword">new</span> THREE.Geometry(), <span class="keyword">new</span> THREE.Material());</span><br></pre></td></tr></table></figure>
<p>使用几何形状（Geometry）和材质（Material）之后，我们就能使用他们来创建物体了。最常用的一种物体就是网格（Mesh），网格是由顶点、边、面等组成的物体；其他物体包括线段（Line）、骨骼（Bone）、粒子系统（ParticleSystem）等。创建物体需要指定几何形状和材质，其中，几何形状（Geometry）决定了物体的顶点位置等信息，材质（Materia 决定了物体的颜色、纹理等信息。</p>
<h3 id="DOM——Document类型"><a href="#DOM——Document类型" class="headerlink" title="DOM——Document类型"></a>DOM——Document类型</h3><p>JavaScript 通过 Document 类型表示文档，这里文档指的可以是 HTML 页面或者其他基于 XML 的文档。不过最常见的应用还是作为 HTMLDocument （继承自 Document 类型）实例的<code>document</code>对象。而且，<code>document</code>对象是<code>window</code>对象的一个属性，因此可以将其作为全局对象来访问。其子节点可能是一个 DocumentType（&lt;!DOCTYPE&gt;标签，且最多一个）、Element（最多一个）、ProcessingInstruction 或 Comment。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> html = <span class="built_in">document</span>.documentElement;</span><br><span class="line">alert(html===<span class="built_in">document</span>.childNodes[<span class="number">0</span>]);		<span class="comment">//true</span></span><br><span class="line">alert(html===<span class="built_in">document</span>.firstChild);			<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> body = <span class="built_in">document</span>.body;</span><br><span class="line">alert(body === html.firstChild);			<span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<h2 id="2017-11-28"><a href="#2017-11-28" class="headerlink" title="2017.11.28"></a>2017.11.28</h2><h3 id="计算机文件"><a href="#计算机文件" class="headerlink" title="计算机文件"></a>计算机文件</h3><ul>
<li>一般来说，计算机文件可以分为两类：文本文件和二进制文件。</li>
<li>图形文件及文字处理程序等计算机程序都属于二进制文件。这些文件含有特殊的格式及计算机代码。ASCII 则是可以用任何文字处理程序阅读的简单文本文件。</li>
<li>广义的二进制文件即指文件，由文件在外部设备的存放形式为二进制而得名。狭义的二进制文件即除文本文件以外的文件。文本文件是一种由很多行字符构成的计算机文件。文本文件存在于计算机系统中，通常在文本文件最后一行放置文件结束标志。文本文件的编码基于字符定长，译码相对要容易一些；二进制文件编码是变长的，灵活利用率要高，而译码要难一些，不同的二进制文件译码方式是不同的。</li>
<li>计算机的存储在物理上是二进制的，所以文本文件与二进制文件的区别并不是物理上的，而是逻辑上的。这两者只是在编码层次上有差异。简单来说，文本文件是基于字符编码的文件，常见的编码有ASCII编码，UNICODE编码等等。二进制文件是基于值编码的文件，你可以根据具体应用，指定某个值（可以看作是自定义编码）。从上面可以看出文本文件基本上是定长编码的(也有非定长的编码如UTF-8)，基于字符，每个字符在具体编码中是固定的，ASCII码是8个比特的编码，UNICODE一般占16个比特。而二进制文件可看成是变长编码的，因为是值编码，多少个比特代表一个值，完全由自己决定。</li>
<li>ASCII 是计算机最早的文字编码方案，所以对他的支持是全球范围内的，所以使用全球任何一款文字处理程序都可以打开此 ASCII 文件，所以把它称为纯文本文件。而一些特殊的比如 GBK、BIG5、GB18030文字编码方案都不是全球范围内都支持使用的，比如在国内出售的计算机预装的<code>Window</code>操作系统内置的字符编码方式就肯定不会有GB18030这种日文文字编码方案</li>
<li>文本文件与二进制文件的区别仅仅是编码上不同，所以他们的优缺点就是编码的优缺点。一般认为，文本文件编码基于字符定长，译码容易；二进制文件编码是变长的，所以它灵活，存储利用率要高些，译码难一些（不同的二进制文件格式，有不同的译码方式）。在windows下，文本文件不一定是ASCII来存贮的，因为ASCII码只能表示128的标识，打开一个txt文档，然后另存为，有个选项是编码，可以选择存贮格式，一般来说UTF-8编码格式兼容性要好一些。</li>
</ul>
<h2 id="2017-11-30"><a href="#2017-11-30" class="headerlink" title="2017.11.30"></a>2017.11.30</h2><h3 id="HTML5-Geolocation"><a href="#HTML5-Geolocation" class="headerlink" title="HTML5 Geolocation"></a>HTML5 Geolocation</h3><p>用HTML5 Geolocation API(地理位置应用程序接口)获得的经纬度参数，传入到腾讯地图，并显示出来后，会发现会有一定的偏移，这是因为我国把美国卫星的GPS的地球坐标，进行偏移的算法，计算后，得出了一个火星坐标。为了让火星坐标能正确的显示，又给每部导航软件加入了这个算法，可以在大家的地图上还原位置；而自己写的程序里没有加入此算法，所以出现了偏移问题，而这个加偏并不是线性的加偏，所以各地的偏移情况都会有所不同。</p>
<h2 id="2017-12-6"><a href="#2017-12-6" class="headerlink" title="2017.12.6"></a>2017.12.6</h2><h3 id="URI与URL的区别"><a href="#URI与URL的区别" class="headerlink" title="URI与URL的区别"></a>URI与URL的区别</h3><p>统一资源标志符 URI 就是在某一规则下能把一个资源独一无二地标识出来。拿人做例子，假设这个世界上所有人的名字都不能重复，那么名字就是 URI 的一个实例，通过名字这个字符串就可以标识出唯一的一个人。现实当中名字当然是会重复的，所以身份证号才是 URI ，通过身份证号能让我们能且仅能确定一个人。那统一资源定位符 URL 是什么呢。也拿人做例子然后跟 HTTP 的 URL 做类比，就可以有：</p>
<blockquote>
<p>动物住址协议://地球/中国/浙江省/杭州市/西湖区/某大学/14号宿舍楼/525号寝/张三.人</p>
</blockquote>
<p>可以看到，这个字符串同样标识出了唯一的一个人，起到了URI的作用，所以URL是URI的子集。URL 是<strong>以描述人的位置来唯一确定一个人的</strong>。在上文我们用身份证号也可以唯一确定一个人。对于这个在杭州的张三，我们也可以用下面编码来标识他</p>
<blockquote>
<p>身份证号：<a href="tel:123456789" target="_blank" rel="noopener">123456789</a></p>
</blockquote>
<p>所以不论是用定位的方式还是用编号的方式，我们都可以唯一确定一个人，都是 URl 的一种实现，而 URL 就是用定位的方式实现的 URI 。</p>
<h2 id="2017-12-8"><a href="#2017-12-8" class="headerlink" title="2017.12.8"></a>2017.12.8</h2><h3 id="CGI-Common-Gateway-Interface"><a href="#CGI-Common-Gateway-Interface" class="headerlink" title="CGI(Common Gateway Interface)"></a>CGI(Common Gateway Interface)</h3><p>What is CGI? CGI stands for Common Gateway Interface. This is not to be confused with the other CGI, which stands for Computer Generated Imagery, which is the technology that they use for special effects and explosions and things in major motion pictures. This is CGI, the Common Gateway Interface. This is the technology that allows web browsers to submit forms and interact with programs on a web server. So, when you see a web form like this one here, and you fill it in and you press the button and it goes, what happens from this point is CGI. The web browser submits the data to the server. The server passes that data on to an application. The application responds and it goes back up the chain, back to your web browser, and your web browser gets some kind of result and maybe something happens on the backend, like a database thing or sending an email or something like that. CGI is used for simple interactive applications. More complicated applications like Google Maps or Gmail or something like that, use another technology called Ajax, which sometimes actually uses CGI on the backend to communicate with the applications on the server. But CGI is used for simple interactive applications. CGI applications can be written in any programming language. The most common ones are languages like Perl and PHP and Python and things like that that tend to be simple languages. Because CGI applications tend to be simple applications. For this reason, CGI applications are often called CGI scripts, because the languages that they tend to be written in, tend to be what are called scripting languages. They tend to be very simple languages. And for this reason, they’re often called CGI scripts. Of course, they can be written in any language. Sometimes more complex languages like ASP or Java or even C++ can be used, but it’s important to note that CGI applications run in the server. They do not run in the web browser. So, the technology that’s used by the CGI application must be supported by the web server. And the requirements of running applications on the server and the security restrictions and things like that must all be followed according to the rules of the server and not according to the rules of your local computer or your application. And this is because CGI applications run in the server and not in the web browser. So, we’ll cover more of the details as we move along in this course, but in a nutshell, that’s what CGI is. </p>
<h2 id="2017-12-10"><a href="#2017-12-10" class="headerlink" title="2017.12.10"></a>2017.12.10</h2><h3 id="插入标记"><a href="#插入标记" class="headerlink" title="插入标记"></a>插入标记</h3><p>IE标准的<code>innerHTML</code>、<code>outerHTML</code>、<code>innerText</code>、<code>outerText</code>这四个插入标记，其中前两个已经被列为了HTML5的标准，而后面两个却没有得到这样的待遇。同时还有一个这样的问题需要注意到：设置这四个属性的时候，得到的结果却不是设置时所敲下的字符文本，<strong>原因在于结果返回的字符串是根据原始HTML字符串创建的DOM树经过序列化之后的结果</strong>。</p>
<h2 id="2017-12-17"><a href="#2017-12-17" class="headerlink" title="2017.12.17"></a>2017.12.17</h2><h3 id="页面大小、视口大小和浏览器窗口大小"><a href="#页面大小、视口大小和浏览器窗口大小" class="headerlink" title="页面大小、视口大小和浏览器窗口大小"></a>页面大小、视口大小和浏览器窗口大小</h3><ul>
<li>IE9+、Safari、Firefox中，<code>outerWidth</code>和<code>outerHeight</code>表示浏览器窗口本身的大小。而在Opera中，这两个属性表示的是Opera中单个标签页对应的浏览器窗口</li>
<li><code>innerWidth</code>和<code>innerHeight</code>在除了Chrome浏览器之外的浏览器中都表示该容器中页面视图区的大小（减去边框宽度）</li>
<li>Chrome浏览器中，<code>innerWidth</code>、<code>innerHeight</code>、<code>outerWidth</code>、<code>outerHeight</code>都表示视图区大小</li>
<li>IE8及更早版本没有提供取得当前浏览器窗口尺寸的属性；不过它通过 DOM 提供了页面视图区域的相关信息：在IE、Firefox、Safari、Opera和Chrome中，<code>document.documentElement.clientXXX</code>保存了页面视图区的大小。在IE6 中这些属性必须在标准模式下才有效；如果是混杂模式，就必须通过<code>document.body.clientXXX</code>取得相同信息</li>
</ul>
<h2 id="2017-12-26"><a href="#2017-12-26" class="headerlink" title="2017.12.26"></a>2017.12.26</h2><h3 id="Shell"><a href="#Shell" class="headerlink" title="Shell"></a>Shell</h3><p>Shell 中文翻译为“壳层”。在计算机科学中，Shell 指“为用户提供用户界面”的软件，通常指的是命令行界面的解析器。一般来说，这个词是指操作系统中，提供访问内核所提供的服务的程序。Shell 也用于泛指所有为用户提供操作界面的程序，也就是程序和用户交互的接口。因此与之相对的是程序内核(Core)，内核不提供和用户的交互功能。<strong>通常将 Shell 分为两类：命令行与图形界面。命令行壳层提供一个命令行界面(CLI)；而图形壳层提供要给图形用户界面(GUI)</strong>。相关信息可参考 <a href="https://zh.wikipedia.org/wiki/%E6%AE%BC%E5%B1%A4" target="_blank" rel="noopener">壳层|维基百科</a></p>
<h3 id="Node-js-的异步I-O和事件驱动的理解"><a href="#Node-js-的异步I-O和事件驱动的理解" class="headerlink" title="Node.js 的异步I/O和事件驱动的理解"></a>Node.js 的异步I/O和事件驱动的理解</h3><ul>
<li>异步I/O——非阻塞的服务器我们可以想象成一个无限 loop 循环，这个 loop 会一直跑下去。一个新请求来了，这个 loop 就接了这个请求，把这个请求传给其他的进程（比如传给一个搞数据库查询的进程），然后响应一个回调（callback）。完事了这 loop 就接着跑，接其他的请求。如果请求处理完成，loop 就把结果传回用户的浏览器，接着继续跑。</li>
<li>事件驱动——服务器只在用户那边有事件发生的时候才响应</li>
</ul>
<h2 id="2018-1-1"><a href="#2018-1-1" class="headerlink" title="2018.1.1"></a>2018.1.1</h2><h3 id="SSH-与-SSL"><a href="#SSH-与-SSL" class="headerlink" title="SSH 与 SSL"></a>SSH 与 SSL</h3><h4 id="Common"><a href="#Common" class="headerlink" title="Common"></a>Common</h4><p>Both are public key cryptography tunneling protocols and aims to create a secure, confidential exchange of data and and connection across the network particularly, the internet. The encryption technologies used by both protocols are very reliable, and it is extremely difficult or impossible for hackers to break into them.</p>
<h4 id="Difference"><a href="#Difference" class="headerlink" title="Difference"></a>Difference</h4><p>SSH means “Secure Shell”. It has a built-in username/password authentication system to establish a connection. It uses Port 22 to perform the negotiation or authentication process for connection.  At the same time, SSL means “Secure Sockets Layer”. Many protocols — like HTTP, SMTP, FTP, SSH and so on were adjusted to include the support of SSL. The port that it typically uses to make a connection to a secure server is 443.</p>
<p>Unlike SSH, it does not require any authentication. It is most often implemented for transmitting information such as banking, credit card, and other vital personal information to a particular server somewhere on the internet.</p>
<p>Summary:</p>
<ol>
<li>Normally, SSH uses port 22 while SSL uses port 443</li>
<li>SSL is used predominantly for securely transmitting critical information like in credit cards and banking. On the other hand, SSH is for securely executing commands across the internet</li>
<li>SSH uses a username/password authentication system to establish a secure connection while SSL does not really bother with it</li>
<li>SSH is more about network tunneling while SSL is more about certificates</li>
</ol>
<h3 id="Node-js-后台程序与传统后台程序的区别"><a href="#Node-js-后台程序与传统后台程序的区别" class="headerlink" title="Node.js 后台程序与传统后台程序的区别"></a>Node.js 后台程序与传统后台程序的区别</h3><p>浏览器给网站发请求的过程一直没怎么变过。当浏览器给网站发了请求。服务器收到了请求，然后开始搜寻被请求的资源。如果有需要，服务器还会查询一下数据库，最后把响应结果传回到浏览器。不过，在传统的 web 服务器中（比如 Apache），每一个请求都会让服务器创建一个新的进程来处理这个请求。</p>
<p>后来有了 Ajax。有了 Ajax，我们就不用每次都请求一个完整的新页面了，取而代之的是，每次只请求需要的部分页面信息就可以了。这显然是一个进步。但是比如你要建一个类似于人人网的社交网站，你的好友随时随地都可能推送新的状态，然后你的好友消息那个页面会实时自动刷新。要达成这个需求，我们需要让用户一直与服务器保持一个有效连接。目前最简单的实现方法，就是让用户和服务器之间保持<strong>长轮询</strong>。</p>
<p>而 HTTP 请求不是持续的连接（HTTP 是超文本传输协议，而 TCP 是传输控制协议而且连接是持续的）你请求一次，服务器响应一次，然后就完了。长轮训是一种利用HTTP 模拟持续连接的技巧。具体来说，只要页面载入了，不管你需不需要服务器给你响应信息，你都会给服务器发一个 Ajax 请求。这个请求不同于一般的 Ajax 请求，服务器不会直接给你返回信息，而是它要等着，直到服务器觉得该给你发信息了，它才会响应。比如，你的好友发了一条新鲜事，服务器就会把这个新鲜事当做响应发给你的浏览器，然后你的浏览器就刷新页面了。浏览器收到响应刷新完之后，再发送一条新的请求给服务器，这个请求依然不会立即被响应。于是就开始重复以上步骤。利用这个方法，可以让浏览器始终保持等待响应的状态。虽然以上过程依然只有非持续的 HTTP 参与，但是我们模拟出了一个看似持续的连接状态。</p>
<h2 id="2018-1-6"><a href="#2018-1-6" class="headerlink" title="2018.1.6"></a>2018.1.6</h2><h3 id="mouseenter-VS-mouseover"><a href="#mouseenter-VS-mouseover" class="headerlink" title="mouseenter VS mouseover"></a>mouseenter VS mouseover</h3><ul>
<li>mouseenter只作用在目标元素上</li>
<li>mouseOver作用在目标元素上及其子元素上</li>
</ul>
<p>具体差别可看 <a href="https://jsfiddle.net/KyleMit/GR8sk/" target="_blank" rel="noopener">MouseOver vs MouseEnter | JSFiddle</a> 此 Demo</p>
<h2 id="2018-1-10"><a href="#2018-1-10" class="headerlink" title="2018.1.10"></a>2018.1.10</h2><h3 id="Web开发历史"><a href="#Web开发历史" class="headerlink" title="Web开发历史"></a>Web开发历史</h3><p>最早的软件都是运行在大型机上的，软件使用者通过“哑终端”登陆到大型机上去运行软件。后来随着 PC 机的兴起，软件开始主要运行在桌面上，而数据库这样的软件运行在服务器端，这种Client/Server 模式简称 C/S 架构。</p>
<p>随着互联网的兴起，人们发现，C/S 架构不适合 Web，最大的原因是 Web 应用程序的修改和升级非常迅速，而 C/S 架构需要每个客户端逐个升级桌面 App，因此，Browser/Server 模式开始流行，简称 B/S 架构。</p>
<p>在 B/S 架构下，客户端只需要浏览器，应用程序的逻辑和数据都存储在服务器端。浏览器只需要请求服务器，获取 Web 页面，并把 Web 页面展示给用户即可。</p>
<p>当然，Web 页面也具有极强的交互性。由于 Web 页面是用 HTML 编写的，而 HTML 具备超强的表现力，并且，服务器端升级后，客户端无需任何部署就可以使用到新的版本，因此，B/S 架构迅速流行起来。</p>
<p>今天，除了重量级的软件如 Office，Photoshop 等，<strong>大部分软件都以 Web 形式提供</strong>。比如，新浪提供的新闻、博客、微博等服务，均是 Web 应用。</p>
<p>Web 应用开发可以说是目前软件开发中最重要的部分。Web开发也经历了好几个阶段：</p>
<p>静态 Web 页面：由文本编辑器直接编辑并生成静态的 HTML 页面，如果要修改 Web 页面的内容，就需要再次编辑 HTML 源文件，早期的互联网 Web 页面就是静态的；</p>
<ul>
<li>CGI——由于静态 Web 页面无法与用户交互，比如用户填写了一个注册表单，静态 Web 页面就无法处理。要处理用户发送的动态数据，出现了 Common Gateway Interface，简称CGI，<strong>用 C/C++ 编写</strong>。</li>
<li>ASP/JSP/PHP——由于 Web 应用特点是修改频繁，<strong>用 C/C++ 这样的低级语言非常不适合 Web 开发，而脚本语言由于开发效率高，与 HTML 结合紧密，因此，迅速取代了 CGI 模式</strong>。ASP 是微软推出的用 VBScript 脚本编程的 Web 开发技术，而 JSP 用 Java 来编写脚本，PHP 本身则是开源的脚本语言。</li>
<li>MVC：为了解决直接用脚本语言嵌入 HTML 导致的可维护性差的问题，Web 应用也引入了 Model-View-Controller 的模式，来简化 Web 开发。ASP 发展为 ASP.Net，JSP 和 PHP 也有一大堆 MVC 框架。</li>
</ul>
<p>目前，Web 开发技术仍在快速发展中，异步开发、新的 MVVM 前端技术层出不穷。</p>
<h3 id="CSS-in-JS"><a href="#CSS-in-JS" class="headerlink" title="CSS in JS"></a>CSS in JS</h3><p>以前，网页开发有一个原则，叫做<a href="https://en.wikipedia.org/wiki/Separation_of_concerns#HTML.2C_CSS.2C_JavaScript" target="_blank" rel="noopener">“关注点分离”</a>（separation of concerns）。它的意思是，各种技术只负责自己的领域，不要混合在一起，形成耦合。对于网页开发来说，主要是三种技术分离。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fnbcg4w467j20hq09zdg8.jpg" alt=""></p>
<blockquote>
<ul>
<li>HTML 语言：负责网页的结构，又称语义层</li>
<li>CSS 语言：负责网页的样式，又称视觉层</li>
<li>JavaScript 语言：负责网页的逻辑和交互，又称逻辑层或交互层</li>
</ul>
</blockquote>
<p>然而当 React 出现以后这个原则就不再使用了，因为 React 是组件化框架，它表面上的写法是 HTML、CSS、JavaScript 混合在一起，但实际上是用 JavaScript 在写 HTML 和 CSS。React 在JavaScript 里面实现了对 HTML 和 CSS 的封装，我们通过封装去操作 HTML 和 CSS 。也就是说，网页的结构和样式都通过 JavaScript 操作。React 对 HTML 的封装是 <strong>JSX 语言</strong>。而 React 对 CSS 封装非常简单，就是沿用了 DOM 的 <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/style" target="_blank" rel="noopener">style 属性对象</a>。这就导致了一系列的第三方库的出现，用来加强 React 的 CSS 操作。它们统称为 <strong>CSS in JS</strong>，意思就是使用 JS 语言写 CSS。它们同时也是<strong>“CSS 预处理器”</strong>（比如 Less 和 Sass 等）的子集。只不过 CSS in JS 使用 JavaScript 的语法，是 JavaScript 脚本的一部分，不用从头学习一套专用的 API。</p>
<h2 id="2018-1-11"><a href="#2018-1-11" class="headerlink" title="2018.1.11"></a>2018.1.11</h2><h3 id="Chrome-DevTools-的-Network-面板"><a href="#Chrome-DevTools-的-Network-面板" class="headerlink" title="Chrome DevTools 的 Network 面板"></a>Chrome DevTools 的 Network 面板</h3><h4 id="DOMContentLoaded"><a href="#DOMContentLoaded" class="headerlink" title="DOMContentLoaded"></a>DOMContentLoaded</h4><p>解析页面的初始标记时会触发 DOMContentLoaded 事件，在 Overview 窗格中的蓝色竖线表示此事件触发时刻，在 Summary 窗格中可以看到事件的确切时间</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fncnub587sj20eh0bc75s.jpg" alt="DOMContentLoaded"></p>
<h4 id="Load"><a href="#Load" class="headerlink" title="Load"></a>Load</h4><p>页面完全加载时将触发 Load 事件，可以在 Overview 窗格中的红色竖线处标明触发具体时刻；也可以在 Requests Table 中同样标明了红色竖线；在 Summary 窗格中可以看到事件触发的确切时间</p>
<h4 id="了解-Resource-Timing"><a href="#了解-Resource-Timing" class="headerlink" title="了解 Resource Timing"></a>了解 Resource Timing</h4><p>此处展示了网页请求的资源的生命周期，从发出请求到成功在浏览器加载，这一过程经历了不同的阶段，不同阶段使用不同的颜色段去描述阶段维持时间的长短，具体可查阅 <a href="https://developers.google.com/web/tools/chrome-devtools/network-performance/understanding-resource-timing" target="_blank" rel="noopener">了解 Resource Timing|Google Developers</a></p>
<h2 id="2018-1-14"><a href="#2018-1-14" class="headerlink" title="2018.1.14"></a>2018.1.14</h2><h3 id="Koa-与-Express"><a href="#Koa-与-Express" class="headerlink" title="Koa 与 Express"></a>Koa 与 Express</h3><p>Express 是 Node.js 上第一代流行的 Web 框架，它对 Node.js 的 http 模块进行了封装。但是它是基于 ES5 的语法，要实现异步代码，就只能使用回调函数。但如果异步嵌套层次过多，代码写起来就会非常难看。虽然 Node.js 的 async 库可以用来组织异步代码，但是用回调写异步代码实在是太痛苦了。</p>
<p>随着新版 Node.js 开始支持 ES6，Express 的团队又基于 ES6 的 generator 重新编写了下一代 web框架 Koa。Koa 1.0 用 generator 实现异步，这比回调简单不少，但是 generator 的本意并不是异步。ES6 的 Promise 才是为异步设计的，但是 Promise 的写法比较复杂。为了再次简化异步代码，ES7 引入了新的关键字 <code>async</code> 和 <code>await</code> 。</p>
<p>Koa 团队并没有止步于 Koa 1.0，他们非常超前地基于 ES7 开发了 Koa2，和 Koa1 相比，Koa2 完全<strong>使用 Promise 并配合 async 来实现异步</strong>。</p>
<h2 id="2018-1-16"><a href="#2018-1-16" class="headerlink" title="2018.1.16"></a>2018.1.16</h2><h3 id="发送表单数据"><a href="#发送表单数据" class="headerlink" title="发送表单数据"></a>发送表单数据</h3><p>HTML 标签<code>&lt;form/&gt;</code>是表单元素，表单元素的作用就是让用户在此填上信息，然后点击表单内部的“submit”按钮<strong>自动生成请求</strong>，将表单数据（form-data）一般以 GET 请求的方式形成请求参数附加到请求报文中的 URL 中。此时信息是明文传输。表单数据被附加到 URL 作为一系列的名称/值对。在URL 地址结束之后，我们包括一个问号(?)，后面是名称/值对，每一个都由一个与符号(&amp;)分隔开。例如：<code>http://www.foo.com/?name=BarryLiu&amp;age=23</code>。这一请求也可通过 DevTools Network 面板看见，至于 POST 请求，信息是被保存到请求报文的主体部分。</p>
<p>然而当 Web 应用功能逐渐丰富后，<code>&lt;form/&gt;</code>的使用就不再纯粹是用户填入信息后提交，提交的内容附加到请求 URL 后面，此时浏览器需要再次加载整个页面以体现用户提交信息后服务器的处理结果。随着 Web 富应用化，开发人员也逐渐更多的控制表单数据的提交，不管在 UI 上还是底层数据传输上都跟以往传统真正意义上的“表单数据”提交有着差别。其中体现在用户填写信息后，在浏览器后台以异步的形式发送表单数据到服务器上，而浏览器也无需完整加载整个页面来体现数据提交后的结果，而是只更新页面上需要更新的部分。这种技术被称为“AJAX”（Asynchronous JavaScript And XML）。同时如果使用<code>FormData</code>对象，就可以模仿<code>&lt;form/&gt;</code>标签提交表单数据（form-data）的行为。在服务器端的处理就是一样的。</p>
<h2 id="2018-1-19"><a href="#2018-1-19" class="headerlink" title="2018.1.19"></a>2018.1.19</h2><h3 id="Docker-是什么"><a href="#Docker-是什么" class="headerlink" title="Docker 是什么"></a>Docker 是什么</h3><p><img src="http://ww1.sinaimg.cn/mw690/7b6c9535gy1fnlqahjewuj211m0xkdgu.jpg" alt="Docker logo"></p>
<p>云计算时代，服务器可能会存在着多个后台程序的环境，比如使用不同开发语言开发的网站后台，如果没有容器技术，那么他们之间的环境配置就会变得很复杂，甚至还可能存在冲突。为了解决这一问题，类似于海运过程中为了解决一次性可以同时装载不同的货物，使用了集装箱，各个集装箱之间互不干扰，就如同上图 Logo 所示一样。常规来讲，我们可以在服务器上创建不同的虚拟机在不同的虚拟机上放置不同的应用，但是虚拟机开销比较高。Docker 可以实现虚拟机隔离应用环境的功能，并且开销比虚拟机小，小就意味着省钱了。</p>
<p>更多请查看 <a href="https://www.zhihu.com/question/28300645/answer/106574994?iam=ab93b5364994da131e1d7b1dbff90480&amp;utm_source=com.ideashower.readitlater.pro&amp;utm_medium=social" target="_blank" rel="noopener">如何通俗解释Docker是什么|知乎</a></p>
<h3 id="库（library）和框架（framework）的区别"><a href="#库（library）和框架（framework）的区别" class="headerlink" title="库（library）和框架（framework）的区别"></a>库（library）和框架（framework）的区别</h3><p>Library 和 Framework 最大的区别是： <strong>inversion of control（控制反转）</strong></p>
<blockquote>
<p>your code calls a library but a framework calls your code.</p>
</blockquote>
<p>也就是：</p>
<ul>
<li>当你在调用 library 的时候， 你按照自己的意愿来调用它（比如jQuery）</li>
<li>对于 framework， 那么控制方就是倒转过来了，是它在调用你（比如bootstrap)， 就像是Hollywood 的一个原则：<strong>Don’t call Us, We’ll call You</strong>.</li>
</ul>
<h2 id="2018-1-24"><a href="#2018-1-24" class="headerlink" title="2018.1.24"></a>2018.1.24</h2><h3 id="静态-动态网络服务器"><a href="#静态-动态网络服务器" class="headerlink" title="静态/动态网络服务器"></a>静态/动态网络服务器</h3><p>网络浏览器通过超文本标记语言传输协议（<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP" target="_blank" rel="noopener">HTTP</a>）与网络服务器（<a href="https://developer.mozilla.org/en-US/docs/Learn/Common_questions/What_is_a_web_server" target="_blank" rel="noopener">web servers</a>）。 当你在网页上<strong>点击一个链接、提交一个表单、或者进行一次搜索</strong>的时候，浏览器发送一个HTTP请求给服务器。</p>
<p><img src="https://mdn.mozillademos.org/files/8659/web-server.svg" alt="B/S 模式"></p>
<p>要发布一个网站，你需要一个静态或动态的服务器。</p>
<ul>
<li>静态网站，是指无论何时当一个特定资源被请求的时候都返回相同的被硬编码的内容。当用户想要导航到某个页面时，浏览器会发送一个指定到这个页面的 URL 的 HTTP “GET” 请求。服务器从它的文件系统中检索被请求的文件，然后返回一个 HTTP 回应，该回应包括被请求的文件和一个状态码（通常200代表操作成功）。如果出于某些原因被请求的文件无法检索到，就会返回错误码</li>
</ul>
<p><img src="http://ww1.sinaimg.cn/mw690/7b6c9535gy1fnrq7rhbr1j20qo07f74h.jpg" alt="Basic Static Web Server"></p>
<ul>
<li>动态网站，是指，一些响应内容只有在被需要的时候才会生发的网站。在一个动态网站上，页面通常是通过将数据库的数据植入到HTML模板中的占位符中而产生的（这是一种比使用静态网站有效得多的存储大量内容的方式）。动态网站可以基于用户提供的个人信息或者偏好设置来返回不同的数据，并且可以展示作为返回一个回应的内容的一部分的其他操作（比如发送通知）。动态网站对于静态资源的请求的处理方式和静态网站是一样的（静态资源是指那些不会改变的文件——最典型的就是：CSS，Javascript，图片，预先生成的PDF文件等）。对于动态资源的请求则会指向（2）服务器端代码（在图中显示为Web Application(网络应用)）。在处理“动态请求”时，服务器会首先解释请求，从数据库中读取被请求的信息，然后将这些被检索的信息组合到HTML模板中（4），最后返回一个包含所生成的 HTML 页面的回应（5、6）</li>
</ul>
<p><img src="http://ww1.sinaimg.cn/mw690/7b6c9535gy1fnrq5tnp9qj20wl0dxgmh.jpg" alt=""></p>
<p>举个例子，要生成你在浏览器中看到的最终网页，应用服务器或许会用一个数据库中的内容填充一个 HTML 模板。网站像 MDN 或者维基百科 [Wikipedia] 有成千上万的网页，但是它们不是真正的 HTML 文档，它们只是少数的 HTML 模板以及一个巨大的数据库。这样的设置让它更快更简单地维护以及交付内容。</p>
<h3 id="RPM包管理器（The-RPM-Package-Manager"><a href="#RPM包管理器（The-RPM-Package-Manager" class="headerlink" title="RPM包管理器（The RPM Package Manager)"></a>RPM包管理器（The RPM Package Manager)</h3><p><strong>RPM 包管理员</strong>（简称 <strong>RPM</strong>，全称为 <strong>The RPM Package Manager</strong>）是在 Linux 下广泛使用的<a href="https://zh.wikipedia.org/wiki/%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8" target="_blank" rel="noopener">软件包管理器</a>。RPM通常随附于<a href="https://zh.wikipedia.org/wiki/Linux%E5%8F%91%E8%A1%8C%E7%89%88" target="_blank" rel="noopener">Linux发行版</a>，但也有单独将RPM作为<a href="https://zh.wikipedia.org/wiki/%E5%BA%94%E7%94%A8%E8%BD%AF%E4%BB%B6" target="_blank" rel="noopener">应用软件</a>发行的发行版（例如<a href="https://zh.wikipedia.org/wiki/Gentoo" target="_blank" rel="noopener">Gentoo</a>）。RPM仅适用于安装用RPM来打包的软件，目前是<a href="https://zh.wikipedia.org/wiki/GNU/Linux" target="_blank" rel="noopener">GNU/Linux</a>下软件包资源最丰富的软件包类型之一。</p>
<blockquote>
<p><strong>软件包管理系统</strong>是在电脑中自动安装、配制、卸载和升级<a href="https://zh.wikipedia.org/wiki/%E8%BD%AF%E4%BB%B6%E5%8C%85" target="_blank" rel="noopener">软件包</a>的工具组合，在各种<a href="https://zh.wikipedia.org/wiki/%E7%B3%BB%E7%BB%9F%E8%BD%AF%E4%BB%B6" target="_blank" rel="noopener">系统软件</a>和<a href="https://zh.wikipedia.org/wiki/%E5%BA%94%E7%94%A8%E8%BD%AF%E4%BB%B6" target="_blank" rel="noopener">应用软件</a>的安装管理中均有广泛应用。使用软件包管理系统将大大简化在<a href="https://zh.wikipedia.org/wiki/Linux%E5%8F%91%E8%A1%8C%E7%89%88" target="_blank" rel="noopener">Linux发行版</a>中安装软件的过程。</p>
<p>在Linux发行版中，几乎每一个发行版都有自己的软件包管理系统。常见的有两类：</p>
<ul>
<li>RPM 软件包管理器以及它的前端<a href="https://zh.wikipedia.org/wiki/DNF_(%E8%BD%AF%E4%BB%B6" target="_blank" rel="noopener">dnf</a>)（使用于<a href="https://zh.wikipedia.org/wiki/Fedora" target="_blank" rel="noopener">Fedora</a>）、前端<a href="https://zh.wikipedia.org/wiki/Yum" target="_blank" rel="noopener">yum</a>（使用于<a href="https://zh.wikipedia.org/wiki/Red_Hat_Enterprise_Linux" target="_blank" rel="noopener">Red Hat Enterprise Linux</a>）、前端<a href="https://zh.wikipedia.org/wiki/ZYpp" target="_blank" rel="noopener">ZYpp</a>（使用于<a href="https://zh.wikipedia.org/wiki/OpenSUSE" target="_blank" rel="noopener">openSUSE</a>）、前端<a href="https://zh.wikipedia.org/wiki/Urpmi" target="_blank" rel="noopener">urpmi</a>（使用于<a href="https://zh.wikipedia.org/wiki/Mandriva_Linux" target="_blank" rel="noopener">Mandriva Linux</a>、<a href="https://zh.wikipedia.org/wiki/Mageia" target="_blank" rel="noopener">Mageia</a>）等</li>
<li>dpkg 软件包管理器：管理 <a href="https://zh.wikipedia.org/wiki/Deb" target="_blank" rel="noopener">deb</a> 软件包的 <a href="https://zh.wikipedia.org/wiki/Dpkg" target="_blank" rel="noopener">dpkg</a> 以及它的 <a href="https://zh.wikipedia.org/wiki/%E5%89%8D%E7%AB%AF" target="_blank" rel="noopener">前端</a><a href="https://zh.wikipedia.org/wiki/Apt" target="_blank" rel="noopener">apt</a>（使用于<a href="https://zh.wikipedia.org/wiki/Debian" target="_blank" rel="noopener">Debian</a>、<a href="https://zh.wikipedia.org/wiki/Ubuntu" target="_blank" rel="noopener">Ubuntu</a>）</li>
</ul>
<p>其他软件包管理系统有 <a href="https://zh.wikipedia.org/wiki/ArchLinux" target="_blank" rel="noopener">ArchLinux</a> 中使用的 <a href="https://zh.wikipedia.org/wiki/Pacman" target="_blank" rel="noopener">Pacman</a>，<a href="https://zh.wikipedia.org/wiki/Gentoo" target="_blank" rel="noopener">Gentoo</a> 使用的基于源代码的<a href="https://zh.wikipedia.org/wiki/Portage" target="_blank" rel="noopener">Portage</a>和Mac系统下的 <a href="https://zh.wikipedia.org/wiki/Homebrew" target="_blank" rel="noopener">Homebrew</a> 等。</p>
</blockquote>
<h2 id="2018-1-25"><a href="#2018-1-25" class="headerlink" title="2018.1.25"></a>2018.1.25</h2><h3 id="web-服务器框架的功能"><a href="#web-服务器框架的功能" class="headerlink" title="web 服务器框架的功能"></a>web 服务器框架的功能</h3><ul>
<li>获取 HTTP 请求和响应</li>
<li>处理请求路由</li>
<li>更方便地从请求中获得数据</li>
<li>抽象化和简化数据库接口</li>
<li>渲染数据</li>
</ul>
<h2 id="2018-1-28"><a href="#2018-1-28" class="headerlink" title="2018.1.28"></a>2018.1.28</h2><h3 id="OpenCV-与-OpenGL的关系"><a href="#OpenCV-与-OpenGL的关系" class="headerlink" title="OpenCV 与 OpenGL的关系"></a>OpenCV 与 OpenGL的关系</h3><blockquote>
<ul>
<li>OpenCV 是 Open Source Computer Vision Library</li>
<li>OpenGL是 Open Graphics Library</li>
</ul>
</blockquote>
<p>OpenCV 主要是提供图像处理和视频处理的基础算法库，还涉及一些机器学习的算法。比如你想实现视频的降噪、运动物体的跟踪、目标（比如人脸）的识别这些都是 CV 的领域。<br>OpenGL则专注在Graphics，3D绘图。<br>其实两者的区别就是 Computer Vision 和 Computer Graphics 这两个学科之间的区别，前者专注于<strong>从采集到的视觉图像中获取信息，是用机器来理解图像</strong>；后者是用机器绘<strong>制合适的视觉图像给人看</strong>。</p>
<h2 id="2018-3-12"><a href="#2018-3-12" class="headerlink" title="2018.3.12"></a>2018.3.12</h2><h3 id="关于webpack配置的几个重要内容"><a href="#关于webpack配置的几个重要内容" class="headerlink" title="关于webpack配置的几个重要内容"></a>关于webpack配置的几个重要内容</h3><p>在 webpack.config.js 文件中最重要的有几个核心字段：Entry、Output、Loaders、Plugins、Chunk</p>
<ul>
<li>Entry：指定webpack开始构建的入口模块，从该模块开始构建并计算出直接或间接依赖的模块或者库</li>
<li>Output：告诉 webpack 如何命名输出的文件以及输出的目录</li>
<li>Loaders：由于webpack只能处理 javascript ，所以我们需要对一些非 js 文件处理成 webpack能够处理的模块，比如 sass 文件</li>
<li>Plugins：<code>Loaders</code>将各类型的文件处理成 webpack 能够处理的模块，<code>plugins</code>有着很强的能力。插件的范围包括，从打包优化和压缩，一直到重新定义环境中的变量。但也是最复杂的一个。比如对 js 文件进行压缩优化的<code>UglifyJsPlugin</code>插件</li>
<li>Chunk：coding split 的产物，我们可以对一些代码打包成一个单独的 chunk，比如某些公共模块，去重，更好的利用缓存。或者按需加载某些功能模块，优化加载时间。在 webpack3 及以前我们都利用<code>CommonsChunkPlugin</code>将一些公共代码分割成一个 chunk，实现单独加载。在webpack4 中<code>CommonsChunkPlugin</code>被废弃，使用<code>SplitChunksPlugin</code></li>
</ul>
<h3 id="webpack-当中图片资源的处理"><a href="#webpack-当中图片资源的处理" class="headerlink" title="webpack 当中图片资源的处理"></a>webpack 当中图片资源的处理</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path=<span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports=&#123;</span><br><span class="line">    entry: path.join(__dirname,<span class="string">'src/index.js'</span>),</span><br><span class="line">    output: &#123;</span><br><span class="line">        filename: <span class="string">"bundle.js"</span>,</span><br><span class="line">        path: path.join(__dirname,<span class="string">'dist'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            ...</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(gif|jpg|jpeg|png|svg)$/</span>,</span><br><span class="line">                use: [</span><br><span class="line">                    &#123;                                   </span><br><span class="line">                        loader: <span class="string">"url-loader"</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            limit: <span class="number">1024</span>,</span><br><span class="line">                            name: <span class="string">'[name].[ext]'</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>如上所示，为了将前端的各种资源都能放到集合到一个 JS 文件中，webpack 使用<code>url-loader</code>将小于 1024 字节的图片 Base64 编码，方便 HTTP 传输。这样存在一个缺点，如果是以正常标签<code>&lt;img&gt;</code>引入图片资源的话，那么图片是可以被浏览器缓存的，然而该方式则不可。</p>
<h2 id="2018-3-14"><a href="#2018-3-14" class="headerlink" title="2018.3.14"></a>2018.3.14</h2><h3 id="正向代理"><a href="#正向代理" class="headerlink" title="正向代理"></a>正向代理</h3><p>A 同学在大众创业、万众创新的大时代背景下开启他的创业之路，目前他遇到的最大的一个问题就是启动资金，于是他决定去找马云爸爸借钱，可想而知，最后碰一鼻子灰回来了。</p>
<p>情急之下，他想到一个办法，找关系开后门，经过一番消息打探，原来 A 同学的大学老师王老师是马云的同学，于是 A 同学找到王老师，托王老师帮忙去马云那借 500 万过来，当然最后事成了。</p>
<p>不过马云并不知道这钱是 A 同学借的，马云是借给王老师的，最后由王老师转交给 A 同学。这里的王老师在这个过程中扮演了一个非常关键的角色，就是代理，也可以说是正向代理，王老师代替 A 同学办这件事，这个过程中，真正借钱的人是谁，马云是不知道的，这点非常关键。</p>
<p>我们常说的代理也就是只正向代理，正向代理的过程，它隐藏了真实的请求客户端，服务端不知道真实的客户端是谁，客户端请求的服务都被代理服务器代替来请求，科学上网工具 Shadowsocks 扮演的就是典型的正向代理角色。</p>
<p>在天朝访问 www.google.com 时会被无情的墙掉，要想翻越这堵墙，你可以在国外用 Shadowsocks 来搭建一台代理服务器，代理帮我们请求 www.google.com，代理再把请求响应结果再返回给我。</p>
<h3 id="反向代理"><a href="#反向代理" class="headerlink" title="反向代理"></a>反向代理</h3><p>大家都有过这样的经历，拨打10086 客服电话，一个地区的 10086 客服有几个或者几十个，你永远都不需要关心在电话那头的是哪一个，叫什么，男的，还是女的，漂亮的还是帅气的，你都不关心，你关心的是你的问题能不能得到专业的解答，你只需要拨通了10086 的总机号码，电话那头总会有人会回答你，只是有时慢有时快而已。那么这里的 10086 总机号码就是我们说的<strong>反向代理</strong>。客户不知道真正提供服务的人是谁。</p>
<p>反向代理隐藏了真实的服务端，当我们访问 www.baidu.com 的时候，就像拨打 10086 一样，背后可能有成千上万台服务器为我们服务，但具体是哪一台，你不知道，也不需要知道，你只需要知道反向代理服务器是谁就好了，www.baidu.com 就是我们的反向代理服务器，反向代理服务器会帮我们把请求转发到提供真实计算的服务器那里去。Nginx 就是性能非常好的反向代理服务器，它可以用来做负载均衡。</p>
]]></content>
      
        <categories>
            
            <category> 学习日记 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 理解计算机 </tag>
            
            <tag> 计算机网络 </tag>
            
            <tag> HTML </tag>
            
            <tag> Three.js </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[MVC,MVP和MVVM的图示]]></title>
      <url>/2017/10/14/MVC-MVP%E5%92%8CMVVM%E7%9A%84%E5%9B%BE%E7%A4%BA/</url>
      <content type="html"><![CDATA[<p>最近学习 Vue，里面提到了 MVVM 架构，在阮老师网站上找到一篇不错的关于软件架构的说明</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fkhsguxiikj211y0lcq4w.jpg" width="600" height="200" align="center/"></p>
<a id="more"></a>
<h2 id="软件架构"><a href="#软件架构" class="headerlink" title="软件架构"></a>软件架构</h2><p>复杂的软件必须有清晰合理的架构，否则无法开发和维护。</p>
<p><a href="http://zh.wikipedia.org/wiki/MVC" target="_blank" rel="noopener">MVC</a>（Model-View-Controller）是最常见的软件架构之一，业界有着广泛应用。它本身<a href="http://www.ruanyifeng.com/blog/2007/11/mvc.html" target="_blank" rel="noopener">很容易理解</a>，但是要讲清楚，它与衍生的 MVP 和 MVVM 架构的区别就不容易了。</p>
<p>昨天晚上，我读了<a href="http://blog.nodejitsu.com/scaling-isomorphic-javascript-code/" target="_blank" rel="noopener">《Scaling Isomorphic Javascript Code》</a>，突然意识到，它们的区别非常简单。我用几段话，就可以说清。</p>
<h2 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h2><p>MVC模式的意思是，软件可以分成三个部分。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fr1olt1wr0j20e809ra9z.jpg" alt=""></p>
<ul>
<li>视图（View）：用户界面。</li>
<li>控制器（Controller）：业务逻辑</li>
<li>模型（Model）：数据保存</li>
</ul>
<p>各部分之间的通信方式如下。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fr1ombedp7j20gp0a5dfu.jpg" alt=""></p>
<ol>
<li>View 传送指令到 Controller</li>
<li>Controller 完成业务逻辑后，要求 Model 改变状态</li>
<li>Model 将新的数据发送到 View，用户得到反馈</li>
</ol>
<p>所有通信都是单向的。</p>
<h2 id="互动模式"><a href="#互动模式" class="headerlink" title="互动模式"></a>互动模式</h2><p>接受用户指令时，MVC 可以分成两种方式。一种是通过 View 接受指令，传递给 Controller。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fr1omru8smj20g70e6jrt.jpg" alt=""></p>
<p>另一种是直接通过controller接受指令。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fr1on1t782j20fm0di3yv.jpg" alt=""></p>
<h2 id="实例：Backbone-js"><a href="#实例：Backbone-js" class="headerlink" title="实例：Backbone.js"></a>实例：Backbone.js</h2><p>实际项目往往采用更灵活的方式，以 <a href="http://documentcloud.github.com/backbone" target="_blank" rel="noopener">Backbone.js</a> 为例。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fr1ong6ibgj20hn0g074t.jpg" alt=""></p>
<ol>
<li>用户可以向 View 发送指令（DOM 事件），再由 View 直接要求 Model 改变状态。</li>
<li>用户也可以直接向 Controller 发送指令（改变 URL 触发 hashChange 事件），再由 Controller 发送给 View。</li>
<li>Controller 非常薄，只起到路由的作用，而 View 非常厚，业务逻辑都部署在 View。所以，Backbone 索性取消了 Controller，只保留一个 Router（路由器） 。</li>
</ol>
<h2 id="MVP"><a href="#MVP" class="headerlink" title="MVP"></a>MVP</h2><p>MVP 模式将 Controller 改名为 Presenter，同时改变了通信方向。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fr1onwpkszj20ex08zjrd.jpg" alt=""></p>
<ol>
<li>各部分之间的通信，都是双向的。</li>
<li>View 与 Model 不发生联系，都通过 Presenter 传递。</li>
<li>View 非常薄，不部署任何业务逻辑，称为”被动视图”（Passive View），即没有任何主动性，而 Presenter非常厚，所有逻辑都部署在那里。</li>
</ol>
<h2 id="MVVM"><a href="#MVVM" class="headerlink" title="MVVM"></a>MVVM</h2><p>MVVM 模式将 Presenter 改名为 ViewModel，基本上与 MVP 模式完全一致。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fr1ooqv315j20fg0brwei.jpg" alt=""></p>
<p>唯一的区别是，它采用双向绑定（data-binding）：View的变动，自动反映在 ViewModel，反之亦然。<a href="https://angularjs.org/" target="_blank" rel="noopener">Angular</a> 和 <a href="http://emberjs.com/" target="_blank" rel="noopener">Ember</a> 都采用这种模式。</p>
<blockquote>
<p>作者：阮一峰</p>
<p>原文地址：<a href="http://www.ruanyifeng.com/blog/2015/02/mvcmvp_mvvm.html" target="_blank" rel="noopener">MVC，MVP 和 MVVM 的图示</a></p>
</blockquote>
]]></content>
      
        <categories>
            
            <category> 学习总结 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 理解计算机 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[谈谈cookie]]></title>
      <url>/2017/10/11/%E8%B0%88%E8%B0%88cookie/</url>
      <content type="html"><![CDATA[<p>今天被4399面试官问到了 cookie 的相关知识，之前不是很了解，现在补补…</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fkemtdmmilj20xc0m8q5i.jpg" width="600" height="200" align="center/"></p>
<a id="more"></a>
<h2 id="什么是cookie"><a href="#什么是cookie" class="headerlink" title="什么是cookie"></a>什么是cookie</h2><p>cookie 译为“小甜饼，具体种类称为酥性甜饼干，这是一种中档配料的产品……”。咦，跑偏了，开个玩笑先，虽然面试过程不爽，但还是得笑对人生（生无可恋）。</p>
<p>我们知道HTTP是无状态的，也就说同个客户端即使多次向同个服务器发出请求，服务器也做出响应了，但他们始终都是形同陌路的“陌生人”。因此，当你在浏览网站的时候，WEB 服务器会先送一小小资料放在你的计算机上，cookie 会记录如身份识别号码、密码、用户在 Web 站点购物的方式或用户访问该站点的次数等关键信息，所以 cookie 使得基于无状态的 HTTP 协议记录稳定的状态信息成为了可能。打个比喻就像各大网站如 Google、百度、网易等给客户端颁发一个通行证，客户端需要访问网站时带上自己的通行证。这样服务器就能认出这个客户端是哪个老相好了。然而也因为 cookie 将包含但不限于上述的一些重要信息保存在用户浏览器上的小文本文件上，使 cookie 技术成为广大网民和开发人员争论的一个焦点。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fkeq9lkqsdj20fa061gm0.jpg" alt=""></p>
<h2 id="cookie原理"><a href="#cookie原理" class="headerlink" title="cookie原理"></a>cookie原理</h2><p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fkeni579juj20it09mwgn.jpg" alt=""></p>
<p>第一次访问网站的时候，浏览器发出请求，服务器响应请求后，会将 cookie 放入到响应请求中，在浏览器第二次发请求的时候，会把 cookie 带过去，服务端会辨别用户身份，当然服务器也可以修改 cookie 内容（后面会谈到这点）。cookie 的产生是通过扩展 HTTP 协议来实现的，服务器通过在 HTTP 响应头中加上一行特殊的指示以提示浏览器按照指示生成相应的 cookie。然而纯粹的客户端脚本如 JavaScript 也可以生成 cookie。而 cookie 的使用是由浏览器按照一定的原则在后台自动发送给服务器的。浏览器检查所有存储的 cookie ，如果某个 cookie 所声明的作用范围（这个作用范围由 cookie 的 path 和 domain 同时决定）大于等于将要请求的资源所在的位置，则把该 cookie 附在请求资源的 HTTP 请求头上发送给服务器。</p>
<h2 id="cookie的不可跨域名性"><a href="#cookie的不可跨域名性" class="headerlink" title="cookie的不可跨域名性"></a>cookie的不可跨域名性</h2><p>很多网站都会使用 cookie。例如，Google 会向客户端颁发 cookie，Baidu 也会向客户端颁发cookie。那浏览器访问 Google 会不会也携带上 Baidu 颁发的 cookie 呢？或者 Google 能不能修改Baidu 颁发的 cookie 呢？</p>
<p>答案是否定的。<strong>cookie具有不可跨域名性</strong>。根据 cookie 规范，浏览器访问 Google 只会携带 Google 的 cookie，而不会携带 Baidu 的 cookie。Google 也只能操作 Google 的 cookie，而不能操作 Baidu 的 cookie。</p>
<p>cookie 在客户端是由浏览器来管理的。浏览器能够保证 Google 只会操作 Google 的 cookie 而不会操作 Baidu的 cookie，从而保证用户的隐私安全。浏览器判断一个网站是否能操作另一个网站 cookie 的依据是域名。Google 与 Baidu 的域名不一样，因此 Google 不能操作 Baidu 的 cookie。</p>
<p>需要注意的是，虽然网站 images.google.com与网站 www.google.com 同属于Google，但是域名不一样，二者同样不能互相操作彼此的 cookie。</p>
<p>注意：用户登录网站 www.google.com 之后会发现访问 images.google.com 时登录信息仍然有效，而普通的 cookie 是做不到的。这是因为 Google在后端进行了相关处理。</p>
<h2 id="cookie属性"><a href="#cookie属性" class="headerlink" title="cookie属性"></a>cookie属性</h2><p>cookie 的属性比较多，我们可以看下下面这张图</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fkeod1xtmij20t90d8gnu.jpg" alt=""></p>
<h3 id="name"><a href="#name" class="headerlink" title="name"></a>name</h3><p>这个显而易见，就是代表 cookie 的名字的意思，一个域名下绑定的 cookie ，name 不能相同，相同的 name 的值会被覆盖掉</p>
<h3 id="value"><a href="#value" class="headerlink" title="value"></a>value</h3><p>这个就是每个 cookie 拥有的一个属性，它表示该属性的值</p>
<h3 id="domain"><a href="#domain" class="headerlink" title="domain"></a>domain</h3><p>这个是指的域名，这个代表的是，cookie 绑定的域名，如果没有设置，就会自动绑定到执行语句的当前域，还有值得注意的点，统一个域名下的二级域名也是不可以交换使用 cookie 的，比如，你设置  www.baidu.com 和 image.baidu.com ，依旧是不能公用的</p>
<h3 id="path"><a href="#path" class="headerlink" title="path"></a>path</h3><p>path这个属性默认是<code>/</code>，当你设置成比如<code>/blog</code>的时候，其实它会给 “domain+path” 范围内绑定 cookie</p>
<h3 id="Expires-Max-Age"><a href="#Expires-Max-Age" class="headerlink" title="Expires/Max-Age"></a>Expires/Max-Age</h3><p>该属性决定 cookie 的有效期，一般浏览器的 cookie 都是默认储存的，当关闭浏览器结束这个会话的时候，这个 cookie 也就会被删除，这就是上图中的—— session (会话储存)。</p>
<p>如果你想要 cookie 存在一段时间，那么你可以通过设置 Expires 属性为未来的一个时间节点，Expires 这个是代表当前时间的，这个属性已经逐渐被我们下面这个主人公所取代——Max-Age。</p>
<p>Max-Age，是以秒为单位的，Max-Age 为正数时，cookie 会在 Max-Age 秒之后被删除。在 Max-Age 之前 cookie 是保存到硬盘上，即使关闭浏览器后再次打开，这些 cookie 仍然有效直到超过设定的过期时间。存储在硬盘上的 cookie 可以在不同的浏览器进程间共享，比如两个 IE 窗口。当 Max-Age 为负数时，表示的是临时储存，不会生出 cookie 文件，只会存在浏览器内存中，且只会在打开的浏览器窗口或者子窗口有效，一旦浏览器关闭， cookie 就会消失，当 Max-Age 为 0 时，又会发生什么呢，删除 cookie ，因为cookie 机制本身没有设置删除 cookie ，失效的 cookie 会被浏览器自动从内存中删除，所以，它实现的就是让 cookie 失效。</p>
<h3 id="secure"><a href="#secure" class="headerlink" title="secure"></a>secure</h3><p>这个属性译为安全，http 不仅是无状态的，还是不安全的协议，容易被劫持。所以当这个属性设置为 true 时，此 cookie 只会在 https 和 ssl 等安全协议下传输。但需要强调一下这个属性并不能对客户端的cookie进行加密，不能保证绝对的安全性</p>
<h2 id="HttpOnly"><a href="#HttpOnly" class="headerlink" title="HttpOnly"></a>HttpOnly</h2><p>这个属性是面试的时候常考的，如果这个属性设置为 true，就不能通过 JavaScript 脚本来获取 cookie 的值，能有效的防止xss 攻击,看 MDN 的官方文档：</p>
<blockquote>
<p>为避免跨域脚本 (<a href="https://developer.mozilla.org/en-US/docs/Glossary/XSS" target="_blank" rel="noopener">XSS</a>) 攻击，通过JavaScript的 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/cookie" target="_blank" rel="noopener">Document.cookie</a> API无法访问有<code>HttpOnly</code> 标记的Cookie，Cookie只需要发送给服务端。如果包含服务端session信息的Cookie不想被客户端Javascript使用，那么就需要使用<code>HttpOnly</code> 标记</p>
</blockquote>
<h3 id="关于JavaScript操作cookie"><a href="#关于JavaScript操作cookie" class="headerlink" title="关于JavaScript操作cookie"></a>关于JavaScript操作cookie</h3><p>document.cookie 可以对 cookie 进行读写：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.cookie);	<span class="comment">//读取浏览器中的cookie</span></span><br><span class="line"><span class="built_in">document</span>.cookie=<span class="string">'myname=liuzhiyu;path=/;domain=.baidu.com'</span>;	<span class="comment">//	写入 cookie</span></span><br></pre></td></tr></table></figure>
<h3 id="服务端如何去设置cookie"><a href="#服务端如何去设置cookie" class="headerlink" title="服务端如何去设置cookie"></a>服务端如何去设置cookie</h3><p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fkeq0xcrtkj20sh0f2aid.jpg" alt=""></p>
<p>服务端就是通过 setCookie 来设置 cookie 的，注意点，要设置多个 cookie 时，得多写几个 setCookie ，我们还可以从上图看到，请求可以携带 cookie 给后端。</p>
<h2 id="cookie与session"><a href="#cookie与session" class="headerlink" title="cookie与session"></a>cookie与session</h2><p>本片开头已说过 HTTP 是一个不保存状态的协议。session 是服务器端使用的一种记录客户端状态的机制，不同的是 cookie 保存在客户端浏览器中，而 session 保存在服务器上。客户端浏览器访问服务器的时候，服务器把客户端信息以某种形式记录在服务器上。这就是 session。客户端浏览器再次访问时只需要从该 session 中查找该客户的状态就可以了。如果说 <strong>cookie 机制是通过检查客户身上的“通行证”来确定客户身份的话，那么 session 机制就是通过检查服务器上的“客户明细表”来确认客户身份。session 相当于程序在服务器上建立的一份客户档案，客户来访的时候只需要查询客户档案表就可以了。</strong></p>
<h3 id="session对浏览器的要求"><a href="#session对浏览器的要求" class="headerlink" title="session对浏览器的要求"></a>session对浏览器的要求</h3><p>虽然 session 保存在服务器中，对客户端是透明的，它的正常运行仍然需要客户端浏览器的支持。这是因为 session 需要使用 cookie 作为识别标志。HTTP 协议是无状态的，session 不能依据 HTTP 连接来判断是否为同一客户，因此服务器向客户端浏览器发送一个名为 JSESSIONID 的 cookie，它的值为该 session 的 id。session 依据该cookie 来识别是否为同一用户。该 cookie 为服务器自动生成的，它的 MaxAge 属性一般为–1，表示仅当前浏览器内有效，并且各浏览器窗口间不共享，关闭浏览器就会失效。</p>
<h3 id="session中不使用cookie"><a href="#session中不使用cookie" class="headerlink" title="session中不使用cookie"></a>session中不使用cookie</h3><p>URL 地址重写是对客户端不支持 cookie 的解决方案。URL 地址重写的原理是将该用户 session 的 id 信息重写到 URL 地址中。服务器能够解析重写后的 URL 获取 session 的 id。这样即使客户端不支持 cookie，也可以使用 session 来记录用户状态。</p>
<h3 id="cookie-session-区别"><a href="#cookie-session-区别" class="headerlink" title="cookie session 区别"></a>cookie session 区别</h3><ol>
<li>cookie 数据存放在客户的浏览器上，session数据放在服务器上</li>
<li>cookie 不是很安全，别人可以分析存放在本地的 COOKIE 并进行 COOKIE 欺骗考虑到安全应当使用 session</li>
<li>session 会在一定时间内保存在服务器上。当访问增多，会比较占用你服务器的性能考虑到减轻服务器性能方面，应当使用 COOKIE</li>
<li>单个 cookie 保存的数据不能超过 4K，很多浏览器都限制一个站点最多保存20个 cookie。</li>
</ol>
<p>鉴于上述区别我们建议</p>
<ol>
<li>将登陆信息等重要信息存放为 SESSION</li>
<li>其他信息如果需要保留，可以放在 COOKIE 中</li>
</ol>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="http://www.cnblogs.com/shiyangxt/archive/2008/10/07/1305506.html" target="_blank" rel="noopener">cookie 与 session 的区别详解</a></p>
<p><a href="https://juejin.im/post/59d1f59bf265da06700b0934" target="_blank" rel="noopener">把cookie聊清楚|稀土掘金</a></p>
<p><a href="http://blog.csdn.net/fangaoxin/article/details/6952954/" target="_blank" rel="noopener">Cookie/Session机制详解|CSDN</a></p>
<p>最后，如果本文有任何知识性错误，欢迎各位小哥哥小姐姐提出！</p>
<hr>
<blockquote>
<p>本文作者：刘志宇</p>
<p>版权声明：本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank" rel="noopener">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！</p>
</blockquote>
]]></content>
      
        <categories>
            
            <category> 学习总结 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Web前端 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[我是一个函数]]></title>
      <url>/2017/09/30/%E6%88%91%E6%98%AF%E4%B8%80%E4%B8%AA%E5%87%BD%E6%95%B0/</url>
      <content type="html"><![CDATA[<p>前几天在图书馆粗略的浏览了一本叫做《代码揭秘：从C/C++的角度探秘计算机系统》的书籍。里面有一章节从计算机的底层讲解了函数的本质。恰好码农翻身公众号的推送《我是一个函数》生动的讲解了函数的知识，故转载过来学习</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fk1l2sdfhij20xc0wzq3h.jpg" width="600" height="200" align="center/"></p>
<a id="more"></a>
<h2 id="我和邻居"><a href="#我和邻居" class="headerlink" title="我和邻居"></a>我和邻居</h2><p>我是一个函数， 生活在内存当中，我的家–用你们的”黑话”来说–就是进程的地址空间， 我的邻居也是一个函数，其中有一段很有趣的代码。 </p>
<p>我经常去拜访他，去的时候当然不能空着手，我会携带四个数字作为礼物送给他计算， 耐心等待他在 CPU 中忙活半天，最后，作为回赠的礼物，他告诉我一个地址，让我去那里取结果。 </p>
<p>拜访的次数多了，我慢慢地琢磨出了我这个邻居做的事情： 房贷计算。 </p>
<p>我给他发的四个参数分别是房贷总额，利率，贷款年限，还款方式（等额本息是 1， 等额本金是 2） 他告诉我的是一个地址，其实就是一个列表，存放着每个月应还的月供、本金和利息。</p>
<blockquote>
<p>用你们的“黑话”来说就是这样：  </p>
<p>List calculateHouseLoan(float total, float intrestRate,  int years ,int loanType)</p>
</blockquote>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fk1l5pzpu2j209x0gr0um.jpg" alt=""></p>
<p>所有的调用都发生在本机内的一个进程中， 大家把这种方式称为<strong>本地过程调用</strong>。</p>
<p>这种调用方式速度飞快，眨眼间就可完成。</p>
<p>有时候，房贷计算邻居会惊呼道： 我赛，你给我发了一个多大的数啊， 800万的贷款总额！</p>
<p>我就知道，帝都的房价又涨了！</p>
<p>日子过了一天又一天， 房价也涨了一天又一天。 </p>
<h2 id="邻居搬走了"><a href="#邻居搬走了" class="headerlink" title="邻居搬走了"></a>邻居搬走了</h2><p>一天早上， 我睡了一觉醒来感觉不太对劲，头晕晕的，一般情况下这就表示昨天夜里系统重启了。 </p>
<p>还没等我清醒过来， 我就接到上司（调用我的函数）的命令，又要计算房贷了，我忍着头晕赶紧去找邻居，可是这一次却换成了陌生人， 他笑眯眯的说：“是不是要找你的邻居房贷计算啊”</p>
<p>“是啊”</p>
<p>“他已经搬走了！”</p>
<p>“啊？ 他搬到哪儿去了？ 我怎么计算房贷？ ”　</p>
<p>“ 他搬到另外一台机器去住了，具体位置我也不清楚，不过从 IP 看应该是在同一个机房吧”</p>
<p>说实话这个消息让我吃惊不小，我听人说过，想和网络上的机器通信，那可比本机的同一进程内的通信麻烦太多了。</p>
<p>之前我们生活在同一个进程中，每个函数的住处（地址）对大家来说都是可见的，想要调用了，直接去函数的住处去执行代码即可。　</p>
<p>现在这个函数都搬走了，新的地址我也不知道，就是知道了，跨域网络的调用，据说得使用什么socket，建立连接，在连接上按双方商量好格式、次序来发送数据， 接收数据，听着就头大， 打死我也搞不定。 （码农翻身老刘注： socket的故事参见《<a href="http://mp.weixin.qq.com/s?__biz=MzAxOTc0NzExNg==&amp;mid=2665513387&amp;idx=1&amp;sn=99665948d0b968cf15c5e7a01ffe166c&amp;chksm=80d679e8b7a1f0febad077b57e8ad73bfb4b08de74814c45e1b1bd61ab4017b5041942403afb&amp;scene=21#wechat_redirect" target="_blank" rel="noopener">张大胖和socket</a>》）</p>
<p>陌生人看出了我的担心， 笑着说： “放心吧， 我是他的客户端代理，你尽管把那四个参数交给我，我来帮你搞定”</p>
<p>这家伙自称为客户端代理的家伙竟然知道那个四个参数，也许能行，对我来说反正调用方式没什么变化， 于是我将信将疑地像以前把4个参数传递过去， 他马上就忙活起来，建立连接，发送数据，接收数据，过了很久（我感觉比平时要慢了100倍）他才说房贷已经计算好了，数据在地址XXXX处， 你去拿吧。 </p>
<p>我去那个地方一查，和往常一样，每月的还款结果已经整整齐齐的摆在那里了。</p>
<p> “你这个房贷计算的客户端代理还真不含糊啊， 既然你是客户端代理， 难道还有服务器端代理人？  ”</p>
<p>“没错， 我还有个好基友，在服务器端忙活， 我和他约定好了消息的格式， 你交给我的数据其实我都通过socket发给他了，由他来调用真正的房贷计算， 然后再把结果发回来。”</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fk1l7816wsj20n20e6afe.jpg" alt=""></p>
<p>“难道这就是传说中的远程过程调用（RPC)）？ ” 我问道</p>
<p>”是的， 我们这两个代理人把脏活累活都帮着你们做了，把那些复杂的网络细节都给隐藏起来了，  在你们看来和本地调用一样。 对了，有人会把我称为 <strong>Stub</strong>，把我的好基友称为 <strong>Skeleton</strong>，我和他之间的交互是通过 socket 进行的， 有些 RPC 的代理人可能不用这么底层的东西，直接用 http，不过没关系，只要两端的代理人约定好就行了，关键是要给你们提供一个舒适的体验。”</p>
<p>“我想到一个问题， 如果我传递给你的不是简单的 float、int 型的参数， 而是内存中的对象， 怎么处理？”</p>
<p>“当然要做序列化了， 要不然怎么通过网络发送啊， 其实 float，int 也得做序列化， 把内存中的值和对象变成二进制流，这样才能发送出去。到了我的好基友那边，他还得做反序列化，把而二进制流再转化为对象， 然后才能调用真正的函数， 唉，这工作实在是麻烦啊。”</p>
<p>我对他表示了深切的同情和敬意， 为了我们能做透明的远程调用，这些代理们真不容易。</p>
<p>“我听说还能用 XML 和 JSON ？” 我问道</p>
<p>“你知道的不少嘛 ！ 有些人在使用 Http 作为通信协议的时候， 喜欢把对象变成文本，例如XML/JSON，可读性比较好，但是你要知道，虽然应用层的 HTTP 中看起来时文本， 但是到了底层通道例如 TCP 发送出去的时候，那还得变成二进制流， 到了目的地再把他们转化成文本。”（码农翻身老刘注： 参加《<a href="http://mp.weixin.qq.com/s?__biz=MzAxOTc0NzExNg==&amp;mid=2665513589&amp;idx=1&amp;sn=d402d623d9121453f1e570395c7f99d7&amp;chksm=80d67a36b7a1f32054d4c779dd26e8f97a075cf4d9ed1281f16d09f1df50a29319cd37520377&amp;scene=21#wechat_redirect" target="_blank" rel="noopener">序列化：一个老家伙的咸鱼翻身</a>》）</p>
<p>聊了半天，我们越来越熟， 我无意间谈起了他的身世， 他说 ： “我们这些代理人啊，出生的方式主要有两种， 一种就是程序员们一行行代码的把我们给敲出来、费心而费力， 另外一种就是自动生成。”</p>
<p>“自动生成，具体怎么做？”</p>
<p>“拿Java来举个例子， 你可以先定义一个接口(interface), 让这个接口扩展自java.rmi.Remote， 然后写个实现类， 最后用一个工具rmic就可以自动生成客户端和服务器端的代理人了 ， 是不是很简单？ ”</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">HouseLoanCalculator</span> <span class="keyword">extends</span> <span class="title">Remote</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> List <span class="title">calculate</span><span class="params">(<span class="keyword">float</span> total,<span class="keyword">float</span> interestRate,<span class="keyword">int</span> years,<span class="keyword">int</span> loanType)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> RemoteException</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HouseLoanCalculatorImpl</span> </span></span><br><span class="line"><span class="class">  <span class="keyword">extends</span> <span class="title">UnicastRemoteObject</span> </span></span><br><span class="line"><span class="class">  <span class="keyword">implements</span> <span class="title">HouseLoanCalculator</span></span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> List <span class="title">calculate</span><span class="params">(<span class="keyword">float</span> total,<span class="keyword">float</span> interestRate,</span></span></span><br><span class="line"><span class="function"><span class="params">  	<span class="keyword">int</span> years,<span class="keyword">int</span> LoanType)</span> <span class="keyword">throws</span> RemoteException</span>&#123;</span><br><span class="line">    <span class="comment">//实现房贷计算</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>（码农翻身老刘注： 从JDK5.0开始， 连这个rmic这一步都可以省略， 完全由JVM自动生成，运行时可以把客户端代理人下载到客户端）</p>
<p>网络的世界远比单机精彩， 不知不觉我已经和这个代理人聊了将近800毫秒， 我的上司已经等不及了，他抱怨地说： “这次怎么这么慢？ 难道人类在调试，在你这里加了断点？”</p>
<p>我说 ：“没有调试， 原来是本地过程调用，现在变成远程过程调用了！”</p>
<blockquote>
<p>作者：码农翻身刘欣</p>
<p>出处：<a href="http://mp.weixin.qq.com/s/aexpXH1B6bqa47tNHCiEdQ" target="_blank" rel="noopener">我是一个函数|码农翻身</a></p>
</blockquote>
]]></content>
      
        <categories>
            
            <category> 学习总结 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 理解计算机 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[排序算法大杂烩]]></title>
      <url>/2017/09/21/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E5%A4%A7%E6%9D%82%E7%83%A9/</url>
      <content type="html"><![CDATA[<p>学习数据结构之后那么算法也是必须需要了解的，甚至对于某些开发人员来说算法是他们开发工作中最为重要的一部分。数据结构和算法又是密不可分的，特定的算法需要特定的数据结构才能发挥出应有的效率。其中，熟悉各种基本的排序算法是程序猿的基本技能之一</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fjlex5vgujj20jg0gtq54.jpg" width="600" height="200" align="center/"></p>
<a id="more"></a>
<h2 id="引子"><a href="#引子" class="headerlink" title="引子"></a>引子</h2><p>“算法+数据结构=程序”，这是一名瑞士的计算机科学家 Nicklaus Wirth 提出的著名公式，而他本人也凭借这一句话获得了图灵奖。百科百科上有这么一句评价“<strong>这个公式对计算机科学的影响程度足以类似物理学中爱因斯坦的 $E=MC^2$ </strong>” 。而排序算法又是各类算法中最为基础但也较为有用的算法之一，因此对它的了解也显得十分必要和重要。为了叙述方便，本文随后讨论的排序问题都约定为从小到大的排序。</p>
<h2 id="选择排序"><a href="#选择排序" class="headerlink" title="选择排序"></a>选择排序</h2><h3 id="简单选择排序"><a href="#简单选择排序" class="headerlink" title="简单选择排序"></a>简单选择排序</h3><p>简单选择排序（Simple Selection Sort）是一种直观的排序算法，其思想是在未排序的序列中选出最小的元素和序列的首位元素交换，接下来在剩下的未排序序列中再选出最小元素与序列的第二位元素交换，以此类推，最后形成从小到大的已排序序列。</p>
<p>下列给出 C 语言实现：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Swap</span><span class="params">(ElementType *a,ElementType *b)</span></span>&#123;</span><br><span class="line">  ElementType t=*a; *a = *b; *b=t;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SimpleSelectionSort</span><span class="params">(ElementType A[], <span class="keyword">int</span> N)</span></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> i,j,min;</span><br><span class="line">  <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;N<span class="number">-1</span>;i++)&#123;</span><br><span class="line">    min=i;</span><br><span class="line">    <span class="keyword">for</span>(j=i+<span class="number">1</span>;j&lt;N;j++)&#123;</span><br><span class="line">      <span class="keyword">if</span>(A[j]&lt;A[min])&#123;</span><br><span class="line">        min=j;					<span class="comment">//min记录最小元素位置</span></span><br><span class="line">      &#125;</span><br><span class="line">      Swap(&amp;A[i],&amp;A[min]);		<span class="comment">//将第 i 个元素与最小元素交换</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以看出，因为循环中嵌套循环，故其时间复杂度为 $O(N^2)$ 。最好情况下移动元素的次数为 0 次，这时序列已有序。最坏的情况下为 $3(N-1)$ 次（除了最后一个元素外，每个元素都要经过 3 步交换位置）。</p>
<h3 id="堆排序"><a href="#堆排序" class="headerlink" title="堆排序"></a>堆排序</h3><p>堆排序（Heap Sort）是指利用堆这种数据结构所设计的一种排序算法。我们知道堆是一种特殊的二叉树，每个子结点的值总是小于（或者大于）它的父结点，相应地分为最大堆和最小堆。由于堆是一个完全二叉树，一般情况下堆排序都是用数组的方式来实现。</p>
<p>堆排序的核心思想是：利用最大堆（或者最小堆）输出堆顶元素，即最大值（或最小值），将剩余元素重新生成最大堆（或者最小堆），继续输出堆顶元素，重复此过程，直到全部元素都已输出，得到的输出元素序列即为有序序列。</p>
<p>实现堆排序方法一种简单的做法是额外开辟一个辅助的数组空间，将堆顶元素逐一放入辅助数组里，最后再把辅助数组的内容复制回原始的数组。这种方法的额外空间复杂度是 $O(N)$ 。下面我们讨论一种更聪明的方法，只用 $O(1)$ 的额外空间即可。</p>
<p>如下图所示，首先将一个无序的序列生成一个最大堆，如图（a）所示。接下来我们不需要将堆顶元素输出，只要将它与堆的最后一个元素对换位置即可，如图（b）所示。这时我们确知最后一个元素 99 一定是递增序列的最后一个元素，而且已经在正确的位置上。 现在问题变成了如何将剩余的元素重新生成一个最大堆——也很简单，只要依次自上而下进行过滤，使其符合最大堆的性质。图（c）是调整后形成的新的最大堆。要注意的是，99 已经被排除在最大堆之外，即在调整的时候，堆中元素的个数应该减 1 。结束第 1 轮调整后，再次将当前堆中的最后一个元素 22 与堆顶元素换位，如图（d）所示，再继续调整成新的最大堆……如此循环，直到堆中只剩 1 个元素，即可停止，得到一个从小到大排列的有序序列。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fjr5pov4yaj20i10c83z0.jpg" alt=""></p>
<h2 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h2><h3 id="简单插入排序"><a href="#简单插入排序" class="headerlink" title="简单插入排序"></a>简单插入排序</h3><p>简单插入排序的核心思想就是：将待排序的一组序列分为已排好序的和未排好序的两个部分；初始状态时，已排序序列仅包含第一个元素，为排序序列中的元素为除去第一个以外 $N-1$ 个元素；此后将为排序序列中的元素逐一插入到已排序的序列中。如此往复，经过 $N-1$ 次插入后，未排序序列中元素个数为 0，则排序完成。</p>
<p>具体到第 $k-1$ 次插入，对应待插入元素应为第 $k$ 个元素，也就是未排序序列中的第一个元素，插入的基本过程是：将它和第 $k-1$ 个元素（也就是已排序序列的最后一个元素）进行比较，若 大于第 $k-1$ 个记录，则该次循环结束；否则，将两个元素交换，再比较该数和第 $k-2$ 个元素之间 的大小，依此往复，直到该数比它当前位置的前一个元素大，或该数已交换到了第 1 个位置，则第 $k-1$次循环结束。</p>
<p>下面我们来看一个例子。下表显示了对 {44，12，59，36，62，43，94，7，35，52，85} 进行简单插入排序的前 3 次循环的情况。在第 2 次循环结束后，已排序序列中有 3 个记录。第 3 次循环第 1 步，将未排序序列中的第一个记录 36 和已排序组中的最后一个记录59进行比较，因满足 $36&lt;59$ ，因此交换这两个记录；第 2 步，36仍然小于一个记录 44 ，则继续交换；直到大于前一个记录 12 ，则停止交换，第 3 次循环结束。已排序序列中新增记录 36，未排序序列中删除该记录，记录数量减 1 。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fjl8rvj1y3j20ma06mt9c.jpg" alt=""></p>
<p>下面给出代码实现：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InsertionSort</span><span class="params">(ElementType A[],<span class="keyword">int</span> N)</span></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> P,i;</span><br><span class="line">  ElementType temp;</span><br><span class="line">  <span class="keyword">for</span>(P=<span class="number">1</span>;P&lt;N;P++)&#123;</span><br><span class="line">    temp=A[P];						<span class="comment">//取出未排序序列中的第一个元素</span></span><br><span class="line">    <span class="keyword">for</span>(i=P;i&gt;<span class="number">0</span>&amp;&amp;A[i<span class="number">-1</span>]&gt;temp;i--)&#123;		</span><br><span class="line">      A[i]=A[i<span class="number">-1</span>];					<span class="comment">//依次与已排序序列中元素比较并右移</span></span><br><span class="line">    &#125;</span><br><span class="line">    A[i]=temp;						<span class="comment">//放进合适的位置</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>由该算法代码可以看出，空间复杂度上，简单插入排序仅需要常数个额外空间；时间复杂度上，函数中有 2 个嵌套的循环，每个循环进行 $O(N)$ 次比较和交换，因此整个简单插入排序的平均时间复杂度为 $O(N^2)$ 。在最坏的情况下，对应每一个 P ,要进行P- 1 次比较和交换，总共要花费 $O(N^2)$ 次操作；在最好的情况下，也就是对已经排好序的序列进行排序，第二个循环在第一个$(A[i-1]&gt;temp)$ 比较时就跳出，因此总共花费 $O(N)$ 次操作。此外，简单插入排序是稳定的排序，我们发现，数值相同的两个记录不会发生相对位置上的改变。</p>
<h3 id="希尔排序"><a href="#希尔排序" class="headerlink" title="希尔排序"></a>希尔排序</h3><p>简单插入排序效率不高的一个重要原因是每次只交换相邻的两个元素，这样只能消去一对错位的元素。希尔排序对插人排序进行改进，试图通过每次交换相隔一定距离的元素，达到排序效率上的提升。</p>
<p>希尔排序的基本原理是，将待排序的一组元素按一定间隔分为若干个序列，分别进行插入排序。开始时设置的“间隔”较大，在每轮排序中将间隔逐步减小，直到“间隔”为 1 ，也就是最后一步是进行简单插入排序。</p>
<p>希尔排序将“间隔”定义为一组增量序列，用来分割待排序列，即将位置之差等于当前增量的元素归属于同一个子序列，并分别进行插入排序；排好后再选取下一个增量，划分子序列再次排序，直到最后一个增量（一般为1)。</p>
<p>【例子】对于待排序列 {44，12，59，36，62，43，94，7，35，52，85}，我们可设定增量序列为 {5，3，1}。</p>
<p>【解析】第一个增量为 5，因此 {44，43，85}、{12，94}、{59，7}、{36，35}、{62，52} 分别隶属于同一个子序列，子序列内部进行插入排序；然后选取第二个增量3，因此 {43，35，94，62}、{12，52，59，85}、{7，44，36} 分别隶属于同一个子序列；最后一个增量为 1，这一次排序相当于简单插入排序，但是经过前两次排序，序列已经基本有序，因此此次排序时间效率就提高了很多。希尔排序过程如下：</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fjqzehyokwj20m9043q3b.jpg" alt=""></p>
<p>希尔排序算法的整体时间复杂度和增量序列的选取有关，目前并没有统一的最优增量序列。但使用增量序列 {[$N/2$]，[$N/2^2$]，…，1} 进行希尔排序时，最差情况下时间复杂度为 $O(N^2)$ ；而当使用增量序列 {$2^k-1$，…，7，3，1} 时，最差情况下时间复杂度为 $O(N^{3/2})$ ，其平均时间复杂度尚无定论，猜想结果为 $O(N^{5/4})$ 。除此之外，还有不少其他的增量序列选取方法，在各自特定的排序对象中有较好的时间复杂度的表现。</p>
<h2 id="交换排序"><a href="#交换排序" class="headerlink" title="交换排序"></a>交换排序</h2><h3 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h3><p>冒泡排序估计是很多非计算机相关专业学生都知道的排序算法，这也是交换排序中比较简单的方式。对元素个数为$N$的待排序序列进行排序时， 共进行 $N-1$ 次循环。在第 $k$ 次循环中，对从第 1 到第 $N-k$ 个元素从前往后进行比较，每次比较相邻的两个元素，若前一个元素大于后一个元素，则两者互换位置，否则保持位置不变。这样一次循环下来 ， 就把第 $k$ 大的元素移动到第 $N-k$ 个位置上，称为第 $k$ 趟的冒泡。整个过程一共进行 $N-1$ 趟冒泡 ，直到第 1 个和第 2 个元素比较完成 ，最终剩余最小的元素 ，留在第 1 个位置上，排序结束。</p>
<p>我们来看下例中对给定初始序列的冒泡排序过程，会有十分直观的理解：第 1 趟冒泡后,最大的记录 94 被移动到了第 $N$ 个位置上，它将不参与接下来的冒泡；第 2 趟冒泡后，剩余 $N-1$ 个记录中最大的记录 85 被移动到了第 $N-1$ 个位置上；经过 $N-1$ 趟冒泡后，剩余的最小记录 7 留在第 1 个位置上，排序结束，如下表所示。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fjr5za5gzaj20ma07kq3o.jpg" alt=""></p>
<h3 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h3><p>快速排序也是交换排序的一种，但和冒泡排序不同的是，冒泡排序只比较相邻两个记录 的顺序，而快速排序的原理是：将未排序元素根据一个作为基准的“主元”（Pivot）分为两个子序列，其中一个子序列的记录均大于主元，而另一个子序列均小于主元，然后递归地对这两个 子序列用类似的方法进行排序。本质上，快速排序使用分治法，将问题的规模减小，然后再分别进行处理。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fjr642rt6zj20gu050mx7.jpg" alt=""></p>
<p>首先，子序列的划分方法我们可以参考利用函数递归求取集合的中位数问题的解答。求得中位数后，将该中位数设置为待排序序列的主元，将比主元大的元素从右向左放置，而比主元小的元素从左向右放置。</p>
<p>下表给出了进行一趟主元调整的过程，具体步骤为：</p>
<ol>
<li>选择一个主元，并与最后一个元素交换。</li>
<li>设置两个指针 Low 和 High ，初值分别指向第一和倒数第二个元素。</li>
<li>Low 从左向右扫描，其位置左侧为已遍历或交换过的比主元小的元素；High从右往左扫描 ， 其位置右侧为已遍历或交换过的比主元大的元素。首先从 Low 指向的位置向右扫描，若遇到比主元大的元素，则停止；然后从 High 指向的位置向左搜索，若遇到比主元小的元素，则停止。</li>
<li>若 Low 和 High 没有错位（即Low&lt;High)，则 High 和 Low 指向的元素互换位置。</li>
<li>重复3、4直至 High 和 Low 错位，将基准与 A[Low] 对换位置。这就完成了一次划分，以<br>主元为边界分别划分成大于和小于主元的两个子序列。</li>
<li>递归地对两个子序列用同样方法进行快排直至当前子序列只有一个元素时结束递归，这样就达到了分而治之的算法目的。</li>
</ol>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fjr6sc4ejaj20gx04zweq.jpg" alt=""></p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fjr6t7yzt9j20gr06274l.jpg" alt=""></p>
<h2 id="归并排序"><a href="#归并排序" class="headerlink" title="归并排序"></a>归并排序</h2><p>归并排序是建立在归并操作基础上的一种排序方法。归并操作，是指将两个已排序的子序列合并成一个有序序列的过程。</p>
<p>归并排序的基本原理是：将大小为 $N$ 的序列看成 $N$ 个长度为 1 的子序列，接下来将相邻子序两两进行归并操作，形成$N/2(+1)$ 个长度为 2（或1）的有序子序列；然后再继续进行相邻子序列两两归并操作，如此一直循环，直到剩下 1 个长度为 $N$的序列，则该序列为原序列完成排序后的结果，如下图所示。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fjla5diyacj20ei083weo.jpg" alt=""></p>
<p>归并排序的核心在于归并操作的实现。归并操作的过程如下：首先申请额外的空间用于放置两个子序列归并后的结果，接着设置两个指针分别指向两个已排序子序列的第一个位置，然后比较两个指针指向的元素，将较小的元素放置到已申请的额外空间内，并将当前位置向后移动一格，重复以上过程，直到某一个子序列的指针指向该序列的结尾。这时候将另一个指针所指向序列的剩余元素全部放置到额外空间内，归并操作结束。</p>
<p>下面举个栗子</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fjla7x7030j20m804s3yz.jpg" alt=""></p>
<p>其实从相反的角度来看，归并排序可以看成是分治法的逆向过程。</p>
<h2 id="基数排序"><a href="#基数排序" class="headerlink" title="基数排序"></a>基数排序</h2><h3 id="桶排序"><a href="#桶排序" class="headerlink" title="桶排序"></a>桶排序</h3><p>如果已知 $N$ 个关键字的取值范围是在0到 $M-1$ 之间，而$M$比$N$小得多，则桶排序算法将为关键字的每个可能取值建立一个“桶”，即建立$M$个桶；在扫描$N$个关键字时，将每个关键字放入相应的桶中，然后按桶的顺序收集一遍就自然有序了。所以桶排序效率比一般的排序算法高——当然需要的额外条件是已知关键字的范围，并且关键字在此范围内是可列的，个数还不能超过内存空间所能承受的限度。</p>
<p>【例子】已知某门公共选修课有1500学生选修，其成绩为分布于[0，100]之间的整数。现需要将学生名单按其成绩从低到高顺序打印出来。</p>
<p>【分析】若将学生名单按成绩排序再打印，则至少需要 $O(NlogN)$ 的时间，这里 $N=1500$ 。而用桶排序的方法，可为每一个分数建立一个“桶”，共建101个桶——具体实现时可定义一个链表指针数组 Bucket[101]。顺序扫描学生名单，若当前这个学生的成绩是$i$分，则将他的记录插入 Bucket[ i] 所指的链表头部，这一操作只需2步。整个扫描的过程用去 $O(N)$ 的时间。然后顺序扫描每个Bucket[i]，将链表中的学生名单逐一打印，该过程用$O(N+M)$的时间，其中$M=101$是桶的个数。可见桶排序只需要$O(N+M)$的时间就可以完成名单的顺序打印，特别当$M=O(N)$时，这个时间复杂度是线性的。</p>
<h3 id="基数排序-1"><a href="#基数排序-1" class="headerlink" title="基数排序"></a>基数排序</h3><p>基数排序是桶排序的一种推广，它所考虑的待排记录包含不止一个关键字。例如对一副牌的整理，可将每张牌看作一个记录，包含两个关键字：花色、面值。一般我们可以将一个有序列是先按花色划分为四大块，每一块中又再按面值大小排序。这时“花色”就是一张牌的“最主位关键字”，而“面值”是“最次位关键字”。</p>
<p>对于一般有 $K$ 个关键字的情况，基数排序通常有两种方法：主位优先法（ Most Significant Digit Sort，简称 MSD）和次位优先法（ Least Significant Digit Sort，简称 LSD）。</p>
<p>仍以整理扑克牌为例，顾名思义，新谓主位优先法，是先为最主位关键字（花色）建立桶，将牌按花色分别装进4个桶里；然后对每个桶中的牌，再按其次位关键字（面值）进行排序，最后将4个桶中的牌收集，顺序叠放在一起。</p>
<p>而次位优先法，是先为最次位关键字建立桶，即按面值建立13个桶，将牌按面值分别放于13个桶中；然后将所有桶中的牌收集，顺序叠放在一起；再为主位关键字花色建立4个桶，顺序将每张牌放人对应的花色桶中，则4个花色桶中的牌必是有序的，最后只要将它们收集，顺序叠放即可。</p>
<p>从上述例子可见，两种方法具有不同的特点。主位优先法基本上是分治法的思路，将序列分割成子列后，分别排序再合并结果。而次位优先法是将“排序”过程分解成“分配“和“收集”这两个相对简单的步骤，并不需要分割子列排序，故一般情况下次位优先法的效率更高一些。</p>
<h3 id="单关键字的基数分解"><a href="#单关键字的基数分解" class="headerlink" title="单关键字的基数分解"></a>单关键字的基数分解</h3><p>从上面可以看到，基数排序主要是对有多关键字的对象进行排序。其实可以将单个整型关键字按某种基数分解为多关键字，再进行排序。这也是“基数排序”名称的由来。例如 826 可以根据基数 10 分解为 8、2、6 这三个关键字，其中 8 是最主位关键字，6是最次位关键字；还可以根据基数 16 分解为 3、3、A 这 3 个关键字，其中第一个3是最主位关键字，A 是最次位关键字。</p>
<p>典型问题是给定 $N$ 个记录，每个记录的关键字为一整数，其取值范围是 0 到 M 之间。若 M 比 N 大很多（例如 $M=N^K$），这时桶排序需要 M 个桶，会造成巨大的空间浪费；而以为基数对关键字进行分解后则只需要 $R$ 个桶就可以了。让我们通过一个具体的例子来理解什么是基数分解。</p>
<p>【例子】给定范围在 0 到 999 之间的 10 个关键字 164,8,216,512,27,729,0,1,343,125 现用基数排序算法进行递增排序。</p>
<p>【分析】我们可以将每个关键字看成一个 3 位的十进制整数（不足位的在左边补 0 )，从而将每个十进制整数关键字分解成 3 个关键字，其个位数为最次位关键字，百位数为最主位关键字。这就是以 10 为基数的分解。对给定的 10 个记录用次位优先法进行基数排序，首选对最次位（个位）关键字建立 10 个桶，将记录按其个位数字的大小放入相应的桶中，如下图（a）所示。此时 10 个数字恰好均匀分布于 10 个桶中，当然一般情况下不是总有这么好的运气。每个“桶”实际上是一个链表，一趟排序后，将桶中记录重新收集成为一个新的记录链 {0，1，512，343，64，125，216，27，8，729}。接下去按下一个次位关键字（十位）排序，所得结果如下图（b）所示。注意到此时桶中记录的分布不再均匀。向桶中插入的新记录需排在链表尾部。将桶中记录收集形成新的记录链 {00，01，08，512，216，125，27，729，343，64}。最后按最主位（百位）关键字排序，结果如下图（c）所示，再收集所得的记录链就是最终有序的 {000，001，008，027，064，125，216，343，515，729}。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fjlg2ic8bvj20ls0f23zx.jpg" alt=""></p>
<h2 id="外部排序"><a href="#外部排序" class="headerlink" title="外部排序"></a>外部排序</h2><p>外部排序是指大文件排序，即待排序的数据记录以文件的形式存储在外存储器上。由于文件中的记录很多、信息容量庞大，所以整个文件所占据的存储单元往往会超过了计算机的内存量，因此，无法将整个文件调入内存中进行排序。于是，在排序过程中需进行多次的内外存之间的交换。在实际应用中，由于使用的外设不一致，通常可以分为磁盘文件排序和磁带文件排序两大类。</p>
<p>外部排序基本上由两个相对独立的阶段组成。首先，按可用内存大小，将外存上含 $N$ 个记录的文件分成若干长度为 $L(&lt;N)$ 的子文件，依次读入内存，利用内部排序算法进行排序。然后，将排序后的文件写入外存，通常将这些文件称为归并段（Run）或“顺串”；对这些归并段进行逐步归并，最终得到整个有序文件。可见外部排序的基本方法是归并排序法，下面的例子给出了一个简单的外部排序解决过程。</p>
<p>【例子】给定磁盘上有6大块记录需要排序，而计算机内存最多只能对3个记录块进行内排序，则外部排序的过程如下图所示。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fjlghq44dnj20i907ot8v.jpg" alt=""></p>
<p>【解析】首先将连续的3大块记录读入内存，用任何一种内部排序算法完成排序，再写回磁盘。经过2次3大块记录的内部排序，得到上图（a）的结果。然后另用一个可容纳6大块记录的周转盘，辅助最后的归并。方法是将内存分成3块，其中2块用于输入，1块用于输出，指定一个输入块只负责读取一个归并段中的记录，如上图（b）所示。归并步骤为：</p>
<ul>
<li>当任一输入块为空时，归并暂停，将相应归并段中的一块信息写入内存</li>
<li>将内存中2个输入块中的记录逐一归并入输出块</li>
<li>当输出块写满时，归并暂停，将输出块中的记录写入周转盘</li>
</ul>
<p>如此可将2个归并段在周转盘上归并成一个有序的归并段。上例的解决方法是最简单的归并法，事实上外部排序的效率还可以进一步提高。要提高外排的效率，关键要解决以下4个问题：</p>
<ul>
<li>如何减少归并轮数</li>
<li>如何有效安排内存中的输入、输出块，使得机器的并行处理能力被最大限度地利用</li>
<li>如何有效生成归并段</li>
<li>如何将归并段进行有效归并</li>
</ul>
<p>针对这四大问题，人们设计了多种解决方案，例如釆用多路归并取代简单的二路归并，就可以减少归并轮数；例如在内存中划分出2个输出块，而不是只用一个，就可以设计算法使得归并排序不会因为磁盘的写操作而暂停，达到归并和写周转盘同时并行的效果；例如通过一种“败者树”的数据结构，可以一次生成2倍于内存容量的归并段；例如利用哈夫曼树的贪心策略选择归并次序，可以耗费最少的磁盘读写时间等。</p>
<hr>
<blockquote>
<p>本文作者：刘志宇</p>
<p>版权声明：本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank" rel="noopener">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！</p>
</blockquote>
]]></content>
      
        <categories>
            
            <category> 学习总结 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 数据结构 </tag>
            
            <tag> 算法 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[学习日记(三)]]></title>
      <url>/2017/09/18/%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0(%E4%B8%89)/</url>
      <content type="html"><![CDATA[<p>本文章将记录九月至十一月的学习笔记</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535ly1fjnqbezo6gj23he2m17qw.jpg" width="600" height="200" align="center/"></p>
<a id="more"></a>
<hr>
<h2 id="2017-9-18"><a href="#2017-9-18" class="headerlink" title="2017.9.18"></a>2017.9.18</h2><h3 id="网络协议分层模型"><a href="#网络协议分层模型" class="headerlink" title="网络协议分层模型"></a>网络协议分层模型</h3><p>国际标准化组织 ISO 于 1977 年成立了专门机构。他们就提出一个试图使各种计算机在世界范围内互连成网的标准框架，即著名的开放系统互连基本参考模型 OSI/RM (Open Systems Interconnection Reference Model)，简称为 OSI 。开放系统互连参考模型 OSI/RM 是个抽象的概念。在1983年形成了开放系统互连基本参考模型的正式文件，即著名的 ISO 7498 国际标准，也就是所谓的<strong>七层协议的体系结构</strong>。</p>
<p>OSI 试图达到一种理想境界，即全世界的计算机网络都遵循这个统一的标准，因而全世界的计算机将能够很方便地进行互连和交换数据。然而到了 20 世纪 90 年代初期，虽然整套的 OSI 国际标准都已经制定出来了，但由于因特网已抢先在全世界覆盖了相当大的范围，而与此同时却几乎找不到有什么厂家生产出符合 OSI 标准的商用产品。所以因特网使用的 TCP/IP 协议（族）成为了事实上的国际标准。</p>
<p>OSI 的七层协议体系结构（如下图a）的概念清楚，理论也较完整，但它既复杂又不实用。TCP/IP体系结构则不同，它现在已经得到了非常广泛的应用。TCP/IP 是一个四层的体系结构（如下图b），它包含应用层、运输层、网际层和网络接口层（用网际层这个名字是强调这一层是为了解决不同网络的互连问题）。不过从实质上讲，TCP/IP 只有最上面的三层，因为最下面的网络接口层基本上和一般的通信链路在功能上没有多大差别，对于计算机网络来说，这一层并没有什么特别新的具体内容。因此在学习计算机网络的原理时往往釆取折中的办法，即综合 OSI 和 TCP/IP 的优点，采用一种只有五层协议的体系结构（如下图c）， 这样既简洁又能将概念阐述清楚。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fjnphlvuvwj20gb08k3za.jpg" alt=""></p>
<h2 id="2017-9-20"><a href="#2017-9-20" class="headerlink" title="2017.9.20"></a>2017.9.20</h2><h3 id="关于box-sizing-border-box"><a href="#关于box-sizing-border-box" class="headerlink" title="关于box-sizing: border-box"></a>关于box-sizing: border-box</h3><p>设置该属性后盒装模型的<code>border</code>和<code>padding</code>就被包含在了宽高之内。</p>
<h3 id="关于-proto-和prototype的关系"><a href="#关于-proto-和prototype的关系" class="headerlink" title="关于_proto_和prototype的关系"></a>关于<code>_proto_</code>和<code>prototype</code>的关系</h3><p>知乎由这样一个有趣的比喻，来源于<a href="https://www.zhihu.com/question/34183746" target="_blank" rel="noopener">js中<strong>proto</strong>和prototype的区别和关系？</a></p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fjptyejgczj20o10xx79c.jpg" alt=""></p>
<h2 id="2017-9-23"><a href="#2017-9-23" class="headerlink" title="2017.9.23"></a>2017.9.23</h2><h3 id="apache"><a href="#apache" class="headerlink" title="apache"></a>apache</h3><p>Apache 是世界上使用排名第一的 Web 服务器软件。他可以运行在几乎所有广泛使用的计算机平台上，由于其跨平台和安全性被广泛使用，是最流行的 Web 服务器端软件之一。</p>
<h3 id="CMS-系统"><a href="#CMS-系统" class="headerlink" title="CMS 系统"></a>CMS 系统</h3><p>随着网络应用的丰富和发展，很多网站往往不能迅速跟进大量信息衍生及业务模式变革的脚步，常常需要花费许多时间、人力和物力来处理信息更新和维护工作；遇到网站扩充的时候，整合内外网及分支网站的工作就变得更加复杂，甚至还需重新建设网站；如此下去，用户始终在一个高成本、低效率的循环中升级、整合……于是一套专业的内容管理系统 CMS 应运而生，来有效解决用户网站建设与信息发布中常见的问题和需求。</p>
<h3 id="div-div1-以及-div-div1-区别"><a href="#div-div1-以及-div-div1-区别" class="headerlink" title="div#div1 以及 div #div1 区别"></a>div#div1 以及 div #div1 区别</h3><p><img src="https://files.gitter.im/FreeCodeCamp/chinese/5Jq2/blob" alt="区别"></p>
<h3 id="内存泄漏的含义"><a href="#内存泄漏的含义" class="headerlink" title="内存泄漏的含义"></a>内存泄漏的含义</h3><p>在分配了一块内存空间之后，如果不再需要时就应当考虑将其释放。如果被分配的内容空间不再需要时，程序员没有将其释放，那么这块空间将随同程序运行而一直存在。这就像某人处在一个封闭的空间内，手里握着一定数量的气球，当气球（内存空间）不再需要而将线剪断但却没有戳爆气球，任气球四处飘动，最后这个封闭的空间一定会被那些无用的气球占满空间。回到计算机系统，对于一个需要长时间运行的操作系统，如果运行在操作系统上的应用程序只是一味的分配空间，使用完后却不回收空间，那么最终系统资源无疑将被耗尽，最后整个系统将陷入瘫痪。</p>
<h3 id="线程池"><a href="#线程池" class="headerlink" title="线程池"></a>线程池</h3><p>在计算机中时常存在这样一种情况，因为需要建立的对象特别多，特别是一些很耗资源的对象需要被频繁地创建和销毁。为了提高效率，节省资源，可以考虑利用已有的对象而非新建对象，这就是“池化资源”技术的初衷。例如数据库服务和网络服务中，我们常常需要建立一个连接对象来发送请求并获取结果。但如果每次操作都新建一个连接对象，使用完又都立刻关闭连接，这样就会造成系统的性能低下。一个解决方案是可以在应用程序启动时建立足够的连接对象，并将这些连接对象组成一个“池”，由应用程序动态地对池中的连接进行申请、使用和释放。对于多于连接池中连接数的并发请求，就让它们在请求队列等待。甚至还可以让应用程序可根据池中连接的使用率，动态地增加或减少池中的连接数，但这个动态范围也是有限的。如此一来，连接池技术就会重复利用资源，节省内存开支，从而提高服务效率。</p>
<h2 id="2017-9-26"><a href="#2017-9-26" class="headerlink" title="2017.9.26"></a>2017.9.26</h2><h3 id="V8引擎和Node环境的不同"><a href="#V8引擎和Node环境的不同" class="headerlink" title="V8引擎和Node环境的不同"></a>V8引擎和Node环境的不同</h3><p>JavaScript 中 global 对象是单体内置对象，即不依赖宿主环境的对象。而 window 对象依赖浏览器。我的理解是 window 对象是 global 的一个子对象。浏览器环境下，global 对象指的就是 window 对象</p>
<h2 id="2017-9-29"><a href="#2017-9-29" class="headerlink" title="2017.9.29"></a>2017.9.29</h2><h3 id="OOP"><a href="#OOP" class="headerlink" title="OOP"></a>OOP</h3><p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fk07kehvanj20ks0fpq7t.jpg" alt=""></p>
<h2 id="2017-10-1"><a href="#2017-10-1" class="headerlink" title="2017.10.1"></a>2017.10.1</h2><h3 id="jQuery-遍历"><a href="#jQuery-遍历" class="headerlink" title="jQuery 遍历"></a>jQuery 遍历</h3><blockquote>
<p>parent()—当前元素的直接父元素</p>
<p>parent()—当前元素的所有父元素</p>
<p>parentsUtil()—当前元素到某一元素之间的所有父元素</p>
<p>children()—当前元素的直接子元素</p>
<p>find()—当前元素下所有子元素中的某个元素</p>
<p>contents()—当前元素下所有子元素，包括子元素的子元素</p>
<p>html()—当前元素的文本内容，为一个字符串值</p>
</blockquote>
<h3 id="CSS-权重计算"><a href="#CSS-权重计算" class="headerlink" title="CSS 权重计算"></a>CSS 权重计算</h3><ol>
<li>第一等：代表内联样式，如: <code>style=&quot;...&quot;</code>，权值为1000。</li>
<li>第二等：代表 ID 选择器，如：<code>#content</code>，权值为100。 </li>
<li>第三等：代表类，伪类和属性选择器，如<code>.content</code>、<code>:hover</code>、<code>:focus</code>，权值为10。</li>
<li>第四等：代表元素选择器和伪元素选择器，如<code>::afer</code>，权值为1。</li>
</ol>
<p>具体可详细查看：<a href="https://chenhaizhou.github.io/2015/01/16/css-weight.html" target="_blank" rel="noopener">关于CSS权重(优先级)的理解</a></p>
<h3 id="electron-是什么"><a href="#electron-是什么" class="headerlink" title="electron 是什么"></a>electron 是什么</h3><p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fk2tl63p87j20r608t75d.jpg" alt=""></p>
<p>根据官网的描述，electron 是一种可以使用网页技术来开发跨平台桌面应用的解决方案！感受一下，用你已知的技巧<code>html</code>、<code>javascript</code>、<code>css</code>就能写桌面应用，具体内容可查阅 <a href="https://leftstick.github.io/tech/2016/03/15/write-desktop-app-via-electron" target="_blank" rel="noopener">用electron写桌面应用</a></p>
<h3 id="word-break"><a href="#word-break" class="headerlink" title="word-break"></a>word-break</h3><p> CSS 属性 <code>word-break</code> 指定了怎样在单词内断行，具体可查阅<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/word-break" target="_blank" rel="noopener">word-break|MDN</a></p>
<h3 id="white-space"><a href="#white-space" class="headerlink" title="white-space"></a>white-space</h3><p><code>white-space</code> CSS 属性是用来设置如何处理元素中的空白，具体可查阅<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/white-space" target="_blank" rel="noopener">white-space|MDN</a></p>
<h3 id="bootstrap-栅格模式"><a href="#bootstrap-栅格模式" class="headerlink" title="bootstrap 栅格模式"></a>bootstrap 栅格模式</h3><p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fk2vo47eigj20jg08c3yl.jpg" alt=""></p>
<h3 id="form的enctype属性"><a href="#form的enctype属性" class="headerlink" title="form的enctype属性"></a>form的<code>enctype</code>属性</h3><p>enctype 属性规定在发送到服务器之前应该如何对表单数据进行编码。默认地，表单数据会编码为 <code>application/x-www-form-urlencoded</code>。就是说，在发送到服务器之前，所有字符都会进行编码（空格转换为 “+” 加号，特殊符号转换为 ASCII HEX 值）。具体可查阅<a href="http://www.w3school.com.cn/tags/att_form_enctype.asp" target="_blank" rel="noopener">HTML form 标签的 enctype 属性</a></p>
<h3 id="cellpadding与cellspacing的区别"><a href="#cellpadding与cellspacing的区别" class="headerlink" title="cellpadding与cellspacing的区别"></a><code>cellpadding</code>与<code>cellspacing</code>的区别</h3><p><img src="http://www.dreamdu.com/images/html_table.png" alt=""></p>
<h3 id="iframe-标签"><a href="#iframe-标签" class="headerlink" title="iframe 标签"></a>iframe 标签</h3><p>iframe 元素会创建包含另外一个文档的内联框架（即行内框架）</p>
<h2 id="2017-10-2"><a href="#2017-10-2" class="headerlink" title="2017.10.2"></a>2017.10.2</h2><h3 id="超链接伪类"><a href="#超链接伪类" class="headerlink" title="超链接伪类"></a>超链接伪类</h3><p>为了保证 <code>:link</code>、<code>:visited</code>、<code>:hover</code>、<code>active</code>这几个伪类能够起到对应的作用，他们的使用顺序有个记忆的口诀就是 LoVeHAte，具体可查阅 <a href="http://www.dengzhr.com/frontend/css/344" target="_blank" rel="noopener">CSS中超链接伪类link,visited,hover,active的顺序分析</a></p>
<h3 id="link-和-import-区别"><a href="#link-和-import-区别" class="headerlink" title="link 和 @import 区别"></a>link 和 @import 区别</h3><p>可查阅 <a href="http://www.divcss5.com/rumen/r431.shtml" target="_blank" rel="noopener">css link和@import区别</a></p>
<h2 id="2017-10-3"><a href="#2017-10-3" class="headerlink" title="2017.10.3"></a>2017.10.3</h2><h3 id="关于-JavaScript-的-forEach-循环语句"><a href="#关于-JavaScript-的-forEach-循环语句" class="headerlink" title="关于 JavaScript 的 forEach 循环语句"></a>关于 JavaScript 的 forEach 循环语句</h3><h4 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h4><p>可参考 <a href="https://msdn.microsoft.com/zh-cn/library/ff679980(v=vs.94" target="_blank" rel="noopener">forEach 方法 (Array) (JavaScript)|MSDN</a>.aspx)</p>
<h4 id="如何跳出循环"><a href="#如何跳出循环" class="headerlink" title="如何跳出循环"></a>如何跳出循环</h4><p>可参考 <a href="https://segmentfault.com/a/1190000010482166" target="_blank" rel="noopener">踩坑 - Javascript的forEach和Jquery的each跳出循环问题</a></p>
<h2 id="2017-10-5"><a href="#2017-10-5" class="headerlink" title="2017.10.5"></a>2017.10.5</h2><h3 id="C语言的指针与数组"><a href="#C语言的指针与数组" class="headerlink" title="C语言的指针与数组"></a>C语言的指针与数组</h3><p>在C语言中，数组名本身就是数组的第一个元素（下标为 0 ）的地址。在访问内存方面，指针和数组几乎是相同的，当然也有不同：指针变量是以地址作为储存内容的变量，而数组名的值是一个特殊的固定地址，可以把它看作是指针常量，不能改变指针常量的值。</p>
<h3 id="JavaScript中关于小数整数化处理"><a href="#JavaScript中关于小数整数化处理" class="headerlink" title="JavaScript中关于小数整数化处理"></a>JavaScript中关于小数整数化处理</h3><ul>
<li>抛弃小数点后面的数字——<code>parseInt((7/2),10)</code></li>
<li>向上取整——<code>Math.ceil(7/2)</code></li>
<li>向下取整——<code>Math.floor(7/2)</code></li>
<li>四舍五入——<code>Math.round(7/2)</code></li>
</ul>
<h2 id="2017-10-6"><a href="#2017-10-6" class="headerlink" title="2017.10.6"></a>2017.10.6</h2><h3 id="置换元素与非置换元素"><a href="#置换元素与非置换元素" class="headerlink" title="置换元素与非置换元素"></a>置换元素与非置换元素</h3><ul>
<li>置换元素——浏览器根据元素的标签和属性，来决定元素的具体显示内容</li>
<li>非置换元素——浏览器中的大多数元素都是不可置换元素，即其内容直接展示给浏览器</li>
</ul>
<h2 id="2017-10-7"><a href="#2017-10-7" class="headerlink" title="2017.10.7"></a>2017.10.7</h2><h3 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h3><p>JavaScript 中只有函数作用域和全局作用域。</p>
<h2 id="2017-10-8"><a href="#2017-10-8" class="headerlink" title="2017.10.8"></a>2017.10.8</h2><h3 id="Bootstrap"><a href="#Bootstrap" class="headerlink" title="Bootstrap"></a>Bootstrap</h3><h4 id="是什么"><a href="#是什么" class="headerlink" title="是什么"></a>是什么</h4><p>Bootstrap 包含了扁平化设计 UI + 响应式栅格系统 + css 样式 + 基本HTML组件 + JavaScript 组件 + 其他实用工具在内的一个前端工具集合</p>
<h4 id="IE-8-的支持"><a href="#IE-8-的支持" class="headerlink" title="IE 8 的支持"></a>IE 8 的支持</h4><p>CSS 3的某些属性<code>border-radius</code>、<code>box-shadow</code>、<code>transform</code>、<code>transistion</code>等肯定不被支持，还有 CSS 3 的媒体查询的支持需要 Respond.js 配合</p>
<h3 id="CSS-3-媒体查询"><a href="#CSS-3-媒体查询" class="headerlink" title="CSS 3 媒体查询"></a>CSS 3 媒体查询</h3><p>使用 <code>@media</code> 查询，你可以针对不同的媒体类型定义不同的样式。<code>@media</code>可以针对不同的屏幕尺寸设置不同的样式，特别是如果你需要设置设计响应式的页面，@media 是非常有用的。当你重置浏览器大小的过程中，页面也会根据浏览器的宽度和高度重新渲染页面。具体内容可查询 <a href="http://www.runoob.com/cssref/css3-pr-mediaquery.html" target="_blank" rel="noopener">CSS3 @media 查询|菜鸟教程</a></p>
<h3 id="CSS-hack"><a href="#CSS-hack" class="headerlink" title="CSS hack"></a>CSS hack</h3><p>CSS hack由于不同厂商的<a href="https://baike.baidu.com/item/%E6%B5%8F%E8%A7%88%E5%99%A8" target="_blank" rel="noopener">浏览器</a>，比如 Internet Explorer、Safari、<a href="https://baike.baidu.com/item/Mozilla%20Firefox" target="_blank" rel="noopener">Mozilla Firefox</a>、Chrome 等，或者是同一厂商的浏览器的不同版本，如 IE6 和 IE7 ，对 CSS 的解析认识不完全一样，因此会导致生成的页面效果不一样，得不到我们所需要的页面效果。 这个时候我们就需要针对不同的浏览器去写不同的 CSS ，让它能够同时兼容不同的浏览器，能在不同的浏览器中也能得到我们想要的页面效果。简单的说，CSS hack 的目的就是使你的 CSS 代码兼容不同的浏览器。当然，我们也可以反过来利用 CSS hack 为不同版本的浏览器定制编写不同的 CSS 效果。</p>
<h2 id="2017-10-10"><a href="#2017-10-10" class="headerlink" title="2017.10.10"></a>2017.10.10</h2><h3 id="v-if-与-v-show"><a href="#v-if-与-v-show" class="headerlink" title="v-if 与 v-show"></a>v-if 与 v-show</h3><p>简单来说，<code>v-if</code>是动态的向 DOM 树内添加或者删除 DOM 元素；<code>v-show</code> 是通过设置 DOM 元素的 display 样式属性控制显隐</p>
<h2 id="2017-10-11"><a href="#2017-10-11" class="headerlink" title="2017.10.11"></a>2017.10.11</h2><h3 id="container-与-container-fluid-不同"><a href="#container-与-container-fluid-不同" class="headerlink" title="container 与 container-fluid 不同"></a>container 与 container-fluid 不同</h3><p>container 与 container-fluid 是 Bootstrap 中两种不同类型的容器，两者的区别是 container 会根据屏幕宽度的变化通过媒体查询设置一个固定的宽度。而 container-fluid 的宽度自动设置为其父容器宽度的100%，并且相对于其父容器居中。</p>
<h2 id="2017-10-13"><a href="#2017-10-13" class="headerlink" title="2017.10.13"></a>2017.10.13</h2><h3 id="银行家算法"><a href="#银行家算法" class="headerlink" title="银行家算法"></a>银行家算法</h3><p>在银行中，客户申请贷款的数量是有限的，每个客户在第一次申请贷款时要声明完成该项目所需的最大资金量，在满足所有贷款要求时，客户应及时归还。银行家在客户申请的贷款数量不超过自己所拥有的最大值时，都应尽量满足客户的需要。在这样的描述中，银行家就好比操作系统，资金就是系统资源，客户就相当于要申请资源的进程。</p>
<p><strong>银行家算法是一种最有代表性的避免死锁的算法。在避免死锁方法中允许进程动态地申请资源，但系统在进行资源分配之前，应先计算此次分配资源的安全性，若分配不会导致系统进入不安全状态，则分配，否则等待。为实现银行家算法，系统必须设置若干数据结构。</strong></p>
<p>安全序列是指一个进程序列 ${P_1,…,P_n}$ 是安全的，即对于每一个进程 $P_i(1\leq i \leq n)$ ，它以后尚需要的资源量不超过系统当前剩余资源量与所有进程当前占有资源量之和。<strong>即在分配过程中，不会出现某一进程后续需要的资源量比其他所有进程及当前剩余资源量总和还大的情况</strong>。</p>
<p><strong>存在安全序列则系统是安全的，如果不存在则系统不安全，但不安全状态不一定引起死锁。</strong></p>
<h2 id="2017-10-15"><a href="#2017-10-15" class="headerlink" title="2017.10.15"></a>2017.10.15</h2><h3 id="Array检测数组"><a href="#Array检测数组" class="headerlink" title="Array检测数组"></a>Array检测数组</h3><p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fki08h4l8tj20rc0fm775.jpg" alt=""></p>
<p>浏览器时多线程，JavaScript 在浏览器的执行时单线程，浏览器开多个标签页面每个页面都有一个单独的 window，如果你在一个 HTML 文件中用 iframe 标签嵌套了其他的 HTML ，那么当前页面就是 2 个 window</p>
<h2 id="2017-10-17"><a href="#2017-10-17" class="headerlink" title="2017.10.17"></a>2017.10.17</h2><h3 id="Object转换方法"><a href="#Object转换方法" class="headerlink" title="Object转换方法"></a>Object转换方法</h3><p>所有对象都具有 <code>toLocalString()</code>、<code>toString()</code>、<code>valueOf()</code>方法，其中数组调用<code>toString</code>方法时数组内的每一项都会先调用这个方法</p>
<h3 id="Function类型"><a href="#Function类型" class="headerlink" title="Function类型"></a>Function类型</h3><p>JavaScript中函数也是对象，因此函数名字实际上也是一个指向函数对象的指针</p>
<h3 id="函数声明式与函数表达式"><a href="#函数声明式与函数表达式" class="headerlink" title="函数声明式与函数表达式"></a>函数声明式与函数表达式</h3><p>JavaScript中定义了一个叫执行环境的概念，环境中定义的所有变量和函数都保存在这个对象中。其中函数定义方式的差别会导致执行环境初始化函数的过程发生区别，通过函数声明定义的函数会在执行环境初始化早期就先加载改函数对象，从而使得在执行环境中的任何代码之前就可用。而通过函数表达式定义的函数得在执行到该函数定义语句的时候才可用，而在这之前都不可用。这是函数声明式与函数表达式之间唯一的差别。</p>
<h3 id="作为一个值的函数"><a href="#作为一个值的函数" class="headerlink" title="作为一个值的函数"></a>作为一个值的函数</h3><p>在 JavaScript 中不妨把函数变量当做一个有特殊功能的对象变量。所以函数的使用很灵活，比如把函数名当做另一个函数的参数，或者还可以是该函数当做另一个函数的结果返回。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">callSomeFunction</span>(<span class="params">someFunction,someArgument</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> someFunction(someArgument);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>如果某个对象数组，我们需要根据某个对象属性对数组进行排序。而传递给数组 <code>sort()</code>方法的比较函数要接收两个参数。要解决这个问题，我们可以定义一个函数，它接受一个属性名，然后根据这个属性名来创建一个比较函数<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createComparisonFunction</span>(<span class="params">propertyName</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">object1,object2</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> value1=object1[propertyName];</span><br><span class="line">        <span class="keyword">var</span> value2=object2[propertyName];</span><br><span class="line">        <span class="keyword">if</span>(value1&lt;value2)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(value1&gt;value2)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="函数提升应该注意到的地方"><a href="#函数提升应该注意到的地方" class="headerlink" title="函数提升应该注意到的地方"></a>函数提升应该注意到的地方</h3><p>因为函数声明与函数表达式在函数提升的表现不同，应该注意一下情况的出现，这属于无效语法<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(condition)&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(<span class="string">"Hi!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">sayYo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(<span class="string">"Yo!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="命名函数表达式"><a href="#命名函数表达式" class="headerlink" title="命名函数表达式"></a>命名函数表达式</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> factorial = (<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">num</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (num&lt;=<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> num*f(num<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>上述代码解决了严格模式下<code>arguments.callee</code>失效的问题</p>
<h2 id="2017-10-18"><a href="#2017-10-18" class="headerlink" title="2017.10.18"></a>2017.10.18</h2><h3 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h3><p>JSONP (JSON with Padding) 是 JSON 的一种”使用模式”，可以让网页从别的域名（网站）那获取资料，即跨域读取数据。为什么我们从不同的域（网站）访问数据需要一个特殊的技术(JSONP)呢？这是因为同源策略。同源策略，它是由 Netscape 提出的一个著名的安全策略，现在所有支持JavaScript 的浏览器都会使用这个策略。</p>
<h3 id="CNAME-记录"><a href="#CNAME-记录" class="headerlink" title="CNAME 记录"></a>CNAME 记录</h3><p>DNS 的记录类型有A、AAAA、CNAME 等。其中A记录是域名到 IPV4 地址的映射；AAAA记录是域名到 IPV6地址的映射；CNAME 记录就是把域名映射到另一个域名，而另一个域名也会有个映射到IP地址的记录。CNAME记录解析只是在中间多了一个步骤而已。</p>
<h2 id="2017-10-19"><a href="#2017-10-19" class="headerlink" title="2017.10.19"></a>2017.10.19</h2><h3 id="Node-js-和-NPM-的关系"><a href="#Node-js-和-NPM-的关系" class="headerlink" title="Node.js 和 NPM 的关系"></a>Node.js 和 NPM 的关系</h3><p>Node.js 是 JavaScript 的一种运行环境，是对 Google V8 引擎进行的封装。是一个服务器端的javascript的解释器。他们之间是包含关系。比如说你安装好 Node.js ，你打开命令行输入<code>npm -v</code>会显示 NPM 的版本号，说明 NPM 已经安装好。其实 NPM 是 Node.js 的包管理器（Node Package Manager）。我们在Node.js 上开发时，会用到很多别人已经写好的 JavaScript 代码，如果每当我们需要别人的代码时，都根据名字搜索一下，下载源码，解压，再使用，会非常麻烦。于是就出现了包管理器NPM。大家把自己写好的源码上传到 NPM 官网上，如果要用某个或某些个，直接通过 NPM 安装就可以了，不用管那个源码在哪里。并且如果我们要使用模块A，而模块A又依赖模块B，模块B又依赖模块C和D，此时 NPM 会根据依赖关系，把所有依赖的包都下载下来并且管理起来。试想如果这些工作全靠我们自己去完成会多么麻烦！</p>
<h3 id="前端工程化的理解"><a href="#前端工程化的理解" class="headerlink" title="前端工程化的理解"></a>前端工程化的理解</h3><p>目前来说，Web业务日益复杂化和多元化，前端开发已经由以WebPage模式为主转变为以WebApp模式为主了。现在随便找个前端项目，都已经不是过去的拼个页面+搞几个jQuery插件就能完成的了。工程复杂了就会产生许多问题，比如：如何进行高效的多人协作？如何保证项目的可维护性？如何提高项目的开发质量？…前端工程化是前端架构中重要的一环，主要就是为了解决上述大部分问题的。而前端工程本质上是软件工程的一种，因此我们应该从软件工程的角度来研究前端工程。前端工程化主要应该从模块化、组件化、规范化、自动化四个方面来思考，下面一一展开…….，具体可查看 <a href="https://www.zhihu.com/question/24558375/answer/139920107" target="_blank" rel="noopener">谁能介绍下web前端工程化|知乎</a></p>
<h2 id="2017-10-26"><a href="#2017-10-26" class="headerlink" title="2017.10.26"></a>2017.10.26</h2><h3 id="正则表达式-和-b的区别"><a href="#正则表达式-和-b的区别" class="headerlink" title="正则表达式 ^和\b的区别"></a>正则表达式 <code>^</code>和<code>\b</code>的区别</h3><p><img src="https://gss0.baidu.com/94o3dSag_xI4khGko9WTAnF6hhy/zhidao/pic/item/18d8bc3eb13533fa22d8a893a9d3fd1f41345b24.jpg" alt=""></p>
<p><img src="https://gss0.baidu.com/-vo3dSag_xI4khGko9WTAnF6hhy/zhidao/pic/item/d6ca7bcb0a46f21f8b9265eef7246b600d33aeec.jpg" alt=""></p>
<h3 id="RegExp-的-exec-方法以及-String-的-match-方法"><a href="#RegExp-的-exec-方法以及-String-的-match-方法" class="headerlink" title="RegExp 的 exec 方法以及 String 的 match 方法"></a>RegExp 的 exec 方法以及 String 的 match 方法</h3><p>RegExp 对象的主要方法是<code>exec()</code>，该方法是专门为捕获组而设计的。该方法接受一个参数，即要应用模式的字符串，然后返回<strong>包含第一个匹配项信息的数组</strong>。此数组的第 0 个元素是与正则表达式相匹配的文本，第 1 个元素是与 RegExpObject 的第 1 个子表达式相匹配的文本（如果有的话），第 2 个元素是与 RegExpObject 的第 2 个子表达式相匹配的文本（如果有的话），以此类推。返回的数组虽然是 Array 对象的实例，但包含两个额外的属性：index 和 input。其中 index 属性声明的是匹配文本的第一个字符的位置。input 属性则存放的是被检索的字符串 string。</p>
<p>而 <code>match()</code> 方法将检索字符串 String Object，以找到一个或多个与 regexp 匹配的文本。这个方法的行为在很大程度上有赖于 regexp 是否具有标志 g。如果 regexp 没有标志 g，那么 <code>match()</code> 方法就只能在 String Object 中执行一次匹配。如果没有找到任何匹配的文本，<code>match()</code>将返回 null。否则，它将返回一个数组，其中存放了与它找到的匹配文本有关的信息。</p>
<p>在局部匹配下，String 对象的 <code>match()</code>方法与 RegExp 对象的 <code>exec()</code> 方法得到的结果都是一个匹配工作进行一次的包含信息的结果数组。而且多次执行 <code>exec()</code> 都是同样的结果，因为 lastIndex 属性不会自动更新。</p>
<p>但是，当 RegExpObject 是一个全局正则表达式时，<code>exec()</code> 的行为就稍微复杂一些。它会在 RegExpObject 的 lastIndex 属性指定的字符处开始检索字符串 string。当 <code>exec()</code> 找到了与表达式相匹配的文本时，在匹配后，它将把 RegExpObject 的 lastIndex 属性设置为匹配文本的最后一个字符的下一个位置。这就是说，您可以通过反复调用 <code>exec()</code> 方法来遍历字符串中的所有匹配文本。总之 RegExp 对象的 <code>exec()</code> 无论是全局还是局部匹配，每次执行都只会返回一个匹配工作进行一次的包含信息的结果数组。</p>
<h3 id="错题解答"><a href="#错题解答" class="headerlink" title="错题解答"></a>错题解答</h3><p>请给出这段代码的运行结果（）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> bb=<span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">aa</span>(<span class="params">bb</span>)</span>&#123;</span><br><span class="line">  bb=<span class="number">2</span>;</span><br><span class="line">  alert(bb);</span><br><span class="line">&#125;</span><br><span class="line">aa(bb);				<span class="comment">//2</span></span><br><span class="line">alert(bb);			<span class="comment">//1</span></span><br></pre></td></tr></table></figure>
<p>函数体内，bb 并没有使用 <code>var</code> 来定义，按理说这个 bb 在预处理的时候应该是 window 的属性。但在这里，函数声明的时候，带了一个参数 bb ，也就是相当于在函数体内声明了<code>var bb</code>。所以，函数里的 bb 就是函数活动对象的属性。所以函数执行时会输出 2。函数执行完后，函数的活动对象被销毁，也就是局部的这个 bb 被删除了，执行流进入到 window ，再输出 bb ，值就是1了。如果声明函数时，把参数那里的bb去掉，这段代码执行起来，结果就是弹出 2 2</p>
<h3 id="void-操作符"><a href="#void-操作符" class="headerlink" title="void 操作符"></a>void 操作符</h3><p>因为<code>undefined</code>在 JavaScript 中不是保留字。换言之，你可以写出：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">joke</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> <span class="literal">undefined</span>=<span class="string">'hello world'</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="literal">undefined</span>);	<span class="comment">//hello world</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">undefined</span>);		<span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>
<p>于是，采用<code>void</code>方式获取<code>undefined</code>便成了通用准则。同时还有一个常见的功能，填充<code>href</code>。下面是一个微博截图，它的<code>转发</code>, <code>收藏</code>， <code>讨论</code>都是超链接，但是用户并不希望点击它们会跳转到另一个页面，而是引发出一些交互操作。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fky0gpp210j20h803l74b.jpg" alt=""></p>
<p>理论上而言，这三个超链接都是没有 URL 的，但如果不写的话，呵呵，点击它会刷新整个页面。于是便用上了<code>href=&quot;javascript:void(0)</code>的方式，确保点击它会执行一个纯粹无聊的<code>void(0)</code>。另一种情况是，如果我们要生成一个空的<code>src</code>的<code>image</code>，最好的方式似乎也是<code>src=&#39;javascript:void(0)&#39;</code>。</p>
<h2 id="2017-10-28"><a href="#2017-10-28" class="headerlink" title="2017.10.28"></a>2017.10.28</h2><h3 id="ECMAScript-变量"><a href="#ECMAScript-变量" class="headerlink" title="ECMAScript 变量"></a>ECMAScript 变量</h3><p>因为 ECMAScript 是变量是松散类型的，所以换句话说每个变量仅仅是一个用于保存值的<strong>占位符</strong>而已</p>
<h2 id="2017-10-30"><a href="#2017-10-30" class="headerlink" title="2017.10.30"></a>2017.10.30</h2><h3 id="Object-keys-obj"><a href="#Object-keys-obj" class="headerlink" title="Object.keys(obj)"></a>Object.keys(obj)</h3><p><code>Object.keys()</code>方法会返回一个由一个给定对象的自身可枚举属性组成的数组，数组中属性名的排列顺序和使用 for…in 循环遍历该对象时返回的顺序一致 （两者的主要区别是 一个 for-in 循环还会枚举其原型链上的属性）。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Object 对象 */</span> </span><br><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">foo</span>: <span class="string">"bar"</span>, <span class="attr">baz</span>: <span class="number">42</span> &#125;, </span><br><span class="line">    keys = <span class="built_in">Object</span>.keys(obj);</span><br><span class="line"><span class="comment">// CCAC: Chrome Console Auto Copy</span></span><br><span class="line">copy(keys); </span><br><span class="line"><span class="comment">// ["foo","baz"]</span></span><br></pre></td></tr></table></figure>
<p>更多内容可参考<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/keys" target="_blank" rel="noopener">Object.keys()|MDN</a></p>
<h3 id="Class-表达式"><a href="#Class-表达式" class="headerlink" title="Class 表达式"></a>Class 表达式</h3><p>采用 Class 表达式，可以写出立即执行的 Class<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person=<span class="keyword">new</span> <span class="class"><span class="keyword">class</span></span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name)&#123;</span><br><span class="line">        <span class="keyword">this</span>.name=name;</span><br><span class="line">    &#125;</span><br><span class="line">    sayName()&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;(<span class="string">'张三'</span>);</span><br><span class="line">person.sayName();       <span class="comment">//张三</span></span><br></pre></td></tr></table></figure></p>
<h2 id="2017-10-31"><a href="#2017-10-31" class="headerlink" title="2017.10.31"></a>2017.10.31</h2><h3 id="webpack-entry的三种形式的值"><a href="#webpack-entry的三种形式的值" class="headerlink" title="webpack entry的三种形式的值"></a>webpack entry的三种形式的值</h3><ol>
<li>字符串——单一入口文件</li>
<li>数组——多文件入口</li>
<li>对象——<code>entry</code>对象内的多个入口文件原本是要与一个个的输出文件一一对应。但如果<code>output</code>为单一输出文件，那么每一个入口文件打包后会覆盖掉其他的入口文件打包后输出的文件，因为他们都同名，所以为了应对这种情况，需要给<code>output</code>的<code>filename</code>属性值加上 <code>[hash]</code>、<code>[name]</code>、<code>[chunkhash]</code>占位符</li>
</ol>
<h2 id="2017-11-1"><a href="#2017-11-1" class="headerlink" title="2017.11.1"></a>2017.11.1</h2><h3 id="UglifyJS"><a href="#UglifyJS" class="headerlink" title="UglifyJS"></a>UglifyJS</h3><p>UglifyJs 是一个js 解释器、最小化器、压缩器、美化器工具集（parser, minifier, compressor or beautifier toolkit）。由于webpack本身集成了UglifyJS插件（webpack.optimize.UglifyJsPlugin），其命令<code>webpack -p</code>即表示调用UglifyJS来压缩代码，还有不少webpack插件如html-webpack-plugin也会默认使用 UglifyJS。</p>
<h2 id="2017-11-3"><a href="#2017-11-3" class="headerlink" title="2017.11.3"></a>2017.11.3</h2><h3 id="的区别"><a href="#的区别" class="headerlink" title="./ ../ / 的区别"></a><code>./</code> <code>../</code> <code>/</code> 的区别</h3><ol>
<li><code>./</code>——当前目录</li>
<li><code>../</code>——父级目录</li>
<li><code>/</code>——当前目录</li>
</ol>
<h2 id="2017-11-8"><a href="#2017-11-8" class="headerlink" title="2017.11.8"></a>2017.11.8</h2><h3 id="setTimeout-Or-setInterval"><a href="#setTimeout-Or-setInterval" class="headerlink" title="setTimeout() Or setInterval()"></a>setTimeout() Or setInterval()</h3><p>一般认为使用超时调用来模拟间歇调用是一种最佳方法，以为当使用间歇调用时会出现后一个间歇调用可能会在前一个间歇调用结束之前启动。</p>
<h3 id="Babel"><a href="#Babel" class="headerlink" title="Babel"></a>Babel</h3><p>Babel 可以让你使用 ES2015/16/17 写代码而不用顾忌浏览器的问题，Babel 可以帮你转换代码。首先安装必要的几个 Babel 库</p>
<p><code>npm i --save-dev babel-loader babel-core babel-preset-env</code><br>先介绍下我们安装的三个库</p>
<ul>
<li>babel-loader——用于让 webpack 知道如何运行 babel</li>
<li>babel-core——可以看做编译器，这个库知道如何解析代码</li>
<li>babel-preset-env——这个库可以根据环境的不同转换代码</li>
</ul>
<h3 id="CSS-expression"><a href="#CSS-expression" class="headerlink" title="CSS expression"></a>CSS expression</h3><p>IE5 及其以后版本支持在 CSS 中使用 expression，用来把 CSS 属性和 Javascript 表达式关联起来，这里的 CSS 属性可以是元素固有的属性，也可以是自定义属性。就是说 CSS 属性后面可以是一 Javascript 表达式，CSS属性的值等于 Javascript 表达式计算的结果。 在表达式中可以直接引用元素自身的属性和方法，也可以使用其他浏览器对象。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    #container &#123; width: expression((documentElement.clientWidth &lt; 725) ? "725px" : "auto" ); &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="2017-11-11"><a href="#2017-11-11" class="headerlink" title="2017.11.11"></a>2017.11.11</h2><h3 id="Three-js-WebGl-OpenGl-之间的联系"><a href="#Three-js-WebGl-OpenGl-之间的联系" class="headerlink" title="Three.js WebGl OpenGl 之间的联系"></a>Three.js WebGl OpenGl 之间的联系</h3><p>提到 Three.js，就必须说一下 OpenGL 和 WebGL。<br>OpenGL 大概许多人都有所听闻，它是最常用的跨平台图形处理开源库。WebGL 就是基于 OpenGL 设计的面向 web 的 3D 图形标准，它提供了一系列 JavaScript API，通过这些 API 进行图形渲染，系统硬件会加速 3D 渲染，从而获得较高性能。而 Three.js 是 JavaScript 编写的 WebGL 第三方库，通过对 WebGL 接口的封装与简化而形成的一个易用的图形库。而因为 WebGL 的使用需要对计算机图形学有一个比较深入的了解，这对普通前端开发人员来说快速上手 WebGL 是个不小的挑战。但是Three.js 对 WebGL 提供的接口进行了非常好的封装，简化了很多细节，大大降低了学习成本。并且，几乎没有损失 WebGL 的灵活性。</p>
<h2 id="2017-11-13"><a href="#2017-11-13" class="headerlink" title="2017.11.13"></a>2017.11.13</h2><h3 id="package-json-中-devDependencies-和-dependencies-的区别"><a href="#package-json-中-devDependencies-和-dependencies-的区别" class="headerlink" title="package.json 中 devDependencies 和 dependencies 的区别"></a>package.json 中 devDependencies 和 dependencies 的区别</h3><p>我们在使用<code>npm install xxx</code>安装模块或插件的时候，有两种命令把他们写入到 package.json 文件中，比如</p>
<ul>
<li><code>npm install xxx --save-dev</code></li>
<li><code>npm install xxx --save</code></li>
</ul>
<p>其中后缀为<code>--save-dev</code>安装的插件会被写入到 devDependencies 对象里面去，而后缀为<code>--save</code>安装的插件，则被写入到 dependencies 对象里面去。devDependencies  里面的插件只用于开发环境，不用于生产环境，而 dependencies  是需要发布到生产环境的。例如 babel 插件是将 ES6 语法转换成兼容性更好的 ES5 语法，所以只是开发阶段使用这个插件，但是不需要部署到服务器这个部署生产环境中，所以安装这个插件的时候都是使用<code>npm install b</code></p>
<h2 id="2017-11-16"><a href="#2017-11-16" class="headerlink" title="2017.11.16"></a>2017.11.16</h2><h3 id="实时渲染和离线渲染"><a href="#实时渲染和离线渲染" class="headerlink" title="实时渲染和离线渲染"></a>实时渲染和离线渲染</h3><p>画面渲染可以分为两种，一是3D游戏里的实时渲染(Real-time Rendering)，二就是动画电影用到的离线渲染(Offline Rendering)。前者因为需要保证速度而不得不在画质上做出妥协，后者则可以为了追求真实感而不计成本。</p>
<h2 id="2017-11-20"><a href="#2017-11-20" class="headerlink" title="2017.11.20"></a>2017.11.20</h2><h3 id="一种常见的声明变量的方式"><a href="#一种常见的声明变量的方式" class="headerlink" title="一种常见的声明变量的方式"></a>一种常见的声明变量的方式</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d = d || &#123;&#125;;</span><br></pre></td></tr></table></figure>
<p>此种用法一般用于函数内部，根据函数是否有对应的参数传入，如果又对应的参数就是其本身，如果没有 d 为一个空对象</p>
]]></content>
      
        <categories>
            
            <category> 学习日记 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 理解计算机 </tag>
            
            <tag> 计算机网络 </tag>
            
            <tag> Web前端 </tag>
            
            <tag> CSS </tag>
            
            <tag> HTML </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[常用 Git 命令清单]]></title>
      <url>/2017/09/12/%E5%B8%B8%E7%94%A8-Git-%E5%91%BD%E4%BB%A4%E6%B8%85%E5%8D%95/</url>
      <content type="html"><![CDATA[<p>日常使用 Git ，但是有一些不常用的命令就是记不住，老要去翻。现在特意列出一个命令清单，记录一下常用命令，以备不时之需</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fjgzpxlxdkj20sa0nuq4k.jpg" width="600" height="200" align="center/"></p>
<a id="more"></a>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2015/bg2015120901.png" alt="Git示意图"></p>
<p>几个专用名词的译名如下：</p>
<ul>
<li>workspace：工作区</li>
<li>Index / Stage：暂存区</li>
<li>Repository：仓库区（本地仓库）</li>
<li>Remote：远程仓库</li>
</ul>
<h2 id="新建代码库"><a href="#新建代码库" class="headerlink" title="新建代码库"></a>新建代码库</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 在当前目录新建一个Git代码库</span><br><span class="line">$ git init</span><br><span class="line"></span><br><span class="line"># 新建一个目录，将其初始化为Git代码库</span><br><span class="line">$ git init [project-name]</span><br><span class="line"></span><br><span class="line"># 下载一个项目和它的整个代码历史</span><br><span class="line">$ git clone [url]</span><br></pre></td></tr></table></figure>
<h2 id="增加-删除文件"><a href="#增加-删除文件" class="headerlink" title="增加/删除文件"></a>增加/删除文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># 添加指定文件到暂存区</span><br><span class="line">$ git add [file1] [file2] ...</span><br><span class="line"></span><br><span class="line"># 添加指定目录到暂存区，包括子目录</span><br><span class="line">$ git add [dir]</span><br><span class="line"></span><br><span class="line"># 添加当前目录的所有文件到暂存区</span><br><span class="line">$ git add .</span><br><span class="line"></span><br><span class="line"># 添加每个变化前，都会要求确认</span><br><span class="line"># 对于同一个文件的多处变化，可以实现分次提交</span><br><span class="line">$ git add -p</span><br><span class="line"></span><br><span class="line"># 删除工作区文件，并且将这次删除放入暂存区</span><br><span class="line">$ git rm [file1] [file2] ...</span><br><span class="line"></span><br><span class="line"># 停止追踪指定文件，但该文件会保留在工作区</span><br><span class="line">$ git rm --cached [file]</span><br><span class="line"></span><br><span class="line"># 改名文件，并且将这个改名放入暂存区</span><br><span class="line">$ git mv [file-original] [file-renamed]</span><br></pre></td></tr></table></figure>
<h2 id="代码提交"><a href="#代码提交" class="headerlink" title="代码提交"></a>代码提交</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># 提交暂存区到仓库区</span><br><span class="line">$ git commit -m [message]</span><br><span class="line"></span><br><span class="line"># 提交暂存区的指定文件到仓库区</span><br><span class="line">$ git commit [file1] [file2] ... -m [message]</span><br><span class="line"></span><br><span class="line"># 提交工作区自上次commit之后的变化，直接到仓库区</span><br><span class="line">$ git commit -a</span><br><span class="line"></span><br><span class="line"># 提交时显示所有diff信息</span><br><span class="line">$ git commit -v</span><br><span class="line"></span><br><span class="line"># 使用一次新的commit，替代上一次提交</span><br><span class="line"># 如果代码没有任何新变化，则用来改写上一次commit的提交信息</span><br><span class="line">$ git commit --amend -m [message]</span><br><span class="line"></span><br><span class="line"># 重做上一次commit，并包括指定文件的新变化</span><br><span class="line">$ git commit --amend [file1] [file2] ...</span><br></pre></td></tr></table></figure>
<h2 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"># 列出所有本地分支</span><br><span class="line">$ git branch</span><br><span class="line"></span><br><span class="line"># 列出所有远程分支</span><br><span class="line">$ git branch -r</span><br><span class="line"></span><br><span class="line"># 列出所有本地分支和远程分支</span><br><span class="line">$ git branch -a</span><br><span class="line"></span><br><span class="line"># 新建一个分支，但依然停留在当前分支</span><br><span class="line">$ git branch [branch-name]</span><br><span class="line"></span><br><span class="line"># 新建一个分支，并切换到该分支</span><br><span class="line">$ git checkout -b [branch]</span><br><span class="line"></span><br><span class="line"># 新建一个分支，指向指定commit</span><br><span class="line">$ git branch [branch] [commit]</span><br><span class="line"></span><br><span class="line"># 新建一个分支，与指定的远程分支建立追踪关系</span><br><span class="line">$ git branch --track [branch] [remote-branch]</span><br><span class="line"></span><br><span class="line"># 切换到指定分支，并更新工作区</span><br><span class="line">$ git checkout [branch-name]</span><br><span class="line"></span><br><span class="line"># 切换到上一个分支</span><br><span class="line">$ git checkout -</span><br><span class="line"></span><br><span class="line"># 建立追踪关系，在现有分支与指定的远程分支之间</span><br><span class="line">$ git branch --set-upstream [branch] [remote-branch]</span><br><span class="line"></span><br><span class="line"># 合并指定分支到当前分支</span><br><span class="line">$ git merge [branch]</span><br><span class="line"></span><br><span class="line"># 选择一个commit，合并进当前分支</span><br><span class="line">$ git cherry-pick [commit]</span><br><span class="line"></span><br><span class="line"># 删除分支</span><br><span class="line">$ git branch -d [branch-name]</span><br><span class="line"></span><br><span class="line"># 删除远程分支</span><br><span class="line">$ git push origin --delete [branch-name]</span><br><span class="line">$ git branch -dr [remote/branch]</span><br></pre></td></tr></table></figure>
<h2 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># 列出所有tag</span><br><span class="line">$ git tag</span><br><span class="line"></span><br><span class="line"># 新建一个tag在当前commit</span><br><span class="line">$ git tag [tag]</span><br><span class="line"></span><br><span class="line"># 新建一个tag在指定commit</span><br><span class="line">$ git tag [tag] [commit]</span><br><span class="line"></span><br><span class="line"># 删除本地tag</span><br><span class="line">$ git tag -d [tag]</span><br><span class="line"></span><br><span class="line"># 删除远程tag</span><br><span class="line">$ git push origin :refs/tags/[tagName]</span><br><span class="line"></span><br><span class="line"># 查看tag信息</span><br><span class="line">$ git show [tag]</span><br><span class="line"></span><br><span class="line"># 提交指定tag</span><br><span class="line">$ git push [remote] [tag]</span><br><span class="line"></span><br><span class="line"># 提交所有tag</span><br><span class="line">$ git push [remote] --tags</span><br><span class="line"></span><br><span class="line"># 新建一个分支，指向某个tag</span><br><span class="line">$ git checkout -b [branch] [tag]</span><br></pre></td></tr></table></figure>
<h2 id="查看信息"><a href="#查看信息" class="headerlink" title="查看信息"></a>查看信息</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"># 显示有变更的文件</span><br><span class="line">$ git status</span><br><span class="line"></span><br><span class="line"># 显示当前分支的版本历史</span><br><span class="line">$ git log</span><br><span class="line"></span><br><span class="line"># 显示commit历史，以及每次commit发生变更的文件</span><br><span class="line">$ git log --stat</span><br><span class="line"></span><br><span class="line"># 搜索提交历史，根据关键词</span><br><span class="line">$ git log -S [keyword]</span><br><span class="line"></span><br><span class="line"># 显示某个commit之后的所有变动，每个commit占据一行</span><br><span class="line">$ git log [tag] HEAD --pretty=format:%s</span><br><span class="line"></span><br><span class="line"># 显示某个commit之后的所有变动，其&quot;提交说明&quot;必须符合搜索条件</span><br><span class="line">$ git log [tag] HEAD --grep feature</span><br><span class="line"></span><br><span class="line"># 显示某个文件的版本历史，包括文件改名</span><br><span class="line">$ git log --follow [file]</span><br><span class="line">$ git whatchanged [file]</span><br><span class="line"></span><br><span class="line"># 显示指定文件相关的每一次diff</span><br><span class="line">$ git log -p [file]</span><br><span class="line"></span><br><span class="line"># 显示过去5次提交</span><br><span class="line">$ git log -5 --pretty --oneline</span><br><span class="line"></span><br><span class="line"># 显示所有提交过的用户，按提交次数排序</span><br><span class="line">$ git shortlog -sn</span><br><span class="line"></span><br><span class="line"># 显示指定文件是什么人在什么时间修改过</span><br><span class="line">$ git blame [file]</span><br><span class="line"></span><br><span class="line"># 显示暂存区和工作区的差异</span><br><span class="line">$ git diff</span><br><span class="line"></span><br><span class="line"># 显示暂存区和上一个commit的差异</span><br><span class="line">$ git diff --cached [file]</span><br><span class="line"></span><br><span class="line"># 显示工作区与当前分支最新commit之间的差异</span><br><span class="line">$ git diff HEAD</span><br><span class="line"></span><br><span class="line"># 显示两次提交之间的差异</span><br><span class="line">$ git diff [first-branch]...[second-branch]</span><br><span class="line"></span><br><span class="line"># 显示今天你写了多少行代码</span><br><span class="line">$ git diff --shortstat &quot;@&#123;0 day ago&#125;&quot;</span><br><span class="line"></span><br><span class="line"># 显示某次提交的元数据和内容变化</span><br><span class="line">$ git show [commit]</span><br><span class="line"></span><br><span class="line"># 显示某次提交发生变化的文件</span><br><span class="line">$ git show --name-only [commit]</span><br><span class="line"></span><br><span class="line"># 显示某次提交时，某个文件的内容</span><br><span class="line">$ git show [commit]:[filename]</span><br><span class="line"></span><br><span class="line"># 显示当前分支的最近几次提交</span><br><span class="line">$ git reflog</span><br></pre></td></tr></table></figure>
<h2 id="远程同步"><a href="#远程同步" class="headerlink" title="远程同步"></a>远程同步</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># 下载远程仓库的所有变动</span><br><span class="line">$ git fetch [remote]</span><br><span class="line"></span><br><span class="line"># 显示所有远程仓库</span><br><span class="line">$ git remote -v</span><br><span class="line"></span><br><span class="line"># 显示某个远程仓库的信息</span><br><span class="line">$ git remote show [remote]</span><br><span class="line"></span><br><span class="line"># 增加一个新的远程仓库，并命名</span><br><span class="line">$ git remote add [shortname] [url]</span><br><span class="line"></span><br><span class="line"># 取回远程仓库的变化，并与本地分支合并</span><br><span class="line">$ git pull [remote] [branch]</span><br><span class="line"></span><br><span class="line"># 上传本地指定分支到远程仓库</span><br><span class="line">$ git push [remote] [branch]</span><br><span class="line"></span><br><span class="line"># 强行推送当前分支到远程仓库，即使有冲突</span><br><span class="line">$ git push [remote] --force</span><br><span class="line"></span><br><span class="line"># 推送所有分支到远程仓库</span><br><span class="line">$ git push [remote] --all</span><br></pre></td></tr></table></figure>
<h2 id="撤销"><a href="#撤销" class="headerlink" title="撤销"></a>撤销</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"># 恢复暂存区的指定文件到工作区</span><br><span class="line">$ git checkout [file]</span><br><span class="line"></span><br><span class="line"># 恢复某个commit的指定文件到暂存区和工作区</span><br><span class="line">$ git checkout [commit] [file]</span><br><span class="line"></span><br><span class="line"># 恢复暂存区的所有文件到工作区</span><br><span class="line">$ git checkout .</span><br><span class="line"></span><br><span class="line"># 重置暂存区的指定文件，与上一次commit保持一致，但工作区不变</span><br><span class="line">$ git reset [file]</span><br><span class="line"></span><br><span class="line"># 重置暂存区与工作区，与上一次commit保持一致</span><br><span class="line">$ git reset --hard</span><br><span class="line"></span><br><span class="line"># 重置当前分支的指针为指定commit，同时重置暂存区，但工作区不变</span><br><span class="line">$ git reset [commit]</span><br><span class="line"></span><br><span class="line"># 重置当前分支的HEAD为指定commit，同时重置暂存区和工作区，与指定commit一致</span><br><span class="line">$ git reset --hard [commit]</span><br><span class="line"></span><br><span class="line"># 重置当前HEAD为指定commit，但保持暂存区和工作区不变</span><br><span class="line">$ git reset --keep [commit]</span><br><span class="line"></span><br><span class="line"># 新建一个commit，用来撤销指定commit</span><br><span class="line"># 后者的所有变化都将被前者抵消，并且应用到当前分支</span><br><span class="line">$ git revert [commit]</span><br><span class="line"></span><br><span class="line"># 暂时将未提交的变化移除，稍后再移入</span><br><span class="line">$ git stash</span><br><span class="line">$ git stash pop</span><br></pre></td></tr></table></figure>
<blockquote>
<p>原作者：<a href="http://www.ruanyifeng.com/" target="_blank" rel="noopener">阮一峰</a></p>
<p>原文地址：<a href="http://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html" target="_blank" rel="noopener">常用 Git 命令清单</a></p>
</blockquote>
]]></content>
      
        <categories>
            
            <category> 学习总结 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Git </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[前端大讲座]]></title>
      <url>/2017/09/03/%E5%89%8D%E7%AB%AF%E5%A4%A7%E8%AE%B2%E5%BA%A7/</url>
      <content type="html"><![CDATA[<p>之前一直以为 Web 前端就是三剑客 JavaScript、CSS、HTML的天下，直到昨晚看见一片微信推送，特别是文章的后面两个章节，让我对前端的概念有了一个更加全面的了解，因此特意转载过来供大家学习</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj7m0402ajj20m50fqjtm.jpg" width="600" height="200" align="center/"></p>
<a id="more"></a>
<p>本文的分享主要分为以下三个部分</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj690posczj20m60fq41v.jpg" alt="主要内容"></p>
<p>由于目前计算机专业还没有为 Web 前端技术设立专门的课程，每位同学对前端的了解程度也不一样，今天的讲座会以最浅显的方式来为大家介绍 “前端”，帮助大家建立一个基本的概念。</p>
<h2 id="前端是什么"><a href="#前端是什么" class="headerlink" title="前端是什么"></a>前端是什么</h2><p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj696lon5cj20n50gfgmv.jpg" alt="前端是什么"></p>
<p>在回答这个问题之前，我想到了一道面试题：</p>
<blockquote>
<p>当我们在浏览器中输入网址并按回车之后，接下来会发生什么？</p>
</blockquote>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj6977w2kdj20n50gggn1.jpg" alt=""></p>
<p>我们来简单地看一看 “网页展现” 的整个过程。</p>
<p>比如这里有一个用户，它需要访问 <code>abc.com</code> 这个网址。一般来说，当用户输入一个域名时，是在请求一个 HTML 资源。当他完成域名解析之后，他的浏览器会向 <code>abc.com</code> 这个域名所指向的 Web 服务器发出请求。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj697mdxlrj20n50gfmy8.jpg" alt=""></p>
<p>有时候 Web 服务器直接就可以返回用户的请求了；有时候 Web 服务器还需要向数据库查询一些数据，然后才能把处理结果返回给用户。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj69821eoaj20n70gejt2.jpg" alt=""></p>
<p>当用户的浏览器拿到服务器返回的 HTML 资源之后，就开始解析并显示 HTML 的内容了。</p>
<p>一般来说，HTML 页面需要 CSS 资源来描述页面的样式。比如浏览器在解析 HTML 时发现了一个 CSS 外链 <code>abc.com/a.css</code>，它就会去请求这个资源。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj698h2piqj20n40gf76o.jpg" alt=""></p>
<p>HTML 页面往往还需要加载外部的 JS 资源，比如 <code>abc.com/a.js</code>，此时浏览器同样会向服务器请求这个资源。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj698r0hbpj20n50gfwhu.jpg" alt=""></p>
<p>当所需的资源都加载完成之后，这个页面就可以提供完整的外观和功能了。整个过程差不多就是这个样子了。</p>
<p>我们看一看这张流程图，可以在中间画一道竖线，把它分成左右两个部分。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj69ctmf66j20n40ggn1y.jpg" alt=""></p>
<p>我们会发现，这道线左侧的事情发生在浏览器端，我们称之为 “前端”；右侧的事情发生在服务器端，称为 “后端”。（“前端” 之所以叫 “前端”，是因为它离用户更近一些。）</p>
<p>大家都学过后端开发的相关课程，对后端这一块应该都比较熟悉了。那问题来了：在上面这个过程中，后端有哪些局限？</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj69ctlpcxj20n40gfwjq.jpg" alt=""></p>
<ul>
<li>服务器一旦把资源提供给浏览器之后，便失去对内容的影响。</li>
<li>服务器无法得知用户在浏览器里做了什么，无法与用户交互。</li>
</ul>
<p>这意味着，只有当用户下一次向服务器请求资源时，服务器才有机会再次决定用户看到的内容。那么，用户什么时候再向后端请求资源呢？</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj69cth7ydj20n50ggwit.jpg" alt=""></p>
<p>第一种情况是 “导航动作”。比如用户刷新页面、点击链接、点击浏览器的前进/后退等等。</p>
<p>第二种情况是用户提交表单。表单是最传统的页面交互方式之一，提交表单时浏览器会向服务器发出新请求——这意味着浏览器会跳转到一个新的地址，服务器会在新页面中显示表单的处理结果。</p>
<p>还有一种特殊情况，就是服务器在给浏览器返回 HTML 资源时，在页面中插入一个特殊的标记，浏览器看到这个标记就会在一定的时间后自动刷新当前页面或跳转到其它页面，相当于服务器强制用户再次发出请求。可想而知，这种非用户意愿驱动的页面跳转行为并不讨人喜欢，因此已经不常用了。</p>
<p>在传统网页中，上述几种用户与服务器之间的交互方式也算够用了。不过随着网页形态的不断演进，用户对网页体验提出了更高的要求，很多时候网页不仅仅是一篇静止的文档，而更像是一个应用程序，用户随时可能与之互动。这个时候，前端的价值就体现出来了。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj69ctgp7oj20n50gegoj.jpg" alt=""></p>
<ul>
<li>用户从停留在当前页面到发起新请求的这段时间内，前端可以控制页面内容。</li>
<li>当用户停留在当前页面时，前端有能力与用户交互。由于前端的 JS 可以监听用户在浏览器中的各种行为（比如鼠标点击、键盘输入、滚动页面等等），前端就可以针对这些行为作出相应的反馈。</li>
</ul>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj69iv3rz1j20n30ggq7r.jpg" alt=""></p>
<p>在前端与用户的交互过程中，有些事情光靠前端就可以做出响应。比如我们在网页上做了一个计算器的功能，当用户输入算式之后，JS 就可以直接计算出结果并显示给用户。整个过程不需要服务器的参与就可以完成。</p>
<p>但有些事情，光有前端是无法完成的。此时前端就需要交给后端来处理，拿到处理结果之后再交给用户。在这个过程中，前端可以让用户一直停留在当前页面，交互过程具有良好的连续性。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj69iv2hndj20n40ggta8.jpg" alt=""></p>
<p>那么，前端如何把任务交给后端并拿到后端处理的结果呢？主要有两种方式：Ajax 和 Socket 连接。</p>
<p>Ajax 是最常见的前后端交互方式。它以 “请求→响应” 的方式来完成前后端的信息传递。传统的表单交互需求几乎都可以由 Ajax 改造为 “原地提交并获取反馈” 的交互方式，不需要跳转页面，从而有效提升用户体验。</p>
<p>而对于实时性比较高的场景，Socket 连接就是一个更好的选择。它的工作方式是前后端建立一个持续的连接，信息可以随时由前端发向后端，或由后端推送到前端。如果我们要建立一个实时对话的应用，通常就会用到 Socket 连接了。</p>
<h2 id="前端需要用到哪些技术"><a href="#前端需要用到哪些技术" class="headerlink" title="前端需要用到哪些技术"></a>前端需要用到哪些技术</h2><p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj69iv3kpij20n30ggwgw.jpg" alt=""></p>
<p>说到前端技术，我们通常都会说到 “三大块”：</p>
<ul>
<li>HTML</li>
<li>CSS</li>
<li>JS</li>
</ul>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj69iv47fcj20n50gjjsc.jpg" alt=""></p>
<p>这是前端最核心的三项技术。</p>
<p>接下来，我们就会说到 “前端的分层架构”。这个架构的原则就是 “让合适的技术去做合适的事情”。一个网页从逻辑上可以视为这三层的有机结合体：</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj69t6t2fnj20n50gfwhf.jpg" alt=""></p>
<ul>
<li><strong>结构层</strong>：这一层的作用是表述一个页面中有哪些信息，以及这些信息之间的关系是什么。这一层在技术上是由 HTML 来实现的。</li>
<li><strong>表现层</strong>：这一层决定了页面中的信息会以什么样的外观呈现出来。这一层由 CSS 来实现。</li>
<li><strong>行为层</strong>：这一层控制了页面如何与用户进行交互。在传统的展示型网页中，可能只需要 “结构层” 和 “表现层” 就足以提供完整的功能；而现代网页承载了越来越多的交互，这就推动 “行为层” 的能力不断增强。这一层由 JS 来实现。</li>
</ul>
<p>我们通过一个实例来理解这个分层架构。</p>
<p>比如我是一个百姓网的用户，我打开了 “用户中心” 中的 “我发布的信息” 这个页面</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj69t6w4vgj20n70ghwhv.jpg" alt=""></p>
<p>这个页面的 HTML 描述了信息以及信息的结构。即使没有 CSS 和 JS 的辅助，这个页面仍然可以呈现出可理解的内容（参见上图）。页面顶部是一些导航元素，接下来的 “显示中的信息” 是一个标题，它又引出了一个列表。这个列表自然就是我在百姓网发布的所有信息了。（除了 “显示中的信息” 以外，页面后半段还有 “已删除的信息”，这里不再赘述。）</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj69t6v6rvj20n50gh7ar.jpg" alt=""></p>
<p>接下来，我们会在表现层下功夫，通过 CSS 来为页面中的各个元素设定外观。经过这一层的修饰之后，页面中的内容更加美观了；更重要的是，各元素的功能职责也更加直观易懂了（参见上图）。</p>
<p>这已经是一个挺不错的网页了，但接下来，我们还会通过 JS 来丰富它的功能，提升用户的使用效率。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj69t6xeqsj20n40gg119.jpg" alt=""></p>
<p>作为信息的发布者，我可能需要修改某条信息的内容，或对它进行 “刷新” 之类的操作。在传统的交互中，我需要在这个列表中点击需要操作的信息，然后在信息的详情页选择合适的操作。</p>
<p>我们可以把这个流程简化一下：我们在这个列表中为每条信息添加一个操作按钮，当用户点击某条信息的操作按钮时，我们就在页面中弹出一个操作面板，用户可以直接选择想要的操作，减少了中间环节（参见上图）。</p>
<p>由此可见，结构层、表现层、行为层这三者各有所长，共同构造了一个功能完备、体验良好的网页出来。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj69t6rnu0j20n70gg419.jpg" alt=""></p>
<p>除了基本的 “三大块” 之外，作为前端工程师，我们还需要掌握以下知识和技能：</p>
<ul>
<li><strong>HTTP 相关</strong>：由于前端资源都是浏览器通过网络下载的，因此我们有必要了解相关的网络协议。</li>
<li><strong>浏览器相关</strong>：前端代码运行在浏览器中，我们需要了解浏览器的各种特性，以及浏览器向我们提供的各种接口。</li>
<li><strong>前端性能优化</strong>：让网页更快，减少用户的等待，这也是前端工程师面临的重要课题。优化网页的前端性能，需要我们具备上面两项知识，并且掌握性能优化相关的工具和方法。</li>
<li><strong>图形图像</strong>：网页信息不仅包含文字，还包含图片、视频等多媒体信息。图片作为最常用媒体资源，需要我们掌握与其相关的技能。比如了解各种图片格式适用的场景、基本的图片处理方法等等。</li>
</ul>
<h2 id="前端的开发方式是怎样的"><a href="#前端的开发方式是怎样的" class="headerlink" title="前端的开发方式是怎样的"></a>前端的开发方式是怎样的</h2><p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj69t6q8j9j20n40gg0v9.jpg" alt=""></p>
<p>前面我们已经介绍了前端技术 “三大块”，然而在如今，当我们在编写这三块的代码时，已经不再 “裸写” 了。这意味着我们在开发阶段编写的代码与实际在浏览器环境中运行的代码已经不一样了，详细来说：</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj69t6zrxmj20n50gfdiv.jpg" alt=""></p>
<ul>
<li>我们通过模板语言来生成 HTML。</li>
<li>通过 CSS 预处理器来生成 CSS 代码。</li>
<li>通过 ES6+ 的语法和特性来编写 JS 代码。</li>
</ul>
<p>举例来看吧，以下三个例子展示了代码书写方式的演化。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj69t70pktj20n40ggq5z.jpg" alt=""></p>
<p>百姓网采用了 Jade 和 Jedi 这两种模板语言。在上图的代码中，我们仅仅使用了模板语言最基本的标记语法，还没有插入使用模板语言的任何逻辑能力。仅此一步，就可以看出模板语言带来的好处。</p>
<p>原先我们在写 HTML 代码时，会花费大量的精力在 <code>&lt;</code>、<code>/</code>、<code>&gt;</code> 这样的语法噪音上；同时，识别标签的嵌套关系也很费眼。幸运的是，Jade 和 Jedi 这样的现代模板语言把前端工程师解放了出来。它们通过缩进来表达嵌套关系，层级关系一目了然；语法更精练，表现力更强。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj69t6zx0ij20n40getc4.jpg" alt=""></p>
<p>在 CSS 方面，预处理器一方面通过更简洁的语法减轻开发者的书写负担，另一方面通过内置的逻辑能力增强了代码的表现力。举个例子，在使用原生 CSS 来写代码时，不同元素采用的相同颜色只能分散在代码各处；而采用了 CSS 预处理器之后，我们可以把相同意义的颜色通过变量的形式抽象出来，然后在代码各处调用即可。这样不仅便于后期维护，在平时读代码时也更容易理解代码意图。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj69zmwaykj20n40ggn0j.jpg" alt=""></p>
<p>在 JS 方面，我们开始享受 ES6+ 带来的新特征福利。ES（ECMAScript）是定义 JS 这门语言的标准规范，从第六版开始，ES 以每年一版的节奏持续快速地扩展着 JS 语言的能力。</p>
<p>在以往，如果我们要实现 “在数组中找出符合特定条件的成员” 的需求，往往需要借助 Underscore 这样的工具库，调用它的 <code>_.find()</code> 方法。而在 ES6 中，语言本身就扩展了数组的能力，我们只需要直接调用 <code>Array#find()</code> 接口即可。另外，像箭头函数这样的新语法也可以令代码进一步简化。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj69zn0jr2j20n50ggmyn.jpg" alt=""></p>
<p>在 HTML、CSS、JS 这三大块，我们放弃 “裸写”，采用 “更高级” 语言的目的在于：</p>
<ul>
<li>利用高级语言提供的 “逻辑能力” 来增强代码的表现力。</li>
<li>利用高级语言的 “语法糖” 和 “新特性” 来提升开发效率和舒适度。</li>
</ul>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj69zmvclpj20n70gggnp.jpg" alt=""></p>
<p>当然，采用这些更高级的语言也不是完全没有成本的。我们在开发阶段所用的语言已经不是纯粹的 HTML、CSS、JS 了，浏览器无法直接识别和运行。因此，当我们放弃 “裸写”，也就意味着：</p>
<ul>
<li>在部署流程中需要设立构建环节，把源码编译到浏览器环境可以运行的目标代码。</li>
<li>在开发阶段，需要有工具来实时监视并编译有变动的源码，以确保页面上呈现的是我们修改过的最新效果。</li>
</ul>
<p>在百姓网，前端架构组已经搭建好了必要的开发环境，开发者们只需要关注开发本身就可以了。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj6a1391w7j20n40gf0ux.jpg" alt=""></p>
<p>在企业级的前端开发中，我们还需要了解如下知识点：</p>
<ul>
<li><p><strong>模块化</strong>：模块化是最常见的编程实践之一，令我们的代码组织更加清晰、易维护。ES6 为 JS 增加了完善的模块化方案，我们的日常开发也已经迁移到了 ES6 模块规范之下。</p>
</li>
<li><p><strong>包管理</strong>：如何将开源社区中的优秀组件为我所用？这就不能不提 “npm” 这个最主流的 JS 包管理器。前端界优秀的开源项目几乎都发布到了 npm 的包仓库，我们日常开发中用到的第三方库也都是由 npm 来管理的。</p>
<p>打包工具可以把我们写的模块化的源码和第三方包整合到一起，形成页面所需的完整 JS 资源。“包管理器”、“模块化”、“打包工具” 的相互结合，基本上就是日常的 JS 代码组织方式。</p>
</li>
<li><p><strong>组件化</strong>：在传统的前端开发中，HTML、CSS、JS 这三块的代码有各自独立的文件，这些文件往往也分散在不同的目录结构中。</p>
<p>如果页面功能区块的划分足够清晰，开发者就可以用 “组件” 的概念来把页面拆分，整个页面会被视为多个组件的嵌套和组合；同时，开发者也倾向于把每个组件相关的 HTML、CSS、JS 代码整合到同一个目录（或同一个文件）中，便于管理和维护。</p>
<p>这就是 “组件化” 的开发模式。要实现这样的开发模式，通常需要前端框架和构建工具的配合。</p>
</li>
<li><p><strong>单页应用</strong>：HTML5 的 History API 为前端提供了控制浏览器导航行为的能力，配合 Ajax 无刷新更新页面内容的特性，我们可以在一个页面内实现应用的多视图切换，避免页面的频繁跳转，提供类似桌面应用的体验。比如 Gmail 等产品就是典型的单页应用模式，百姓网的大多数后台系统也都是单页应用。</p>
</li>
<li><p>其它实用的知识点，就留待大家在工作中慢慢发掘吧。</p>
</li>
</ul>
<blockquote>
<p>原文地址：<a href="http://mp.weixin.qq.com/s/DSFCm5npz988oDPVUTTxnw" target="_blank" rel="noopener">给不了解前端的同学讲前端</a></p>
<p>版权归原作者所有</p>
</blockquote>
]]></content>
      
        <categories>
            
            <category> 学习总结 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Web前端 </tag>
            
            <tag> 预处理器 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[JavaScript 开发进阶：理解 JavaScript 作用域和作用域链]]></title>
      <url>/2017/09/01/JavaScript-%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6%EF%BC%9A%E7%90%86%E8%A7%A3-JavaScript-%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%92%8C%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE/</url>
      <content type="html"><![CDATA[<p>作用域是 JavaScript 最重要的概念之一，想要学好 JavaScript 就需要理解 JavaScript 作用域和作用域链的工作原理。恰好看见一篇不错的博文，就转载过来以供学习理解</p>
<a id="more"></a>
<h2 id="JavaScript-作用域"><a href="#JavaScript-作用域" class="headerlink" title="JavaScript 作用域"></a>JavaScript 作用域</h2><p>任何程序设计语言都有作用域的概念，简单的说，作用域就是变量与函数的可访问范围，即作用域控制着变量与函数的可见性和生命周期。在 JavaScript 中，变量的作用域有全局作用域和局部作用域两种。</p>
<h3 id="全局作用域（Global-Scope）"><a href="#全局作用域（Global-Scope）" class="headerlink" title="全局作用域（Global Scope）"></a>全局作用域（Global Scope）</h3><p>在代码中任何地方都能访问到的对象拥有全局作用域，一般来说以下几种情形拥有全局作用域：</p>
<h4 id="最外层函数和在最外层函数外面定义的变量拥有全局作用域，例如："><a href="#最外层函数和在最外层函数外面定义的变量拥有全局作用域，例如：" class="headerlink" title="最外层函数和在最外层函数外面定义的变量拥有全局作用域，例如："></a>最外层函数和在最外层函数外面定义的变量拥有全局作用域，例如：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> authorName=<span class="string">"山边小溪"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> blogName=<span class="string">"梦想天空"</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">innerSay</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(blogName);</span><br><span class="line">    &#125;</span><br><span class="line">    innerSay();</span><br><span class="line">&#125;</span><br><span class="line">alert(authorName); <span class="comment">//山边小溪</span></span><br><span class="line">alert(blogName); <span class="comment">//脚本错误</span></span><br><span class="line">doSomething(); <span class="comment">//梦想天空</span></span><br><span class="line">innerSay() <span class="comment">//脚本错误</span></span><br></pre></td></tr></table></figure>
<h4 id="所有末定义直接赋值的变量自动声明为拥有全局作用域，例如："><a href="#所有末定义直接赋值的变量自动声明为拥有全局作用域，例如：" class="headerlink" title="所有末定义直接赋值的变量自动声明为拥有全局作用域，例如："></a>所有末定义直接赋值的变量自动声明为拥有全局作用域，例如：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> authorName=<span class="string">"山边小溪"</span>;</span><br><span class="line">    blogName=<span class="string">"梦想天空"</span>;</span><br><span class="line">    alert(authorName);</span><br><span class="line">&#125;</span><br><span class="line">doSomething(); <span class="comment">//山边小溪</span></span><br><span class="line">alert(blogName); <span class="comment">//梦想天空</span></span><br><span class="line">alert(authorName); <span class="comment">//脚本错误</span></span><br></pre></td></tr></table></figure>
<p>变量<code>blogName</code>拥有全局作用域，而<code>authorName</code>在函数外部无法访问到。</p>
<h4 id="所有-window-对象的属性拥有全局作用域"><a href="#所有-window-对象的属性拥有全局作用域" class="headerlink" title="所有 window 对象的属性拥有全局作用域"></a>所有 window 对象的属性拥有全局作用域</h4><p>一般情况下，window 对象的内置属性都拥有全局作用域，例如<code>window.name</code>、<code>window.location</code>、<code>window.top</code>等等。</p>
<h3 id="局部作用域（Local-Scope）"><a href="#局部作用域（Local-Scope）" class="headerlink" title="局部作用域（Local Scope）"></a>局部作用域（Local Scope）</h3><p>和全局作用域相反，局部作用域一般只在固定的代码片段内可访问到，最常见的例如函数内部，所有在一些地方也会看到有人把这种作用域称为函数作用域，例如下列代码中的<code>blogName</code>和函数<code>innerSay</code>都只拥有局部作用域</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> blogName=<span class="string">"梦想天空"</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">innerSay</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(blogName);</span><br><span class="line">    &#125;</span><br><span class="line">    innerSay();</span><br><span class="line">&#125;</span><br><span class="line">alert(blogName); <span class="comment">//脚本错误</span></span><br><span class="line">innerSay(); <span class="comment">//脚本错误</span></span><br></pre></td></tr></table></figure>
<h2 id="作用域链（Scope-Chain）"><a href="#作用域链（Scope-Chain）" class="headerlink" title="作用域链（Scope Chain）"></a>作用域链（Scope Chain）</h2><p>在 JavaScript 中，函数也是对象，实际上，JavaScript 里一切都是对象。函数对象和其它对象一样，拥有可以通过代码访问的属性和一系列仅供 JavaScript 引擎访问的内部属性。其中一个内部属性是 Scope ，由 ECMA-262 标准第三版定义，该内部属性 Scope 包含了函数被创建的作用域中对象的集合，这个集合被称为函数的作用域链，它决定了哪些数据能被函数访问。</p>
<p>当一个函数创建后，它的作用域链会被创建此函数的作用域中可访问的数据对象填充。例如定义下面这样一个函数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Add</span>(<span class="params">num1,num2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> sum = num1 + num2;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在函数add创建时，它的作用域链中会填入一个全局对象，该全局对象包含了所有全局变量，如下图所示（注意：图片只例举了全部变量中的一部分）：</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj3xtvvayqj20jc05dmyr.jpg" alt=""></p>
<p>函数 Add 的作用域将会在执行时用到。例如执行如下代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> total = Add(<span class="number">5</span>,<span class="number">10</span>);</span><br></pre></td></tr></table></figure>
<p>执行此函数时会创建一个称为“运行期上下文(execution context)”的内部对象，运行期上下文定义了函数执行时的环境。每个运行期上下文都有自己的作用域链，用于标识符解析，当运行期上下文被创建时，而它的作用域链初始化为当前运行函数内部属性 Scope 所包含的对象。</p>
<p>　　这些值按照它们出现在函数中的顺序被复制到运行期上下文的作用域链中。它们共同组成了一个新的对象，叫“活动对象(activation object)”，该对象包含了函数的所有局部变量、命名参数、参数集合以及this，然后此对象会被推入作用域链的前端，当运行期上下文被销毁，活动对象也随之销毁。新的作用域链如下图所示：</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj3xxtyi6aj20jc0bh77q.jpg" alt=""></p>
<p>在函数执行过程中，每遇到一个变量，都会经历一次标识符解析过程以决定从哪里获取和存储数据。该过程从作用域链头部，也就是从活动对象开始搜索，查找同名的标识符，如果找到了就使用这个标识符对应的变量，如果没找到继续搜索作用域链中的下一个对象，如果搜索完所有对象都未找到，则认为该标识符未定义。函数执行过程中，每个标识符都要经历这样的搜索过程。</p>
<h2 id="作用域链与代码优化"><a href="#作用域链与代码优化" class="headerlink" title="作用域链与代码优化"></a>作用域链与代码优化</h2><p>从作用域链的结构可以看出，在运行期上下文的作用域链中，标识符所在的位置越深，读写速度就会越慢。如上图所示，因为全局变量总是存在于运行期上下文作用域链的最末端，因此在标识符解析的时候，查找全局变量是最慢的。所以，在编写代码的时候应尽量少使用全局变量，尽可能使用局部变量。一个好的经验法则是：如果一个跨作用域的对象被引用了一次以上，则先把它存储到局部变量里再使用。例如下面的代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">changeColor</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">"btnChange"</span>).onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">document</span>.getElementById(<span class="string">"targetCanvas"</span>).style.backgroundColor=<span class="string">"red"</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个函数引用了两次全局变量document，查找该变量必须遍历整个作用域链，直到最后在全局对象中才能找到。这段代码可以重写如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">changeColor</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> doc=<span class="built_in">document</span>;</span><br><span class="line">    doc.getElementById(<span class="string">"btnChange"</span>).onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        doc.getElementById(<span class="string">"targetCanvas"</span>).style.backgroundColor=<span class="string">"red"</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这段代码比较简单，重写后不会显示出巨大的性能提升，但是如果程序中有大量的全局变量被从反复访问，那么重写后的代码性能会有显著改善。</p>
<h2 id="改变作用域"><a href="#改变作用域" class="headerlink" title="改变作用域"></a>改变作用域</h2><p>函数每次执行时对应的运行期上下文都是独一无二的，所以多次调用同一个函数就会导致创建多个运行期上下文，当函数执行完毕，执行上下文会被销毁。每一个运行期上下文都和一个作用域链关联。一般情况下，在运行期上下文运行的过程中，其作用域链只会被 with 语句和 catch 语句影响。</p>
<p>with 语句是对象的快捷应用方式，用来避免书写重复代码。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initUI</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">with</span>(<span class="built_in">document</span>)&#123;</span><br><span class="line">        <span class="keyword">var</span> bd=body,</span><br><span class="line">            links=getElementsByTagName(<span class="string">"a"</span>),</span><br><span class="line">            i=<span class="number">0</span>,</span><br><span class="line">            len=links.length;</span><br><span class="line">        <span class="keyword">while</span>(i &lt; len)&#123;</span><br><span class="line">            update(links[i++]);</span><br><span class="line">        &#125;</span><br><span class="line">        getElementById(<span class="string">"btnInit"</span>).onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            doSomething();</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里使用 with 语句来避免多次书写 document ，看上去更高效，实际上产生了性能问题。当代码运行到 with 语句时，运行期上下文的作用域链临时被改变了。一个新的可变对象被创建，它包含了参数指定的对象的所有属性。这个对象将被推入作用域链的头部，这意味着函数的所有局部变量现在处于第二个作用域链对象中，因此访问代价更高了。如下图所示：</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj3y4qex4nj20jd0ghq7v.jpg" alt=""></p>
<p>因此在程序中应避免使用 with 语句，在这个例子中，只要简单的把 document 存储在一个局部变量中就可以提升性能。</p>
<p>另外一个会改变作用域链的是 try-catch 语句中的 catch 语句。当 try 代码块中发生错误时，执行过程会跳转到 catch 语句，然后把异常对象推入一个可变对象并置于作用域的头部。在 catch 代码块内部，函数的所有局部变量将会被放在第二个作用域链对象中。示例代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    doSomething();</span><br><span class="line">&#125;<span class="keyword">catch</span>(ex)&#123;</span><br><span class="line">    alert(ex.message); <span class="comment">//作用域链在此处改变</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>请注意，一旦 catch 语句执行完毕，作用域链机会返回到之前的状态。try-catch 语句在代码调试和异常处理中非常有用，因此不建议完全避免。你可以通过优化代码来减少 catch 语句对性能的影响。一个很好的模式是将错误委托给一个函数处理，例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    doSomething();</span><br><span class="line">&#125;<span class="keyword">catch</span>(ex)&#123;</span><br><span class="line">    handleError(ex); <span class="comment">//委托给处理器方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>优化后的代码，handleError 方法是 catch 子句中唯一执行的代码。该函数接收异常对象作为参数，这样你可以更加灵活和统一的处理错误。由于只执行一条语句，且没有局部变量的访问，作用域链的临时改变就不会影响代码性能了。</p>
<blockquote>
<p>作者：山边小溪</p>
<p>出处：<a href="http://www.cnblogs.com/lhb25/archive/2011/09/06/javascript-scope-chain.html" target="_blank" rel="noopener">http://www.cnblogs.com/lhb25/archive/2011/09/06/javascript-scope-chain.html</a></p>
</blockquote>
]]></content>
      
        <categories>
            
            <category> 学习总结 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[JavaScript 游戏——Ping-Pong]]></title>
      <url>/2017/08/31/%E7%94%A8JavaScript%E5%86%99%E4%B8%80%E4%B8%AAPing-Pong%E6%B8%B8%E6%88%8F/</url>
      <content type="html"><![CDATA[<p>学习了一段时间 Web 前端后，就想写个项目练练手，后来就想到了这个 Ping-Pong 游戏，因为记得以前看有关电子游戏的纪录片时里面说到这个游戏是世界上第一款电子游戏，加上觉得项目难易度挺合适的，就撸起袖子加油干。游戏支持单人、双人玩家，所以欢迎各位无聊时拿来消消遣，搞搞基甚至撩撩妹，顺便找找 bug (逃)……</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj7nmyt4uhj21gf0r7glx.jpg" width="600" height="200" align="center/"></p>
<a id="more"></a>
<h2 id="项目效果"><a href="#项目效果" class="headerlink" title="项目效果"></a>项目效果</h2><p>在线游戏：<a href="http://barryliu1995.studio/PingPongGame/">PingPongGame(http://barryliu1995.studio/PingPongGame/)</a></p>
<p>GitHub 仓库：<a href="https://github.com/BarryLiu1995/PingPongGame" target="_blank" rel="noopener">BarryLiu1995/PingPongGame</a></p>
<p>项目详情请查阅 README 文件，也欢迎各位 star，fork！</p>
<h2 id="项目情况"><a href="#项目情况" class="headerlink" title="项目情况"></a>项目情况</h2><p>本项目使用 JavaScript 在 Canvas 作画，同时使用 <code>window.requestAnimationFrame()</code> 方法告诉浏览器逐帧更新画面，以形成动画效果。这是这个项目的基本原理。而使用 JavaScript 更新 canvas 上的内容就是该项目的重点难点。scripts 目录下的 game.js 是单人游戏的业务逻辑代码，double-game.js 是依赖于 game.js 的双人游戏业务逻辑代码。</p>
<h2 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"styles/index.css"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Ping-Pong<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"canvas"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">preload</span>=<span class="string">"true"</span> <span class="attr">id</span>=<span class="string">"collide"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">"sound/PingPong.mp3"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">"sound/PingPong.ogg"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"scripts/game.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"scripts/double-game.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="game-js"><a href="#game-js" class="headerlink" title="game.js"></a>game.js</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// RequestAnimationFrame(): a browser API for getting smooth animations</span></span><br><span class="line">requestAnimFrame = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">window</span>.requestAnimationFrame ||</span><br><span class="line">        <span class="built_in">window</span>.webkitRequestAnimationFrame ||</span><br><span class="line">        <span class="built_in">window</span>.mozRequestAnimationFrame ||</span><br><span class="line">        <span class="built_in">window</span>.oRequestAnimationFrame ||</span><br><span class="line">        <span class="built_in">window</span>.msRequestAnimationFrame ||</span><br><span class="line">        <span class="function"><span class="keyword">function</span> (<span class="params">callback</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">window</span>.setTimeout(callback, <span class="number">1000</span> / <span class="number">60</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line">cancelRequestAnimFrame = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">window</span>.cancelAnimationFrame ||</span><br><span class="line">        <span class="built_in">window</span>.webkitCancelRequestAnimationFrame ||</span><br><span class="line">        <span class="built_in">window</span>.mozCancelRequestAnimationFrame ||</span><br><span class="line">        <span class="built_in">window</span>.oCancelRequestAnimationFrame ||</span><br><span class="line">        <span class="built_in">window</span>.msCancelRequestAnimationFrame ||</span><br><span class="line">        clearTimeout</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Initialize canvas and required variables</span></span><br><span class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">"canvas"</span>),</span><br><span class="line">    ctx = canvas.getContext(<span class="string">"2d"</span>),      <span class="comment">// Create canvas context</span></span><br><span class="line">    W = <span class="built_in">window</span>.innerWidth,              <span class="comment">// Window's width</span></span><br><span class="line">    H = <span class="built_in">window</span>.innerHeight,             <span class="comment">// Window's height</span></span><br><span class="line">    particles = [],                     <span class="comment">// Array containing particles</span></span><br><span class="line">    ball = &#123;&#125;,                          <span class="comment">// Ball object</span></span><br><span class="line">    paddles = [<span class="number">2</span>],                      <span class="comment">// Array containing two paddles</span></span><br><span class="line">    mouse = &#123;&#125;,                         <span class="comment">// Mouse object to store it's current position</span></span><br><span class="line">    points = <span class="number">0</span>,                         <span class="comment">// variable to store points</span></span><br><span class="line">    particlesCount = <span class="number">20</span>,                <span class="comment">// Number of sparks when ball strikes the paddle</span></span><br><span class="line">    flag = <span class="number">0</span>,                           <span class="comment">// Flag variable which is changed on collision</span></span><br><span class="line">    particlePos = &#123;&#125;,                   <span class="comment">// Object to contain the position of collision</span></span><br><span class="line">    multiplier = <span class="number">0</span>,                     <span class="comment">// variable to control the direction of sparks</span></span><br><span class="line">    startBtn = &#123;&#125;,                      <span class="comment">// Start button object</span></span><br><span class="line">    restartBtn = &#123;&#125;,                    <span class="comment">// Restart button object</span></span><br><span class="line">    over = <span class="number">0</span>,                           <span class="comment">// flag variable, changed when the game is over</span></span><br><span class="line">    init,                               <span class="comment">// variable to initialize animation</span></span><br><span class="line">    paddleHit,                          <span class="comment">// variable about which paddle was hit</span></span><br><span class="line">    gameMode = <span class="number">0</span>;                       <span class="comment">// variable about how many gamer are playing</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Add mousemove and mousedown events to the canvas</span></span><br><span class="line">canvas.addEventListener(<span class="string">"mousemove"</span>, trackPosition, <span class="literal">true</span>);</span><br><span class="line">canvas.addEventListener(<span class="string">"mousedown"</span>, btnClick, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Initialise the collision sound</span></span><br><span class="line">collision = <span class="built_in">document</span>.getElementById(<span class="string">"collide"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Set the canvas's height and width to full screen</span></span><br><span class="line">canvas.width = W;</span><br><span class="line">canvas.height = H;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Function to paint canvas</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">paintCanvas</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    ctx.fillStyle = <span class="string">"black"</span>;</span><br><span class="line">    ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, W, H);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Function for creating paddles</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Paddle</span>(<span class="params">pos</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = pos;</span><br><span class="line">    <span class="keyword">this</span>.vx = <span class="number">16</span>;</span><br><span class="line">    <span class="comment">// Height and width</span></span><br><span class="line">    <span class="keyword">this</span>.h = <span class="number">8</span>;</span><br><span class="line">    <span class="keyword">this</span>.w = <span class="number">150</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Paddle's position</span></span><br><span class="line">    <span class="keyword">this</span>.x = W / <span class="number">2</span> - <span class="keyword">this</span>.w / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">this</span>.y = (<span class="keyword">this</span>.name == <span class="string">"top"</span>) ? <span class="number">0</span> : H - <span class="keyword">this</span>.h;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Push two new paddles into the paddles[] array</span></span><br><span class="line">paddles.push(<span class="keyword">new</span> Paddle(<span class="string">"bottom"</span>));</span><br><span class="line">paddles.push(<span class="keyword">new</span> Paddle(<span class="string">"top"</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Ball object</span></span><br><span class="line">ball = &#123;</span><br><span class="line">    x: <span class="number">20</span>,</span><br><span class="line">    y: <span class="number">20</span>,</span><br><span class="line">    r: <span class="number">9</span>,</span><br><span class="line">    c: <span class="string">"white"</span>,</span><br><span class="line">    vx: <span class="number">4</span>,</span><br><span class="line">    vy: <span class="number">8</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Function for drawing ball on canvas</span></span><br><span class="line">    draw: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        ctx.beginPath();</span><br><span class="line">        ctx.fillStyle = <span class="keyword">this</span>.c;</span><br><span class="line">        ctx.arc(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y, <span class="keyword">this</span>.r, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>, <span class="literal">false</span>);</span><br><span class="line">        ctx.fill();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Start Button object</span></span><br><span class="line">startBtn = &#123;</span><br><span class="line">    w: <span class="number">125</span>,</span><br><span class="line">    h: <span class="number">50</span>,</span><br><span class="line">    x: W / <span class="number">2</span>,</span><br><span class="line">    y: H / <span class="number">2</span> - <span class="number">25</span>,</span><br><span class="line"></span><br><span class="line">    draw: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        ctx.strokeStyle = <span class="string">"white"</span>;</span><br><span class="line">        ctx.lineWidth = <span class="string">"2"</span>;</span><br><span class="line"></span><br><span class="line">        ctx.strokeRect(<span class="keyword">this</span>.x - <span class="number">150</span>, <span class="keyword">this</span>.y, <span class="keyword">this</span>.w, <span class="keyword">this</span>.h);    <span class="comment">// single player game start button</span></span><br><span class="line">        ctx.strokeRect(<span class="keyword">this</span>.x + <span class="number">25</span>, <span class="keyword">this</span>.y, <span class="keyword">this</span>.w, <span class="keyword">this</span>.h);    <span class="comment">// double player game start button</span></span><br><span class="line"></span><br><span class="line">        ctx.font = <span class="string">"18px Arial, sans-serif"</span>;</span><br><span class="line">        ctx.textAlign = <span class="string">"center"</span>;</span><br><span class="line">        ctx.textBaseline = <span class="string">"middle"</span>;</span><br><span class="line">        ctx.fillStlye = <span class="string">"white"</span>;</span><br><span class="line"></span><br><span class="line">        ctx.fillText(<span class="string">"Single Player"</span>, W / <span class="number">2</span> - <span class="number">87.5</span>, H / <span class="number">2</span>);</span><br><span class="line">        ctx.fillText(<span class="string">"Double Player"</span>, W / <span class="number">2</span> + <span class="number">87.5</span>, H / <span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Restart Button object</span></span><br><span class="line">restartBtn = &#123;</span><br><span class="line">    w: <span class="number">125</span>,</span><br><span class="line">    h: <span class="number">50</span>,</span><br><span class="line">    x: W / <span class="number">2</span>,</span><br><span class="line">    y: H / <span class="number">2</span> - <span class="number">25</span>,</span><br><span class="line"></span><br><span class="line">    draw: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        ctx.strokeStyle = <span class="string">"white"</span>;</span><br><span class="line">        ctx.lineWidth = <span class="string">"2"</span>;</span><br><span class="line">        ctx.strokeRect(<span class="keyword">this</span>.x - <span class="number">150</span>, <span class="keyword">this</span>.y, <span class="keyword">this</span>.w, <span class="keyword">this</span>.h);       <span class="comment">// single player game restart button</span></span><br><span class="line">        ctx.strokeRect(<span class="keyword">this</span>.x + <span class="number">25</span>, <span class="keyword">this</span>.y, <span class="keyword">this</span>.w, <span class="keyword">this</span>.h);        <span class="comment">// double player game restart button</span></span><br><span class="line"></span><br><span class="line">        ctx.font = <span class="string">"18px Arial, sans-serif"</span>;</span><br><span class="line">        ctx.textAlign = <span class="string">"center"</span>;</span><br><span class="line">        ctx.textBaseline = <span class="string">"middle"</span>;</span><br><span class="line">        ctx.fillStlye = <span class="string">"white"</span>;</span><br><span class="line"></span><br><span class="line">        ctx.fillText(<span class="string">"Single Player"</span>, W / <span class="number">2</span> - <span class="number">87.5</span>, H / <span class="number">2</span>);</span><br><span class="line">        ctx.fillText(<span class="string">"Double Player"</span>, W / <span class="number">2</span> + <span class="number">87.5</span>, H / <span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Draw everything on canvas</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    paintCanvas();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//draw Paddles on canvas</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; paddles.length; i++) &#123;</span><br><span class="line">        p = paddles[i];</span><br><span class="line"></span><br><span class="line">        ctx.fillStyle = <span class="string">"white"</span>;</span><br><span class="line">        ctx.fillRect(p.x, p.y, p.w, p.h);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ball.draw();</span><br><span class="line">    update();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Function to update positions, score and everything.</span></span><br><span class="line"><span class="comment">// Basically, the main game logic is defined here</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">update</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update scores</span></span><br><span class="line">    updateScore();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Move the paddles on mouse move</span></span><br><span class="line">    <span class="keyword">if</span> (mouse.x &amp;&amp; mouse.y) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; paddles.length; i++) &#123;</span><br><span class="line">            p = paddles[i];</span><br><span class="line">            p.x = mouse.x - p.w / <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Move the ball</span></span><br><span class="line">    ball.x += ball.vx;</span><br><span class="line">    ball.y += ball.vy;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Collision with paddles</span></span><br><span class="line">    p1 = paddles[<span class="number">1</span>];</span><br><span class="line">    p2 = paddles[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// If the ball strikes with paddles,</span></span><br><span class="line">    <span class="comment">// invert the y-velocity vector of ball,</span></span><br><span class="line">    <span class="comment">// increment the points, play the collision sound,</span></span><br><span class="line">    <span class="comment">// save collision's position so that sparks can be</span></span><br><span class="line">    <span class="comment">// emitted from that position, set the flag variable,</span></span><br><span class="line">    <span class="comment">// and change the multiplier</span></span><br><span class="line">    <span class="keyword">if</span> (collides(ball, p1)) &#123;</span><br><span class="line">        collideAction(ball, p1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (collides(ball, p2)) &#123;</span><br><span class="line">        collideAction(ball, p2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Collide with walls, If the ball hits the top/bottom walls, run gameOver() function</span></span><br><span class="line">        <span class="keyword">if</span> (ball.y + ball.r &gt; H) &#123;</span><br><span class="line">            ball.y = H - ball.r;</span><br><span class="line">            gameOver();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (ball.y &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            ball.y = ball.r;</span><br><span class="line">            gameOver();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// If ball strikes the vertical walls, invert the</span></span><br><span class="line">        <span class="comment">// x-velocity vector of ball</span></span><br><span class="line">        <span class="keyword">if</span> (ball.x + ball.r &gt;= W) &#123;</span><br><span class="line">            ball.vx = -ball.vx;</span><br><span class="line">            ball.x = W - ball.r;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (ball.x - ball.r &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            ball.vx = -ball.vx;</span><br><span class="line">            ball.x = <span class="number">0</span> + ball.r;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// If flag is set, push the particles</span></span><br><span class="line">    <span class="keyword">if</span> (flag == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> k = <span class="number">0</span>; k &lt; particlesCount; k++) &#123;</span><br><span class="line">            particles.push(<span class="keyword">new</span> Particles(particlePos.x, particlePos.y, multiplier));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Emit particles/sparks</span></span><br><span class="line">    emitParticles();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// reset flag</span></span><br><span class="line">    flag = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Function for creating particles object</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Particles</span>(<span class="params">x, y, m</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.x = x;</span><br><span class="line">    <span class="keyword">this</span>.y = y;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.radius = <span class="number">1.2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.vx = <span class="number">-1.5</span> + <span class="built_in">Math</span>.random() * <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">this</span>.vy = m * <span class="built_in">Math</span>.random() * <span class="number">1.5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Function for updating score</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateScore</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"ball.vx: "</span> + ball.vx);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"ball.vy: "</span> + ball.vy);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"points: "</span> + points);</span><br><span class="line">    ctx.fillStlye = <span class="string">"white"</span>;</span><br><span class="line">    ctx.font = <span class="string">"16px Arial, sans-serif"</span>;</span><br><span class="line">    ctx.textAlign = <span class="string">"left"</span>;</span><br><span class="line">    ctx.textBaseline = <span class="string">"top"</span>;</span><br><span class="line">    ctx.fillText(<span class="string">"Score: "</span> + points, <span class="number">20</span>, <span class="number">40</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Function for emitting particles</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">emitParticles</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; particles.length; j++) &#123;</span><br><span class="line">        <span class="keyword">var</span> par = particles[j];</span><br><span class="line"></span><br><span class="line">        ctx.beginPath();</span><br><span class="line">        ctx.fillStyle = <span class="string">"white"</span>;</span><br><span class="line">        <span class="keyword">if</span> (par.radius &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            ctx.arc(par.x, par.y, par.radius, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>, <span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        ctx.fill();</span><br><span class="line"></span><br><span class="line">        par.x += par.vx;</span><br><span class="line">        par.y += par.vy;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Reduce radius so that the particles die after a few seconds</span></span><br><span class="line">        par.radius = <span class="built_in">Math</span>.max(par.radius - <span class="number">0.05</span>, <span class="number">0.0</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Function to check collision between ball and one of</span></span><br><span class="line"><span class="comment">//the paddles</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">collides</span>(<span class="params">b, p</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (b.x &gt;= p.x &amp;&amp; b.x &lt;= p.x + p.w) &#123;</span><br><span class="line">        <span class="keyword">if</span> (b.y &gt;= (p.y - ball.r) &amp;&amp; p.y &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            paddleHit = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (b.y &lt;= p.h + ball.r &amp;&amp; p.y == <span class="number">0</span>) &#123;</span><br><span class="line">            paddleHit = <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Do this when collides == true</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">collideAction</span>(<span class="params">ball, p</span>) </span>&#123;</span><br><span class="line">    ball.vy = -ball.vy;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (paddleHit == <span class="number">1</span>) &#123;</span><br><span class="line">        ball.y = p.y - ball.r;</span><br><span class="line">        particlePos.y = ball.y + ball.r;</span><br><span class="line">        multiplier = <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (paddleHit == <span class="number">2</span>) &#123;</span><br><span class="line">        ball.y = p.h + ball.r;</span><br><span class="line">        particlePos.y = ball.y - ball.r;</span><br><span class="line">        multiplier = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// This variable relates to the increase in the speed of the ball,</span></span><br><span class="line">    <span class="comment">// so no matter how many player have will calculate this variable</span></span><br><span class="line">    points++;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// When there are two players,</span></span><br><span class="line">    <span class="comment">// will be based on the game to calculate their respective scores</span></span><br><span class="line">    <span class="keyword">if</span> (gameMode === <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (paddleHit === <span class="number">1</span>) &#123;</span><br><span class="line">            bottomScore++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (paddleHit === <span class="number">2</span>) &#123;</span><br><span class="line">            topScore++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    increaseSpd();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Collision sound will be made</span></span><br><span class="line">    <span class="keyword">if</span> (collision) &#123;</span><br><span class="line">        <span class="keyword">if</span> (points &gt; <span class="number">0</span>)</span><br><span class="line">            collision.pause();</span><br><span class="line"></span><br><span class="line">        collision.currentTime = <span class="number">0</span>;</span><br><span class="line">        collision.play();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    particlePos.x = ball.x;</span><br><span class="line">    flag = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Function to increase speed after every 5 points</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">increaseSpd</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ((points + <span class="number">1</span>) % <span class="number">5</span> == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">Math</span>.abs(ball.vx) &lt; <span class="number">15</span>) &#123;</span><br><span class="line">            ball.vx += (ball.vx &lt; <span class="number">0</span>) ? <span class="number">-1</span> : <span class="number">1</span>;</span><br><span class="line">            ball.vy += (ball.vy &lt; <span class="number">0</span>) ? <span class="number">-2</span> : <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Track the position of mouse cursor</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">trackPosition</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    mouse.x = e.pageX;</span><br><span class="line">    mouse.y = e.pageY;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Function to run when the game overs</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">gameOver</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    ctx.fillStlye = <span class="string">"white"</span>;</span><br><span class="line">    ctx.font = <span class="string">"20px Arial, sans-serif"</span>;</span><br><span class="line">    ctx.textAlign = <span class="string">"center"</span>;</span><br><span class="line">    ctx.textBaseline = <span class="string">"middle"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// According to the number of different players show the current score</span></span><br><span class="line">    <span class="keyword">if</span> (gameMode === <span class="number">1</span>) &#123;</span><br><span class="line">        ctx.fillText(<span class="string">"Game Over - You scored "</span> + points + <span class="string">" points!"</span>, W / <span class="number">2</span>, H / <span class="number">2</span> + <span class="number">50</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (gameMode === <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (topScore &gt; bottomScore) &#123;</span><br><span class="line">            ctx.fillText(<span class="string">"Player 1 Win!!! - You scored "</span> + topScore + <span class="string">" points!"</span>, W / <span class="number">2</span>, H / <span class="number">2</span> + <span class="number">50</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (topScore &lt; bottomScore) &#123;</span><br><span class="line">            ctx.fillText(<span class="string">"Player 2 Win!!! - You scored "</span> + bottomScore + <span class="string">" points!"</span>, W / <span class="number">2</span>, H / <span class="number">2</span> + <span class="number">50</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            ctx.fillText(<span class="string">"Both are Winner!!! - You scored "</span> + topScore + <span class="string">" points!"</span>, W / <span class="number">2</span>, H / <span class="number">2</span> + <span class="number">50</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ctx.fillStlye = <span class="string">"white"</span>;</span><br><span class="line">    ctx.font = <span class="string">"35px Arial, sans-serif"</span>;</span><br><span class="line">    ctx.textAlign = <span class="string">"center"</span>;</span><br><span class="line">    ctx.textBaseline = <span class="string">"middle"</span>;</span><br><span class="line">    ctx.fillText(<span class="string">"Restart"</span>, W / <span class="number">2</span>, H / <span class="number">2</span> - <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Stop the Animation</span></span><br><span class="line">    cancelRequestAnimFrame(init);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Set the over flag</span></span><br><span class="line">    over = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Show the restart button</span></span><br><span class="line">    restartBtn.draw();</span><br><span class="line"></span><br><span class="line">    reset();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Function for running the whole animation</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">animloop</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    init = requestAnimFrame(animloop);</span><br><span class="line">    <span class="keyword">if</span> (gameMode === <span class="number">1</span>) &#123;</span><br><span class="line">        draw();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (gameMode === <span class="number">2</span>) &#123;</span><br><span class="line">        paint();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// On button click (Restart and start)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">btnClick</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Variables for storing mouse position on click</span></span><br><span class="line">    <span class="keyword">var</span> mx = e.pageX,</span><br><span class="line">        my = e.pageY;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Click Single Player start button</span></span><br><span class="line">    <span class="keyword">if</span> (mx &gt;= startBtn.x - <span class="number">150</span> &amp;&amp; mx &lt;= startBtn.x - <span class="number">25</span> &amp;&amp;</span><br><span class="line">        my &gt;= startBtn.y &amp;&amp; my &lt;= startBtn.y + startBtn.h) &#123;</span><br><span class="line">        gameMode = <span class="number">1</span>;</span><br><span class="line">        animloop();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Click Double Player start button</span></span><br><span class="line">    <span class="keyword">if</span> (mx &gt;= startBtn.x + <span class="number">25</span> &amp;&amp; mx &lt;= startBtn.x + <span class="number">150</span> &amp;&amp;</span><br><span class="line">        my &gt;= startBtn.y &amp;&amp; my &lt;= startBtn.y + startBtn.h) &#123;</span><br><span class="line">        gameMode = <span class="number">2</span>;</span><br><span class="line">        animloop();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// If the game is over, and the restart button is clicked</span></span><br><span class="line">    <span class="keyword">if</span> (over == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">// Click Single Player restart button</span></span><br><span class="line">        <span class="keyword">if</span> (mx &gt;= restartBtn.x - <span class="number">150</span> &amp;&amp; mx &lt;= restartBtn.x - <span class="number">25</span> &amp;&amp;</span><br><span class="line">            my &gt;= restartBtn.y &amp;&amp; my &lt;= restartBtn.y + restartBtn.h) &#123;</span><br><span class="line">            gameMode = <span class="number">1</span>;</span><br><span class="line">            animloop();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Click Double Player restart button</span></span><br><span class="line">        <span class="keyword">if</span> (mx &gt;= restartBtn.x + <span class="number">25</span> &amp;&amp; mx &lt;= restartBtn.x + <span class="number">150</span> &amp;&amp;</span><br><span class="line">            my &gt;= restartBtn.y &amp;&amp; my &lt;= restartBtn.y + restartBtn.h) &#123;</span><br><span class="line">            gameMode = <span class="number">2</span>;</span><br><span class="line">            animloop();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Show the start screen</span></span><br><span class="line">startScreen();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Function to execute at startup</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">startScreen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    draw();</span><br><span class="line">    startBtn.draw();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Reset the variable when the game is over</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reset</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    ball.x = <span class="number">20</span>;</span><br><span class="line">    ball.y = <span class="number">20</span>;</span><br><span class="line">    points = <span class="number">0</span>;</span><br><span class="line">    over = <span class="number">0</span>;</span><br><span class="line">    ball.vx = <span class="number">4</span>;</span><br><span class="line">    ball.vy = <span class="number">8</span>;</span><br><span class="line">    topScore = <span class="number">0</span>;</span><br><span class="line">    bottomScore = <span class="number">0</span>;</span><br><span class="line">    topLeft = <span class="literal">false</span>;</span><br><span class="line">    topRight = <span class="literal">false</span>;</span><br><span class="line">    bottomLeft = <span class="literal">false</span>;</span><br><span class="line">    bottomRight = <span class="literal">false</span>;</span><br><span class="line">    paddles[<span class="number">1</span>].x = W / <span class="number">2</span> - paddles[<span class="number">1</span>].w / <span class="number">2</span>;</span><br><span class="line">    paddles[<span class="number">2</span>].x = W / <span class="number">2</span> - paddles[<span class="number">2</span>].w / <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此处主要内容就是根据一定逻辑更新球的运动轨迹，根据事件处理更新挡板的位置，还有碰撞发生后的一系列处理逻辑。大家可以根据注释阅读理解此处代码</p>
<h2 id="double-game-js"><a href="#double-game-js" class="headerlink" title="double-game.js"></a>double-game.js</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> topScore = <span class="number">0</span>,                   <span class="comment">// variable to record Player1's score</span></span><br><span class="line">    bottomScore = <span class="number">0</span>,                <span class="comment">// variable to record Player2's score</span></span><br><span class="line">    keyNum,                         <span class="comment">// variable to get keyCode</span></span><br><span class="line">    topLeft = <span class="literal">false</span>,                <span class="comment">// variable to record whether the corresponding button is pressed</span></span><br><span class="line">    topRight = <span class="literal">false</span>,               <span class="comment">// variable to record whether the corresponding button is pressed</span></span><br><span class="line">    bottomLeft = <span class="literal">false</span>,             <span class="comment">// variable to record whether the corresponding button is pressed</span></span><br><span class="line">    bottomRight = <span class="literal">false</span>;            <span class="comment">// variable to record whether the corresponding button is pressed</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Set the variable when the corresponding button is pressed</span></span><br><span class="line"><span class="built_in">window</span>.document.onkeydown = <span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> event = ev || <span class="built_in">window</span>.event;</span><br><span class="line">    keyNum = event.keyCode;</span><br><span class="line">    <span class="keyword">if</span> (keyNum === <span class="number">65</span>) &#123;</span><br><span class="line">        topLeft = <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (keyNum === <span class="number">68</span>) &#123;</span><br><span class="line">        topRight = <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (keyNum === <span class="number">37</span>) &#123;</span><br><span class="line">        bottomLeft = <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (keyNum === <span class="number">39</span>) &#123;</span><br><span class="line">        bottomRight = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Set the variable when the corresponding button to bounce up</span></span><br><span class="line"><span class="built_in">window</span>.document.onkeyup = <span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> event = ev || <span class="built_in">window</span>.event;</span><br><span class="line">    keyNum = event.keyCode;</span><br><span class="line">    <span class="keyword">if</span> (keyNum === <span class="number">65</span>) &#123;</span><br><span class="line">        topLeft = <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (keyNum === <span class="number">68</span>) &#123;</span><br><span class="line">        topRight = <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (keyNum === <span class="number">37</span>) &#123;</span><br><span class="line">        bottomLeft = <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (keyNum === <span class="number">39</span>) &#123;</span><br><span class="line">        bottomRight = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">paint</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    paintCanvas();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Draw the top paddle</span></span><br><span class="line">    ctx.fillStyle = <span class="string">"#ff4949"</span>;</span><br><span class="line">    ctx.fillRect(paddles[<span class="number">2</span>].x, paddles[<span class="number">2</span>].y, paddles[<span class="number">2</span>].w, paddles[<span class="number">2</span>].h);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Draw the bottom paddle</span></span><br><span class="line">    ctx.fillStyle = <span class="string">"white"</span>;</span><br><span class="line">    ctx.fillRect(paddles[<span class="number">1</span>].x, paddles[<span class="number">1</span>].y, paddles[<span class="number">1</span>].w, paddles[<span class="number">1</span>].h);</span><br><span class="line"></span><br><span class="line">    ball.draw();</span><br><span class="line">    Update();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Update</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Update the score</span></span><br><span class="line">    updateGrade();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Use the relevant variables to record whether</span></span><br><span class="line">    <span class="comment">// or not the two keys on the keyboard are pressed</span></span><br><span class="line">    <span class="keyword">if</span> (topLeft) &#123;</span><br><span class="line">        <span class="keyword">if</span> (paddles[<span class="number">2</span>].x &gt;= <span class="number">-16</span>) &#123;</span><br><span class="line">            paddles[<span class="number">2</span>].x -= paddles[<span class="number">2</span>].vx;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (topRight) &#123;</span><br><span class="line">        <span class="keyword">if</span> (paddles[<span class="number">2</span>].x &lt;= W - paddles[<span class="number">2</span>].w + <span class="number">16</span>) &#123;</span><br><span class="line">            paddles[<span class="number">2</span>].x += paddles[<span class="number">2</span>].vx;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (bottomLeft) &#123;</span><br><span class="line">        <span class="keyword">if</span> (paddles[<span class="number">1</span>].x &gt;= <span class="number">-16</span>) &#123;</span><br><span class="line">            paddles[<span class="number">1</span>].x -= paddles[<span class="number">1</span>].vx;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (bottomRight) &#123;</span><br><span class="line">        <span class="keyword">if</span> (paddles[<span class="number">1</span>].x &lt;= W - paddles[<span class="number">1</span>].w + <span class="number">16</span>) &#123;</span><br><span class="line">            paddles[<span class="number">1</span>].x += paddles[<span class="number">1</span>].vx;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    ball.x += ball.vx;</span><br><span class="line">    ball.y += ball.vy;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Collision with paddles</span></span><br><span class="line">    pa1 = paddles[<span class="number">1</span>];</span><br><span class="line">    pa2 = paddles[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (collides(ball, pa1)) &#123;</span><br><span class="line">        collideAction(ball, pa1);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (collides(ball, pa2)) &#123;</span><br><span class="line">        collideAction(ball, pa2);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Collide with walls, If the ball hits the top/bottom walls, run gameOver() function</span></span><br><span class="line">        <span class="keyword">if</span> (ball.y + ball.r &gt; H) &#123;</span><br><span class="line">            ball.y = H - ball.r;</span><br><span class="line">            gameOver();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (ball.y &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            ball.y = ball.r;</span><br><span class="line">            gameOver();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// If ball strikes the vertical walls, invert the</span></span><br><span class="line">        <span class="comment">// x-velocity vector of ball</span></span><br><span class="line">        <span class="keyword">if</span> (ball.x + ball.r &gt;= W) &#123;</span><br><span class="line">            ball.vx = -ball.vx;</span><br><span class="line">            ball.x = W - ball.r;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (ball.x - ball.r &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            ball.vx = -ball.vx;</span><br><span class="line">            ball.x = <span class="number">0</span> + ball.r;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (flag == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> k = <span class="number">0</span>; k &lt; particlesCount; k++) &#123;</span><br><span class="line">            particles.push(<span class="keyword">new</span> Particles(particlePos.x, particlePos.y, multiplier));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    emitParticles();</span><br><span class="line"></span><br><span class="line">    flag = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateGrade</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    ctx.fillStyle = <span class="string">"#ff4949"</span>;</span><br><span class="line">    ctx.font = <span class="string">"16px Arial, sans-serif"</span>;</span><br><span class="line">    ctx.textAlign = <span class="string">"left"</span>;</span><br><span class="line">    ctx.textBaseline = <span class="string">"top"</span>;</span><br><span class="line">    ctx.fillText(<span class="string">"Player1 Score: "</span> + topScore, <span class="number">20</span>, <span class="number">40</span>);</span><br><span class="line"></span><br><span class="line">    ctx.fillStyle = <span class="string">"white"</span>;</span><br><span class="line">    ctx.textBaseline = <span class="string">"bottom"</span>;</span><br><span class="line">    ctx.fillText(<span class="string">"Player2 Score: "</span> + bottomScore, <span class="number">20</span>, H - <span class="number">40</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>依赖于 game.js 的双人游戏业务逻辑代码，阅读完 game.js 后便可易于理解此处代码</p>
<h2 id="index-css"><a href="#index-css" class="headerlink" title="index.css"></a>index.css</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API/Tutorial" target="_blank" rel="noopener">Canvas Web API 接口|MDN</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/requestAnimationFrame" target="_blank" rel="noopener">window.requestAnimationFrame|MDN</a></li>
<li><a href="http://www.zhangxinxu.com/wordpress/2013/09/css3-animation-requestanimationframe-tween-%E5%8A%A8%E7%94%BB%E7%AE%97%E6%B3%95/" target="_blank" rel="noopener">CSS3动画那么强，requestAnimationFrame还有毛线用？</a></li>
</ol>
<blockquote>
<p>本文作者：刘志宇</p>
<p>版权声明：本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank" rel="noopener">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！</p>
</blockquote>
]]></content>
      
        <categories>
            
            <category> 项目实例 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> HTML </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[如何使用 GitHub Pages 在线加载静态网页]]></title>
      <url>/2017/08/28/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8GitHub-Pages%E5%9C%A8%E7%BA%BF%E5%8A%A0%E8%BD%BD%E9%9D%99%E6%80%81%E7%BD%91%E9%A1%B5/</url>
      <content type="html"><![CDATA[<p>相信很多前端新手在开发完一个项目后，迫不急待的希望能够把自己的项目部署到网络中。GitHub 这一神奇的网站就为我们提供了这一便利，它可以解析静态网页，免去自己购买云主机+域名的麻烦，而且操作也很简便</p>
<a id="more"></a>
<h2 id="疑问"><a href="#疑问" class="headerlink" title="疑问"></a>疑问</h2><p>很多童鞋在把自己的前端项目上传到 GitHub 仓库中后，希望点击 HTML 文件时能让浏览器解析出来，但现实却是点进去之后你看到的是文件的源码。所以很多新手就考虑着要不要买个云主机+域名来部署到互联网上，其实这是完全没有必要的，因为在 GitHub 这个神奇的地方还有很多你不知道的秘密（装逼脸）。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fizm9pevh6j21gy0qy426.jpg" alt=""></p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fizmbfyqeoj21gy0qydj6.jpg" alt=""></p>
<h2 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h2><h3 id="第一步：将项目上传到-GitHub-仓库"><a href="#第一步：将项目上传到-GitHub-仓库" class="headerlink" title="第一步：将项目上传到 GitHub 仓库"></a>第一步：将项目上传到 GitHub 仓库</h3><p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fizmdsi5ivj21gy0qytca.jpg" alt="项目"></p>
<h3 id="第二步：找到项目-Settings，点击进去"><a href="#第二步：找到项目-Settings，点击进去" class="headerlink" title="第二步：找到项目 Settings，点击进去"></a>第二步：找到项目 Settings，点击进去</h3><p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fizmf47lo3j21gy0qy77v.jpg" alt="项目Settings"></p>
<h3 id="第三步：找到-GitHub-Pages-一栏，切换-Source-的选项为-master-branch-并点击-Save"><a href="#第三步：找到-GitHub-Pages-一栏，切换-Source-的选项为-master-branch-并点击-Save" class="headerlink" title="第三步：找到 GitHub Pages 一栏，切换 Source 的选项为 master branch 并点击 Save"></a>第三步：找到 GitHub Pages 一栏，切换 Source 的选项为 master branch 并点击 Save</h3><p><img src="http://upload-images.jianshu.io/upload_images/2377897-8fe9db6ba30959cd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="GitHub Pages"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/2377897-010125b0a7680f10.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="切换选项并保存"></p>
<h3 id="第四步：保存后出现了链接，点击后复制浏览器地址栏的地址即为项目网页的地址"><a href="#第四步：保存后出现了链接，点击后复制浏览器地址栏的地址即为项目网页的地址" class="headerlink" title="第四步：保存后出现了链接，点击后复制浏览器地址栏的地址即为项目网页的地址"></a>第四步：保存后出现了链接，点击后复制浏览器地址栏的地址即为项目网页的地址</h3><p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fizmlwkl9dj21gy0qy0vh.jpg" alt=""></p>
<h3 id="第五步：可以将链接放到-README-文件中供仓库的访问者预览效果"><a href="#第五步：可以将链接放到-README-文件中供仓库的访问者预览效果" class="headerlink" title="第五步：可以将链接放到 README 文件中供仓库的访问者预览效果"></a>第五步：可以将链接放到 README 文件中供仓库的访问者预览效果</h3><p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fizmplscabj21gy0qywgo.jpg" alt=""></p>
<blockquote>
<p>本文作者：刘志宇</p>
<p>版权声明：本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank" rel="noopener">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！</p>
</blockquote>
]]></content>
      
        <categories>
            
            <category> 工具使用 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> GitHub </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[小哥哥教你撸一个JS计算器]]></title>
      <url>/2017/08/16/%E5%B0%8F%E5%93%A5%E5%93%A5%E6%95%99%E4%BD%A0%E6%92%B8%E4%B8%80%E4%B8%AAJS%E8%AE%A1%E7%AE%97%E5%99%A8/</url>
      <content type="html"><![CDATA[<p>计算器 Demo 估计会是很多移动端、网页前端新手最佳的第一个上手项目。话说之前学 Android 时从不觉得写个计算器 Demo 会有多难。然而上星期花了几天的时间用原生 JavaScript、CSS、HTML 写了一个计算器 Demo。然而就是这么一个小小的项目还是能让我学到挺多的东西，其中最让我受益的就是明白一个良好的架构对一个软件项目来说是有多么的重要！</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fj7nwrffa4j21gy0qy75s.jpg" width="600" height="200" align="center/"></p>
<a id="more"></a>
<h2 id="项目效果"><a href="#项目效果" class="headerlink" title="项目效果"></a>项目效果</h2><p><strong>建议查看效果前去查阅仓库的 README 的 to-do list</strong></p>
<p><a href="http://barryliu1995.studio/WebCalculatorDemo/index.html">在线计算器</a></p>
<p>GitHub：<a href="https://github.com/BarryLiu1995/WebCalculatorDemo" target="_blank" rel="noopener">MyCalculatorDemo</a></p>
<p>项目详情请看 README 文件，同时欢迎各位 star，fork！</p>
<blockquote>
<p>移动端还没有适配，显示存在异常现象</p>
</blockquote>
<h2 id="项目背景"><a href="#项目背景" class="headerlink" title="项目背景"></a>项目背景</h2><p>其实一开始想要写个计算器 Demo 是源于看完《大话设计模式》的简单工厂模式的那一章节，看完之后就很想实践一下。刚好书中讲解工厂模式的例子举得就是计算器，因为书中是以 c++ 完成工厂模式的构造，于是乎自己就决定按照自己的理解看能不能用 JS 来实现。</p>
<p>项目主要分为 JavaScript 业务逻辑代码和 HTML 界面代码，JavaScript 业务代码主要是 OperationTypeFactory.js 和 SimpleCalculatorIndex.js。OperationTypeFactory.js 是运算类型对象，增加运算类型可在此增加对应运算对象。而 SimpleCalculatorIndex.js 负责运算的业务逻辑。Index.html 是界面代码。</p>
<h2 id="Index-html"><a href="#Index-html" class="headerlink" title="Index.html"></a>Index.html</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>计算器demo By刘志宇<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        html, body &#123;</span></span><br><span class="line"><span class="undefined">            height: 100%;</span></span><br><span class="line"><span class="undefined">            -webkit-tap-highlight-color: rgba(0, 0, 0, 0);</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        body &#123;</span></span><br><span class="line"><span class="undefined">            padding: 0;</span></span><br><span class="line"><span class="undefined">            margin: 0;</span></span><br><span class="line"><span class="undefined">            background-color: #AFAFAF;</span></span><br><span class="line"><span class="undefined">            font: 14px/1.5 Tahoma, "Lucida Grande", Verdana, "Microsoft Yahei", STXihei, hei;</span></span><br><span class="line"><span class="undefined">            -webkit-user-select: none;</span></span><br><span class="line"><span class="undefined">            -moz-user-select: none;</span></span><br><span class="line"><span class="undefined">            -ms-user-select: none;</span></span><br><span class="line"><span class="undefined">            user-select: none;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        #total &#123;</span></span><br><span class="line"><span class="undefined">            width: 100%;</span></span><br><span class="line"><span class="undefined">            height: 100%;</span></span><br><span class="line"><span class="undefined">            min-width: 300px;</span></span><br><span class="line"><span class="undefined">            max-width: 640px;</span></span><br><span class="line"><span class="undefined">            margin: 0 auto;</span></span><br><span class="line"><span class="undefined">            overflow: hidden;</span></span><br><span class="line"><span class="undefined">            background-color: #333;</span></span><br><span class="line"><span class="undefined">            box-shadow: 0px 0px 5px 2px #555555;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        header &#123;</span></span><br><span class="line"><span class="undefined">            width: 100%;</span></span><br><span class="line"><span class="undefined">            height: 25%;</span></span><br><span class="line"><span class="undefined">            box-sizing: border-box;</span></span><br><span class="line"><span class="undefined">            /*border-bottom: 1px solid #000;*/</span></span><br><span class="line"><span class="undefined">            /*box-shadow: 0 0 10px #000 inset,0 0 15px #333;*/</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        header input &#123;</span></span><br><span class="line"><span class="undefined">            display: block;</span></span><br><span class="line"><span class="undefined">            color: #fff;</span></span><br><span class="line"><span class="undefined">            text-shadow: 0 2px 1px rgba(0, 0, 0, 0.5);</span></span><br><span class="line"><span class="undefined">            height: 50%;</span></span><br><span class="line"><span class="undefined">            width: 100%;</span></span><br><span class="line"><span class="undefined">            background-color: transparent;</span></span><br><span class="line"><span class="undefined">            border: none;</span></span><br><span class="line"><span class="undefined">            font-size: 45px;</span></span><br><span class="line"><span class="undefined">            font-weight: bolder;</span></span><br><span class="line"><span class="undefined">            text-align: right;</span></span><br><span class="line"><span class="undefined">            margin: 0 -2%;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        main &#123;</span></span><br><span class="line"><span class="undefined">            width: 100%;</span></span><br><span class="line"><span class="undefined">            height: 75%;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        main ul &#123;</span></span><br><span class="line"><span class="undefined">            list-style: none;</span></span><br><span class="line"><span class="undefined">            padding: 0;</span></span><br><span class="line"><span class="undefined">            width: 100%;</span></span><br><span class="line"><span class="undefined">            height: 100%;</span></span><br><span class="line"><span class="undefined">            cursor: pointer;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        main ul li &#123;</span></span><br><span class="line"><span class="undefined">            width: 25%;</span></span><br><span class="line"><span class="undefined">            height: 20%;</span></span><br><span class="line"><span class="undefined">            float: left;</span></span><br><span class="line"><span class="undefined">            color: #fff;</span></span><br><span class="line"><span class="undefined">            font-size: 26px;</span></span><br><span class="line"><span class="undefined">            text-align: center;</span></span><br><span class="line"><span class="undefined">            border-left: 1px solid #000;</span></span><br><span class="line"><span class="undefined">            border-top: 1px solid #000;</span></span><br><span class="line"><span class="undefined">            box-sizing: border-box;</span></span><br><span class="line"><span class="undefined">            /*text-shadow: 0 2px 1px rgba(0, 0, 0, 0.2);*/</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        main ul li:before &#123;</span></span><br><span class="line"><span class="undefined">            display: inline-block;</span></span><br><span class="line"><span class="undefined">            content: "";</span></span><br><span class="line"><span class="undefined">            height:100%;</span></span><br><span class="line"><span class="undefined">            vertical-align:middle;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        .sign&#123;</span></span><br><span class="line"><span class="undefined">            background-color: #f5923e;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">        .FC&#123;</span></span><br><span class="line"><span class="undefined">            border-left: 1px solid transparent;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"total"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"sum"</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"content"</span> <span class="attr">value</span>=<span class="string">"0"</span> <span class="attr">readonly</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"list"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"sign FC"</span> <span class="attr">onclick</span>=<span class="string">"Main.onreset()"</span>&gt;</span>AC<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"sign"</span> <span class="attr">onclick</span>=<span class="string">"Main.inClick('d')"</span>&gt;</span>&amp;larr;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"sign"</span> <span class="attr">onclick</span>=<span class="string">"compute('%')"</span>&gt;</span>mod<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"sign"</span> <span class="attr">onclick</span>=<span class="string">"compute('+')"</span>&gt;</span>+<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"num FC"</span> <span class="attr">onclick</span>=<span class="string">"Main.inClick(7)"</span>&gt;</span>7<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"num"</span> <span class="attr">onclick</span>=<span class="string">"Main.inClick(8)"</span>&gt;</span>8<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"num"</span> <span class="attr">onclick</span>=<span class="string">"Main.inClick(9)"</span>&gt;</span>9<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"sign"</span> <span class="attr">onclick</span>=<span class="string">"compute('-')"</span>&gt;</span>-<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"num FC"</span> <span class="attr">onclick</span>=<span class="string">"Main.inClick(4)"</span>&gt;</span>4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"num"</span> <span class="attr">onclick</span>=<span class="string">"Main.inClick(5)"</span>&gt;</span>5<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"num"</span> <span class="attr">onclick</span>=<span class="string">"Main.inClick(6)"</span>&gt;</span>6<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"sign"</span> <span class="attr">onclick</span>=<span class="string">"compute('X')"</span>&gt;</span>&amp;times;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"num FC"</span> <span class="attr">onclick</span>=<span class="string">"Main.inClick(1)"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"num"</span> <span class="attr">onclick</span>=<span class="string">"Main.inClick(2)"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"num"</span> <span class="attr">onclick</span>=<span class="string">"Main.inClick(3)"</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"sign"</span> <span class="attr">onclick</span>=<span class="string">"compute('/')"</span>&gt;</span>&amp;divide;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"num FC"</span> <span class="attr">onclick</span>=<span class="string">"Main.inClick('.')"</span>&gt;</span>.<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"num"</span> <span class="attr">onclick</span>=<span class="string">"Main.inClick(0)"</span>&gt;</span>0<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"num"</span> <span class="attr">onclick</span>=<span class="string">"Main.inClick('PI')"</span>&gt;</span>PI<span class="tag">&lt;/<span class="name">li</span>&gt;</span>   <span class="comment">&lt;!--Math.PI--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"sign"</span> <span class="attr">onclick</span>=<span class="string">"Main.display()"</span>&gt;</span>=<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!--&lt;li class="sign" onclick="compute('^')"&gt;x&amp;sup3;&lt;/li&gt;--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--&lt;li class="sign" onclick="compute('#')"&gt;&amp;radic;&lt;/li&gt;--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--&lt;li class="sign" onclick="compute('sin')"&gt;sin&lt;/li&gt;--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--&lt;li class="sign" onclick="compute('cos')"&gt;cos&lt;/li&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"scripts/OperationTypeFactory.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"scripts/SimpleCalculatorIndex.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.onload=<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        alert(<span class="string">"使用提示：使用时请完整输入运算表达式，运算结果将不保存！"</span>);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>界面部分<code>&lt;body&gt;</code>标签内主要分为计算器显示部分<code>&lt;header&gt;</code>和计算机输入部分<code>&lt;main&gt;</code>。其中按键界面是由<code>&lt;ul&gt;</code>无序列表构成。具体可看上面代码，这里比较简单，不一一细讲。</p>
<h2 id="OperationTypeFactory-js"><a href="#OperationTypeFactory-js" class="headerlink" title="OperationTypeFactory.js"></a>OperationTypeFactory.js</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"><span class="comment">//运算原型</span></span><br><span class="line"><span class="keyword">var</span> Operation = &#123;</span><br><span class="line">    first: <span class="number">0</span>,</span><br><span class="line">    second: <span class="number">0</span>,</span><br><span class="line">    result: <span class="number">0</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//各种运算对象</span></span><br><span class="line"><span class="keyword">var</span> Add = &#123;</span><br><span class="line">    get: <span class="function"><span class="keyword">function</span> (<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> i = accurate(num1, num2);</span><br><span class="line">        Operation.result = (num1 * i + num2 * i) / i;</span><br><span class="line">    &#125;,</span><br><span class="line">    __proto__: Operation</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> Sub = &#123;</span><br><span class="line">    get: <span class="function"><span class="keyword">function</span> (<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> i = accurate(num1, num2);</span><br><span class="line">        Operation.result = (num1 * i - num2 * i) / i;</span><br><span class="line">    &#125;,</span><br><span class="line">    __proto__: Operation</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Multi = &#123;</span><br><span class="line">    get: <span class="function"><span class="keyword">function</span> (<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> i = accurate(num1, num2);</span><br><span class="line">        Operation.result = ((num1 * i) * (num2 * i)) / <span class="built_in">Math</span>.pow(i, <span class="number">2</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    __proto__: Operation</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Div = &#123;</span><br><span class="line">    get: <span class="function"><span class="keyword">function</span> (<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (num1 === <span class="number">0</span>) &#123;</span><br><span class="line">            alert(<span class="string">"被除数不能为0"</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> i = accurate(num1, num2);</span><br><span class="line">        Operation.result = ((num1 * i) / (num2 * i));</span><br><span class="line">    &#125;,</span><br><span class="line">    __proto__: Operation</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Pow = &#123;</span><br><span class="line">    get: <span class="function"><span class="keyword">function</span> (<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">        Operation.result = <span class="built_in">Math</span>.pow(num1, num2);</span><br><span class="line">    &#125;,</span><br><span class="line">    __proto__: Operation</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Sqrt = &#123;</span><br><span class="line">    get: <span class="function"><span class="keyword">function</span> (<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">        Operation.result = <span class="built_in">Math</span>.sqrt(num1);</span><br><span class="line">    &#125;,</span><br><span class="line">    __proto__: Operation</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Sin = &#123;</span><br><span class="line">    get: <span class="function"><span class="keyword">function</span> (<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> a = (<span class="built_in">Math</span>.PI / <span class="number">180</span>) * num1;</span><br><span class="line">        Operation.result = <span class="built_in">Math</span>.sin(a);</span><br><span class="line">    &#125;,</span><br><span class="line">    __proto__: Operation</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Cos = &#123;</span><br><span class="line">    get: <span class="function"><span class="keyword">function</span> (<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> b = (<span class="built_in">Math</span>.PI / <span class="number">180</span>) * num1;</span><br><span class="line">        Operation.result = <span class="built_in">Math</span>.cos(b);</span><br><span class="line">    &#125;,</span><br><span class="line">    __proto__: Operation</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Mod = &#123;</span><br><span class="line">    get: <span class="function"><span class="keyword">function</span> (<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">        Operation.result = num1 % num2;</span><br><span class="line">    &#125;,</span><br><span class="line">    __proto__: Operation</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//运算对象工厂</span></span><br><span class="line"><span class="keyword">var</span> operationFactory = &#123;</span><br><span class="line">    produce: <span class="function"><span class="keyword">function</span> (<span class="params">math</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (math) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'+'</span>:</span><br><span class="line">                Main.computer = Add;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'-'</span>:</span><br><span class="line">                Main.computer = Sub;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'X'</span>:</span><br><span class="line">                Main.computer = Multi;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'/'</span>:</span><br><span class="line">                Main.computer = Div;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'^'</span>:</span><br><span class="line">                Main.computer = Pow;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'#'</span>:</span><br><span class="line">                Main.computer = Sqrt;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'sin'</span>:</span><br><span class="line">                Main.computer = Sin;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'cos'</span>:</span><br><span class="line">                Main.computer = Cos;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'%'</span>:</span><br><span class="line">                Main.computer = Mod;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    __proto__: Operation</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//解决浮点数运算不精确问题</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">accurate</span>(<span class="params">a1, a2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> n1 = <span class="number">0</span>, n2 = <span class="number">0</span>, m = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        n1 = a1.toString().split(<span class="string">"."</span>)[<span class="number">1</span>].length;</span><br><span class="line">    &#125;<span class="keyword">catch</span> (e)&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        n2 = a2.toString().split(<span class="string">"."</span>)[<span class="number">1</span>].length;</span><br><span class="line">    &#125;<span class="keyword">catch</span> (e)&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    m = <span class="built_in">Math</span>.pow(<span class="number">10</span>, <span class="built_in">Math</span>.max(n1, n2));</span><br><span class="line">    <span class="keyword">return</span> m;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Operation 对象保存的是参与运算的数值，而它的子类是各种各样的运算对象，其 get 函数逻辑各不相同。最后根据输入的符号新建一个运算对象。</p>
<h2 id="SimpleCalculatorIndex-js"><a href="#SimpleCalculatorIndex-js" class="headerlink" title="SimpleCalculatorIndex.js"></a>SimpleCalculatorIndex.js</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"><span class="comment">//显示台对象</span></span><br><span class="line"><span class="keyword">var</span> Main = &#123;</span><br><span class="line">    isFirst: <span class="literal">true</span>,                                  <span class="comment">//用以判断当前输入环境是Operation.first还是Operation.second</span></span><br><span class="line">    temp: <span class="number">0</span>,                                        <span class="comment">//输入数字的缓存</span></span><br><span class="line">    count: <span class="number">0</span>,                                       <span class="comment">//统计输入数字的次数</span></span><br><span class="line">    description: <span class="built_in">document</span>.getElementById(<span class="string">"sum"</span>),    <span class="comment">//用来显示运算过程</span></span><br><span class="line">    out: <span class="built_in">document</span>.getElementById(<span class="string">"content"</span>),        <span class="comment">//用来显示运算结果</span></span><br><span class="line">    formula: <span class="string">""</span>,                                    <span class="comment">//用来记录运算表达式，以便输出到运算过程显示框</span></span><br><span class="line">    computer: <span class="number">0</span>,                                    <span class="comment">//运算实体对象</span></span><br><span class="line">    subCount: <span class="number">0</span>,                                    <span class="comment">//记录减号按键次数</span></span><br><span class="line">    addCount: <span class="number">0</span>,                                    <span class="comment">//记录加号按键次数</span></span><br><span class="line">    multiCount: <span class="number">0</span>,                                  <span class="comment">//记录乘号按键次数</span></span><br><span class="line">    divCount: <span class="number">0</span>,                                    <span class="comment">//记录除号按键次数</span></span><br><span class="line">    modCount: <span class="number">0</span>,                                    <span class="comment">//记录求模按键次数</span></span><br><span class="line">    subLocation: <span class="number">-1</span>,                                <span class="comment">//记录运算公式字符串中运算符号位置</span></span><br><span class="line">    dotAddress: <span class="number">-1</span>,                                 <span class="comment">//记录小数点在数值字符串中的位置</span></span><br><span class="line">    dotFlag: <span class="literal">false</span>,                                 <span class="comment">//用以判断小数点按键是否按下</span></span><br><span class="line">    dotLocation: <span class="number">-1</span>,                                <span class="comment">//永久保存subLocation</span></span><br><span class="line">    deleteTemp: <span class="number">0</span>,                                  <span class="comment">//永久保存存入Operation.first的temp值</span></span><br><span class="line">    deleteCount: <span class="number">0</span>,                                 <span class="comment">//永久保存存入Operation.first的count值</span></span><br><span class="line">    deleteDotAddress: <span class="number">-1</span>,                           <span class="comment">//永久保存存入Operation.first的dotAddress值</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//inClick 函数接受计算器的数字输入</span></span><br><span class="line">    inClick: <span class="function"><span class="keyword">function</span> (<span class="params">number</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (number === <span class="string">'d'</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> last = <span class="keyword">this</span>.formula.charAt(<span class="keyword">this</span>.formula.length - <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">var</span> fl = <span class="keyword">this</span>.formula.length;</span><br><span class="line">            <span class="keyword">if</span> (last === <span class="string">'.'</span> || last === <span class="string">'+'</span> || last === <span class="string">'-'</span> || last === <span class="string">'X'</span> || last === <span class="string">'/'</span> || last === <span class="string">'%'</span>) &#123;</span><br><span class="line">                <span class="keyword">switch</span> (last) &#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">'.'</span>:</span><br><span class="line">                        <span class="keyword">this</span>.dotAddress = <span class="number">-1</span>;</span><br><span class="line">                        <span class="keyword">this</span>.dotFlag = <span class="literal">false</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">'+'</span>:</span><br><span class="line">                        <span class="keyword">this</span>.addCount--;</span><br><span class="line">                        <span class="keyword">this</span>.isFirst = <span class="literal">true</span>;</span><br><span class="line">                        <span class="keyword">this</span>.temp = <span class="keyword">this</span>.deleteTemp;</span><br><span class="line">                        <span class="keyword">this</span>.count = <span class="keyword">this</span>.deleteCount;</span><br><span class="line">                        <span class="keyword">this</span>.dotAddress = <span class="keyword">this</span>.deleteDotAddress;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">'-'</span>:</span><br><span class="line">                        <span class="keyword">this</span>.subCount--;</span><br><span class="line">                        <span class="keyword">if</span> (fl === <span class="keyword">this</span>.dotLocation + <span class="number">1</span>) &#123;</span><br><span class="line">                            <span class="keyword">this</span>.isFirst = <span class="literal">true</span>;</span><br><span class="line">                            <span class="keyword">this</span>.temp = <span class="keyword">this</span>.deleteTemp;</span><br><span class="line">                            <span class="keyword">this</span>.count = <span class="keyword">this</span>.deleteCount;</span><br><span class="line">                            <span class="keyword">this</span>.dotAddress = <span class="keyword">this</span>.deleteDotAddress;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">'X'</span>:</span><br><span class="line">                        <span class="keyword">this</span>.multiCount--;</span><br><span class="line">                        <span class="keyword">this</span>.isFirst = <span class="literal">true</span>;</span><br><span class="line">                        <span class="keyword">this</span>.temp = <span class="keyword">this</span>.deleteTemp;</span><br><span class="line">                        <span class="keyword">this</span>.count = <span class="keyword">this</span>.deleteCount;</span><br><span class="line">                        <span class="keyword">this</span>.dotAddress = <span class="keyword">this</span>.deleteDotAddress;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">'/'</span>:</span><br><span class="line">                        <span class="keyword">this</span>.divCount--;</span><br><span class="line">                        <span class="keyword">this</span>.isFirst = <span class="literal">true</span>;</span><br><span class="line">                        <span class="keyword">this</span>.temp = <span class="keyword">this</span>.deleteTemp;</span><br><span class="line">                        <span class="keyword">this</span>.count = <span class="keyword">this</span>.deleteCount;</span><br><span class="line">                        <span class="keyword">this</span>.dotAddress = <span class="keyword">this</span>.deleteDotAddress;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">'%'</span>:</span><br><span class="line">                        <span class="keyword">this</span>.modCount--;</span><br><span class="line">                        <span class="keyword">this</span>.isFirst = <span class="literal">true</span>;</span><br><span class="line">                        <span class="keyword">this</span>.temp = <span class="keyword">this</span>.deleteTemp;</span><br><span class="line">                        <span class="keyword">this</span>.count = <span class="keyword">this</span>.deleteCount;</span><br><span class="line">                        <span class="keyword">this</span>.dotAddress = <span class="keyword">this</span>.deleteDotAddress;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">this</span>.formula = <span class="keyword">this</span>.formula.substring(<span class="number">0</span>, <span class="keyword">this</span>.formula.length - <span class="number">1</span>);</span><br><span class="line">                <span class="keyword">this</span>.description.value = <span class="keyword">this</span>.formula;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">this</span>.formula = <span class="keyword">this</span>.formula.substring(<span class="number">0</span>, <span class="keyword">this</span>.formula.length - <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">this</span>.description.value = <span class="keyword">this</span>.formula;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> f = <span class="keyword">this</span>.temp % <span class="number">10</span>;</span><br><span class="line">            f /= <span class="number">10</span>;</span><br><span class="line">            <span class="keyword">this</span>.temp = <span class="keyword">this</span>.temp / <span class="number">10</span> - f;</span><br><span class="line">            --<span class="keyword">this</span>.count;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.isFirst) &#123;</span><br><span class="line">                Operation.first = <span class="keyword">this</span>.temp;</span><br><span class="line">                <span class="keyword">this</span>.subLocation = <span class="keyword">this</span>.formula.length;</span><br><span class="line">                <span class="keyword">this</span>.dotLocation = <span class="keyword">this</span>.subLocation;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                Operation.second = <span class="keyword">this</span>.temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.formula += number;</span><br><span class="line">            <span class="keyword">this</span>.description.value = <span class="keyword">this</span>.formula;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (number === <span class="string">'PI'</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.isFirst) &#123;</span><br><span class="line">                Operation.first = <span class="built_in">Math</span>.PI;</span><br><span class="line">                <span class="keyword">this</span>.subLocation = <span class="keyword">this</span>.formula.length;            <span class="comment">//保证记录的是第一个运算数的后面那个运算符</span></span><br><span class="line">                <span class="keyword">this</span>.dotLocation = <span class="keyword">this</span>.subLocation;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                Operation.second = <span class="built_in">Math</span>.PI;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (number === <span class="string">'.'</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.dotAddress = <span class="keyword">this</span>.count;</span><br><span class="line">            <span class="keyword">this</span>.dotFlag = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> number === <span class="string">"number"</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.count === <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">this</span>.temp += number;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">this</span>.temp = <span class="keyword">this</span>.temp * <span class="number">10</span> + number;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">this</span>.count++;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.isFirst) &#123;</span><br><span class="line">                Operation.first = <span class="keyword">this</span>.temp;</span><br><span class="line">                <span class="keyword">this</span>.subLocation = <span class="keyword">this</span>.formula.length;</span><br><span class="line">                <span class="keyword">this</span>.dotLocation = <span class="keyword">this</span>.subLocation;</span><br><span class="line">                <span class="keyword">this</span>.deleteTemp = <span class="keyword">this</span>.temp;</span><br><span class="line">                <span class="keyword">this</span>.deleteCount = <span class="keyword">this</span>.count;</span><br><span class="line">                <span class="keyword">this</span>.deleteDotAddress = <span class="keyword">this</span>.dotAddress;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                Operation.second = <span class="keyword">this</span>.temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">//该函数接受运算符号的输入</span></span><br><span class="line">    getOperation: <span class="function"><span class="keyword">function</span> (<span class="params">math</span>) </span>&#123;</span><br><span class="line">        <span class="comment">//如果Operation.first是小数的话，在输入运算符号之前进行小数化</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.dotFlag) &#123;</span><br><span class="line">            <span class="keyword">var</span> mi = <span class="keyword">this</span>.count - <span class="keyword">this</span>.dotAddress;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; mi; i++) &#123;</span><br><span class="line">                <span class="keyword">this</span>.temp /= <span class="number">10</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.isFirst) &#123;</span><br><span class="line">                Operation.first = <span class="keyword">this</span>.temp;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">this</span>.dotFlag = !<span class="keyword">this</span>.dotFlag;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.formula += math;</span><br><span class="line">        <span class="keyword">this</span>.description.value = <span class="keyword">this</span>.formula;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//此时记录输入各个运算符号按键的次数</span></span><br><span class="line">        <span class="keyword">switch</span> (math) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'+'</span>:</span><br><span class="line">                Main.addCount++;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'-'</span>:</span><br><span class="line">                Main.subCount++;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'X'</span>:</span><br><span class="line">                Main.multiCount++;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'/'</span>:</span><br><span class="line">                Main.divCount++;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'%'</span>:</span><br><span class="line">                Main.modCount++;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//根据传入的运算符号进行输入环境的切换</span></span><br><span class="line">        <span class="keyword">if</span> (math === <span class="string">'+'</span> || math === <span class="string">'X'</span> || math === <span class="string">'%'</span> || math === <span class="string">'^'</span> || math === <span class="string">'/'</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.isFirst = !<span class="keyword">this</span>.isFirst;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (math === <span class="string">'-'</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.formula.charAt(<span class="keyword">this</span>.subLocation) === <span class="string">'-'</span>) &#123;</span><br><span class="line">                <span class="keyword">this</span>.isFirst = !<span class="keyword">this</span>.isFirst;</span><br><span class="line">                <span class="keyword">this</span>.subLocation = <span class="number">-2</span>;         <span class="comment">//防止减号运算和第二个运算数也为负数的矛盾</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.temp = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.dotAddress = <span class="number">-1</span>;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">//该函数负责运算结果的计算以及显示</span></span><br><span class="line">    display: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//如果第二个运算数为小数的话，在此进行小数化</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.dotFlag) &#123;</span><br><span class="line">            <span class="keyword">var</span> m = <span class="keyword">this</span>.count - <span class="keyword">this</span>.dotAddress;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">                <span class="keyword">this</span>.temp /= <span class="number">10</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.isFirst) &#123;</span><br><span class="line">                Operation.first = <span class="keyword">this</span>.temp;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                Operation.second = <span class="keyword">this</span>.temp;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">this</span>.dotFlag = !<span class="keyword">this</span>.dotFlag;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//计算之前首先根据各运算符按键次数判断运算逻辑</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.subCount === <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.addCount != <span class="number">0</span> || <span class="keyword">this</span>.multiCount != <span class="number">0</span> || <span class="keyword">this</span>.divCount != <span class="number">0</span> || <span class="keyword">this</span>.modCount != <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.formula.charAt(<span class="number">0</span>) === <span class="string">'-'</span>) &#123;</span><br><span class="line">                    Operation.first = Operation.first * (<span class="number">-1</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    Operation.second = Operation.second * (<span class="number">-1</span>);</span><br><span class="line">                    <span class="keyword">if</span> (<span class="keyword">this</span>.addCount === <span class="number">1</span>) &#123;</span><br><span class="line">                        operationFactory.produce(<span class="string">'+'</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="keyword">this</span>.multiCount === <span class="number">1</span>) &#123;</span><br><span class="line">                        operationFactory.produce(<span class="string">'X'</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="keyword">this</span>.divCount === <span class="number">1</span>) &#123;</span><br><span class="line">                        operationFactory.produce(<span class="string">'/'</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="keyword">this</span>.modCount === <span class="number">1</span>) &#123;</span><br><span class="line">                        operationFactory.produce(<span class="string">'%'</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                operationFactory.produce(<span class="string">'-'</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.subCount === <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.addCount != <span class="number">0</span> || <span class="keyword">this</span>.multiCount != <span class="number">0</span> || <span class="keyword">this</span>.divCount != <span class="number">0</span> || <span class="keyword">this</span>.modCount != <span class="number">0</span>) &#123;</span><br><span class="line">                Operation.first *= (<span class="number">-1</span>);</span><br><span class="line">                Operation.second *= (<span class="number">-1</span>);</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.addCount === <span class="number">1</span>) &#123;</span><br><span class="line">                    operationFactory.produce(<span class="string">'+'</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.multiCount === <span class="number">1</span>) &#123;</span><br><span class="line">                    operationFactory.produce(<span class="string">'X'</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.divCount === <span class="number">1</span>) &#123;</span><br><span class="line">                    operationFactory.produce(<span class="string">'/'</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.modCount === <span class="number">1</span>) &#123;</span><br><span class="line">                    operationFactory.produce(<span class="string">'%'</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.formula.charAt(<span class="number">0</span>) === <span class="string">'-'</span>) &#123;</span><br><span class="line">                    Operation.first *= (<span class="number">-1</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    Operation.second *= (<span class="number">-1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.subCount === <span class="number">3</span>) &#123;</span><br><span class="line">            Operation.first *= (<span class="number">-1</span>);</span><br><span class="line">            Operation.second *= (<span class="number">-1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.formula += <span class="string">'='</span>;</span><br><span class="line">        <span class="keyword">this</span>.description.value = <span class="keyword">this</span>.formula;</span><br><span class="line">        <span class="keyword">this</span>.computer.get(Operation.first, Operation.second);</span><br><span class="line">        <span class="keyword">this</span>.out.value = Operation.result;</span><br><span class="line">        <span class="keyword">this</span>.count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.temp = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.formula = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">this</span>.subLocation = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">this</span>.addCount = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.subCount = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.multiCount = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.divCount = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.modCount = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.deleteCount = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.deleteTemp = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.dotLocation = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.isFirst === <span class="literal">false</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.isFirst = !<span class="keyword">this</span>.isFirst;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    onreset: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        Operation.first = <span class="number">0</span>;</span><br><span class="line">        Operation.second = <span class="number">0</span>;</span><br><span class="line">        Operation.result = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.isFirst = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">this</span>.count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.temp = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.formula = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">this</span>.out.value = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.description.value = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">this</span>.dotFlag = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">this</span>.subLocation = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">this</span>.dotAddress = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">this</span>.subCount = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.addCount = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.multiCount = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.divCount = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.modCount = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.deleteCount = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.deleteTemp = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.dotLocation = <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//同时向显示台对象和运算对象工厂传入运算类型参数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compute</span>(<span class="params">math</span>) </span>&#123;</span><br><span class="line">    Main.getOperation(math);</span><br><span class="line">    operationFactory.produce(math);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最重要的是此计算业务逻辑代码。在这里处理输入的数字和符号去获得结果并显示出来。Operation.first 和 Operation.second 是进行运算的两个运算值，Operation.result 是运算的最终结果。而 Operation.first 和 Operation.second 是由传入的数字按键直接赋值，因此未进行处理前都是正整数。而处理小数点、负号、退位按键都是在此正整数的基础上操作而来，这也是此项目中的重点难点。我这里大概讲一下处理这三个难点的逻辑思路：小数点是每次输入完数字之后按下操作运算符号按键（除数字按键之外的按键）时根据之前记录的小数点的位置，将正整数进行一系列数学运算之后修正为正确的数值；负号处理是在最后按键等号按键时根据此前记录各个运算按键的按下次数去判断按下的负号是代表减法运算的运算符号、还是代表为第一个运算值的负号或者第二个运算值的负号、或者是代表两个运算值的负号、还有可能是两个负数进行减法运算。判断完毕后再对此前的两个运算值进行修正；退位是在判断输入按键为退位按键时根据当时按下退位按键时运算表达式的最后一个字符进行相对应处理。比如运算表达式最后一个为数字字符，则简单进行数值修正。而如果运算表达式最后一个为非数字字符则要进行对应的逻辑操作，比如切换输入环境。</p>
<p>由于这三个难题的处理步骤处在不同操作中，耦合性较低。因此也较容易理解业务逻辑，同时上面也标注上对应的注释，方便大家理解。</p>
<h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>这是我第一次较为完整的撸完一个相对简单的项目，同时写这个计算器 Demo 之前我也没有参考过其他优秀的计算器项目的源码，因此肯定还存在不合理的地方，欢迎各位大牛提出宝贵意见。同时如果各位阅读代码过程中有疑问可以提出来，我会认真回答各位问题，这也是帮助我提高编程能力的途径之一。</p>
<blockquote>
<p>本文作者：刘志宇</p>
<p>版权声明：本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank" rel="noopener">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！</p>
</blockquote>
]]></content>
      
        <categories>
            
            <category> 项目实例 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> CSS </tag>
            
            <tag> HTML </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[JavaScript的原型及原型链]]></title>
      <url>/2017/08/04/%E8%B0%88%E8%B0%88JavaScript%E7%9A%84%E5%8E%9F%E5%9E%8B%E5%8F%8A%E5%8E%9F%E5%9E%8B%E9%93%BE/</url>
      <content type="html"><![CDATA[<p>在 <a href="http://barryliu1995.studio/2017/07/25/JavaScript%E7%8E%8B%E5%9B%BD%E7%9A%84%E4%B8%80%E6%AC%A1%E6%97%85%E8%A1%8C%EF%BC%8C%E4%B8%80%E4%B8%AA%E6%B2%A1%E6%9C%89%E7%B1%BB%E7%9A%84%E4%B8%96%E7%95%8C%E6%80%8E%E4%B9%88%E7%8E%A9%E8%BD%AC%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%EF%BC%9F/">javascript王国的一次旅行，一个没有类的世界怎么玩转面向对象？</a> 一文中我们提到了在没有类概念的 JavaScript 语言中是通过原型来实现面向对象的继承特性。只要运用得好，这种基于原型的 JavaScript 继承模型比传统的类继承还要强大。所以我们还需详细学习一下原型的知识</p>
<a id="more"></a>
<h2 id="JavaScript-的对象"><a href="#JavaScript-的对象" class="headerlink" title="JavaScript 的对象"></a>JavaScript 的对象</h2><p>JavaScript 是基于对象的面向对象语言。因此在这里的“对象”既可以是普通对象（Object），也可以是函数对象（Function）。JS 抛弃了 Java 的类概念，而 Java 的继承恰恰是通过类来实现的。那么 JS 没有类的概念，就使用了“原型”的概念来实现继承。</p>
<h2 id="字面量原型及原型链"><a href="#字面量原型及原型链" class="headerlink" title="字面量原型及原型链"></a>字面量原型及原型链</h2><p>JS 可通过字面量构造对象。为了实现继承，对象里面有个<code>_proto_</code>属性可以指向该对象的父对象。这个父对象就是所谓的“原型”。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> animal = &#123;</span><br><span class="line">  name: <span class="string">'动物'</span>,</span><br><span class="line">  eat: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">" is eating"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">animal.eat();     <span class="comment">// animal is eating</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> dog = &#123;</span><br><span class="line">  name: <span class="string">'狗'</span>,</span><br><span class="line">  _proto_: animal</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cat = &#123;</span><br><span class="line">  name: <span class="string">'猫'</span>,</span><br><span class="line">  _proto_: animal</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">dog.eat();        <span class="comment">// 狗 is eating</span></span><br><span class="line">cat.eat();        <span class="comment">// 猫 is eating</span></span><br></pre></td></tr></table></figure>
<p>由上面代码我们可以看出：dog 和 cat 对象的原型都是 animal。但是 dog 和 cat 对象都没有定义 <code>eat()</code>方法，那怎么可以调用呢？其实当eat方法被调用的时候，先在自己的方法列表中寻找， 如果找不到，就去找原型中的方法， 如果原型中找不到， 就去原型的原型中去寻找……   最后找到Object那里， 如果还找不到， 那就是未定义了。这几个对象通过<code>_proto_</code>属性建立一个原型链！</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fhwi3i5lirj20gt0f8dif.jpg" alt="原型链"></p>
<h2 id="构造函数原型及原型链"><a href="#构造函数原型及原型链" class="headerlink" title="构造函数原型及原型链"></a>构造函数原型及原型链</h2><p>但是为了迁就 C++、Java、C# 程序员，让 JavaScript 可以像 Java 那样 new （构造）出一个对象出来，于是这里做了一个变通，也提供了构造函数。例子如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name,grade</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.grade = grade;</span><br><span class="line">  <span class="keyword">this</span>.sayHello = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Hi,I'</span>m <span class="string">' + this.name);</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">andy = new Student('</span>Andy<span class="string">',5);</span></span><br><span class="line"><span class="string">lisa = new Student('</span>Lisa<span class="string">',5);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">andy.sayHello();    //Hi,I'</span>m Andy</span><br><span class="line">lisa.sayHello();    <span class="comment">//Hi,I'm Lisa</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">//假设 andy 和 lisa 是同班同学，同时即将升入六年级</span></span><br><span class="line">andy.grade = <span class="number">6</span>;</span><br><span class="line"><span class="built_in">console</span>.log(andy.grade);   <span class="comment">// 6</span></span><br><span class="line"><span class="built_in">console</span>.log(lisa.grade);   <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>
<p>由上面的代码所示，我们可以看出这个所谓的构造函数已经很有 Java 类的感觉了。但是这里面存在两个问题：在对象里面定义方法，这样每创建一个对象都会一个<code>sayHello()</code>函数，这样来说显得对象臃肿，浪费资源；同时每个对象各自保有自己的属性和函数的副本，无法做到<strong>属性和方法共享</strong>。因此，这里有一个更加高效的办法就是把对象共享的属性和方法可以放到 Student.prototype 这个对象当中。如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">function Student(name)&#123;</span><br><span class="line">  this.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Student.prototype = &#123;</span><br><span class="line">  grade: 5,</span><br><span class="line">  sayHello: function()&#123;</span><br><span class="line">    console.log(&quot;Hi, I&apos;m &quot;+this.name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/*也可以写成</span><br><span class="line">Student.prototype.grade = 5;</span><br><span class="line">Student.prototype.sayHello = function()&#123;</span><br><span class="line">  console.log(&quot;Hi, I&apos;m &quot;+this.name);</span><br><span class="line">&#125;;</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">var andy = new Student(&quot;Andy&quot;);</span><br><span class="line">var lisa = new Student(&quot;Lisa&quot;);</span><br><span class="line"></span><br><span class="line">andy.sayHello();      //Hi, I&apos;m Andy</span><br><span class="line">lisa.sayHello();      //Hi, I&apos;m Lisa</span><br><span class="line"></span><br><span class="line">Student.prototype.grade = 6;</span><br><span class="line">console.log(&quot;Andy&apos;s grade: &quot;+ andy.grade);    // 6</span><br><span class="line">console.log(&quot;Lisa&apos;s grade: &quot;+ Lisa.grade);    // 6</span><br></pre></td></tr></table></figure>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fi6yabvn3vj20rn0ogdhf.jpg" alt="构造函数原型链"></p>
<p>由上面的代码和示意图可看出这个所谓的构造函数 Student 其实就是一个幌子啊， 每次去<code>new Student</code>的时候，确实会创建一个对象出来（ andy 或者 lisa ) ， 并且把这个对象的原型指针(_proto_)指向 Student.prototype 这个对象，这样一来就能找到<code>sayHello()</code>方法了。我们应该还知道上面的构造函数<code>Student()</code>对象（JS 中函数也是对象）会创建一个 prototype 对象（Student.prototype），而 new 出来的实例对象例如 andy 和 lisa 是没有这个 prototype 对象，但是他会有个 proto 属性（_proto_）指向这个构造函数对象的 prototype 对象，从而构成原型链。<strong>实例对象其实是通过原型对象与构造函数取得联系的</strong>。为了让 Java、C#、C++ 程序员降低学习成本，JavaScript 提供了语法糖：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name)&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">  sayHello()&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Hi, I'm "</span>+<span class="keyword">this</span>.name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> andy = <span class="keyword">new</span> Student(<span class="string">"andy"</span>);   </span><br><span class="line">andy.sayHello();                     <span class="comment">//Hi, I'm andy</span></span><br></pre></td></tr></table></figure>
<h2 id="Object-create"><a href="#Object-create" class="headerlink" title="Object.create()"></a>Object.create()</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="built_in">Object</span>.create(<span class="literal">null</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a);                 <span class="comment">//&#123;&#125;</span></span><br><span class="line">a.name = <span class="string">'Zhiyu'</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="built_in">Object</span>.create(a);</span><br><span class="line"><span class="built_in">console</span>.log(b);                 <span class="comment">//&#123;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(b.name);            <span class="comment">//Zhiyu</span></span><br></pre></td></tr></table></figure>
<p>上面我们可以看出该方法是创建一个空对象，空对象的原型是<code>create()</code>参数。此时创建的空对象会有个(_proto_)属性指向方法参数，这样也可以构成一个原型链。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol>
<li>JS 在创建对象（不论是普通对象还是函数对象）的时候，都有一个叫做 _ _proto__ 的内置属性，用于指向创建它的函数对象的原型对象 prototype</li>
<li>原型和原型链是 JS 实现继承的一种模型</li>
<li>原型链是靠 <em>proto </em> 形成的，而不是 prototype</li>
<li>所有的原型对象都有 constructor 属性，该属性对应创建所有指向该原型的实例构造函数</li>
<li>函数对象和原型对象通过 prototype 和 constructor 属性进行相互关联</li>
</ol>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="http://mp.weixin.qq.com/s/l3feZ7NaV1pIJ52K5JCQEw" target="_blank" rel="noopener">javascript王国的一次旅行，一个没有类的世界怎么玩转面向对象？</a></li>
<li><a href="http://fsux.me/js/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA/2015/12/26/Javascript-prototypal.html" target="_blank" rel="noopener">Javascript 深入浅出原型</a></li>
</ul>
<blockquote>
<p>本文作者：刘志宇</p>
<p>版权声明：本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank" rel="noopener">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！</p>
</blockquote>
<p>   ​</p>
]]></content>
      
        <categories>
            
            <category> 学习总结 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[谈谈JavaScript中的this关键字]]></title>
      <url>/2017/08/03/%E8%B0%88%E8%B0%88JavaScript%E4%B8%AD%E7%9A%84this%E5%85%B3%E9%94%AE%E5%AD%97/</url>
      <content type="html"><![CDATA[<p>Java 语言当中也有<code>this</code>关键字，而 JavaScript 语言当中的<code>this</code>关键字因为具有运行期绑定的特性，JS 当中的这个<code>this</code>关键字的含义要丰富的多。现在来看看这个<code>this</code>到底有啥奥秘……</p>
<a id="more"></a>
<h2 id="运行环境"><a href="#运行环境" class="headerlink" title="运行环境"></a>运行环境</h2><p><code>this</code>关键字指定的对象具体是指什么，这完全取决于函数的调用方式，JavaScript 中的函数的调用有以下几种方式：</p>
<ul>
<li>作为函数调用</li>
<li>作为对象方法调用</li>
<li>作为构造函数调用</li>
</ul>
<h3 id="作为函数调用"><a href="#作为函数调用" class="headerlink" title="作为函数调用"></a>作为函数调用</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> n = <span class="string">"Hello World!"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.n);</span><br><span class="line">&#125;</span><br><span class="line">example();       <span class="comment">//Hello World!</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> n = <span class="string">'Hello World!'</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.n=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">example();</span><br><span class="line"><span class="built_in">console</span>.log(n);  <span class="comment">//0</span></span><br></pre></td></tr></table></figure>
<p>我们通过上面的两个例子，我们可以明确知道：当函数直接调用时，该函数的<code>this</code>关键字指向的就是全局对象<code>window</code>。此时上面例子的全局变量<code>n</code>其实就是<code>window.n</code>。</p>
<h3 id="作为对象方法调用"><a href="#作为对象方法调用" class="headerlink" title="作为对象方法调用"></a>作为对象方法调用</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getAge</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> y = <span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear();</span><br><span class="line">    <span class="keyword">return</span> y - <span class="keyword">this</span>.birth;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> xiaoming = &#123;</span><br><span class="line">    name: <span class="string">'小明'</span>,</span><br><span class="line">    birth: <span class="number">1990</span>,</span><br><span class="line">    age: getAge</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(xiaoming.age());<span class="comment">//27</span></span><br><span class="line"><span class="built_in">console</span>.log(getAge());   <span class="comment">//NaN</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fn = xiaoming.age;</span><br><span class="line"><span class="built_in">console</span>.log(fn());       <span class="comment">//NaN</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">'Akita'</span>;</span><br><span class="line"><span class="keyword">var</span> dogs = &#123;</span><br><span class="line">  name:<span class="string">'Collie'</span>,</span><br><span class="line">  showName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(dogs.showName());  <span class="comment">//Collie</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> otherNmae = dogs.showName;</span><br><span class="line"><span class="built_in">console</span>.log(otherName());      <span class="comment">//Akita</span></span><br></pre></td></tr></table></figure>
<p>如上面所示代码，当使用<code>obj.xxx()</code>的形式调用函数时，里面的<code>this</code>关键字指向的就是对象本身。但是我们还需要注意一点就是：在对象方法内部再次定义一个方法，该方法的<code>this</code>关键字又会重新指向全局对象<code>window</code>！如下代码所示：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xiaoming = &#123;</span><br><span class="line">  name: <span class="string">'小明'</span>,</span><br><span class="line">  birth: <span class="number">1990</span>,</span><br><span class="line">  age: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getAgeFromBirth</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="keyword">var</span> y = <span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear();</span><br><span class="line">      <span class="keyword">return</span> y - <span class="keyword">this</span>.birth;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> getAgeFromBirth();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(xiaoming.age());    <span class="comment">//NaN</span></span><br></pre></td></tr></table></figure>
<p>由于这是 JavaScript 一个巨大的设计错误。ECMA 决定在 strict 模式下（就是开头声明<code>&#39;use strict&#39;;</code>）让函数的<code>this</code>指向<code>undefined</code>。因此，在 strict 模式下你会得到的错误就不是 NaN，而是<code>TypeError：Cannot read property &#39;birth&#39; of undefined</code>。</p>
<h3 id="作为构造函数调用"><a href="#作为构造函数调用" class="headerlink" title="作为构造函数调用"></a>作为构造函数调用</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name=name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> xiaoming = <span class="keyword">new</span> Student(<span class="string">'小明'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(xiaoming.name);       <span class="comment">//小明</span></span><br></pre></td></tr></table></figure>
<p>上面这段代码中我们通过构造函数构造了一个新的对象<code>xiaoming</code>，那么<code>this</code>就会指向这个对象。</p>
<h2 id="指定-this-指向"><a href="#指定-this-指向" class="headerlink" title="指定 this 指向"></a>指定 this 指向</h2><p>虽然在一个独立的函数调用中，根据是否是strict模式，<code>this</code>指向<code>undefined</code>或<code>window</code>，不过，我们还是可以控制<code>this</code>的指向的！</p>
<p>要指定函数的<code>this</code>指向哪个对象，可以用函数本身的<code>apply</code>方法，它接收两个参数，第一个参数就是需要绑定的<code>this</code>变量，第二个参数是<code>Array</code>，表示函数本身的参数。</p>
<p>用<code>apply</code>修复<code>getAge()</code>调用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getAge</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> y = <span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear();</span><br><span class="line">    <span class="keyword">return</span> y - <span class="keyword">this</span>.birth;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> xiaoming = &#123;</span><br><span class="line">    name: <span class="string">'小明'</span>,</span><br><span class="line">    birth: <span class="number">1990</span>,</span><br><span class="line">    age: getAge</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">xiaoming.age();                 <span class="comment">// 25</span></span><br><span class="line">getAge.apply(xiaoming, []);     <span class="comment">// 25</span></span><br></pre></td></tr></table></figure>
<p>此时利用<code>apply()</code>将<code>getAge()</code>的<code>this</code>指向了<code>xiaoming</code>这个对象，因此函数执行正确。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol>
<li><p><a href="https://www.liaoxuefeng.com/wiki/001434446689867b27157e896e74d51a89c25cc8b43bdb3000/0014345005399057070809cfaa347dfb7207900cfd116fb000" target="_blank" rel="noopener">方法 - 廖雪峰的官方网站</a></p>
</li>
<li><p><a href="http://fsux.me/js/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA/2016/02/09/In-depth-to-study-JS-This.html" target="_blank" rel="noopener">Javascript 深入浅出this</a></p>
</li>
</ol>
<blockquote>
<p>本文作者：刘志宇</p>
<p>版权声明：本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank" rel="noopener">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！</p>
</blockquote>
<p>   ​</p>
]]></content>
      
        <categories>
            
            <category> 学习总结 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[JavaScript王国之函数教主]]></title>
      <url>/2017/07/30/JavaScript%E7%8E%8B%E5%9B%BD%E4%B9%8B%E5%87%BD%E6%95%B0%E6%95%99%E4%B8%BB/</url>
      <content type="html"><![CDATA[<p>本篇是<a href="http://barryliu1995.studio/2017/07/25/JavaScript%E7%8E%8B%E5%9B%BD%E7%9A%84%E4%B8%80%E6%AC%A1%E6%97%85%E8%A1%8C%EF%BC%8C%E4%B8%80%E4%B8%AA%E6%B2%A1%E6%9C%89%E7%B1%BB%E7%9A%84%E4%B8%96%E7%95%8C%E6%80%8E%E4%B9%88%E7%8E%A9%E8%BD%AC%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%EF%BC%9F/">JavaScript王国的一次旅行，一个没有类的世界怎么玩转面向对象？</a>的续集</p>
<a id="more"></a>
<hr>
<blockquote>
<p>来源：码农翻身 微信公众号 </p>
<p>作者：刘欣</p>
<p>原文地址：<a href="http://mp.weixin.qq.com/s/qqPg0JujBIUNQPQMxjjlZQ" target="_blank" rel="noopener">javascript王国之函数教主</a></p>
</blockquote>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>本篇由BlindingDark撰写， 老刘修改，原文参见 <a href="http://www.jianshu.com/p/74120c8ec56a" target="_blank" rel="noopener">http://www.jianshu.com/p/74120c8ec56a</a></p>
<h2 id="拜函数教"><a href="#拜函数教" class="headerlink" title="拜函数教"></a>拜函数教</h2><p>Java 小王子在 JavaScript 王国待了也有一段时间，这里虽然不像 Java 帝国那样规范严苛，但也因此千奇百怪，五光十色。</p>
<p>要说小王子最喜欢待的地方，那还是人来人往的 JSON 酒馆，不仅有上好的酒菜，还有机会认识到各式各样的人。这不，一来二去他已经和上回认识的眼镜官员成了朋友，甚至私底下还称兄道弟的。</p>
<p>这一天小王子又和眼镜大哥一起约来吃酒。才寒暄了几句，筷子还没动，酒馆门口就发生了一点骚动。只见来了一位看起来像是教书先生的精瘦男子，旁边还有些随从。</p>
<p>“…… 大哥，这人什么来头，气度不凡啊。”小王子悄声向旁边的眼镜官员问到。</p>
<p>“哈哈，他是拜函数教的邱大教主，最近他们教派的信众激增啊，真是风水轮流转。”</p>
<p>“函数式？以前随父亲经商途中是听说过他们的事情，好像非常古老而且高深莫测啊，据说只有学者和虔诚的教徒才会加入他们，怎么最近也接收新人了？”</p>
<p>“小弟果然是见多识广，不错，在很久以前的确是这样，不过为何有大批新教徒这种事情也不在我的管辖范围内啊，所以也不太清楚。但是毕竟我是本国语言规范审查官，还是与他打过一些交道。不妨我们邀请他来一起喝酒，你亲自问他。”</p>
<p>小王子本来听到眼镜大哥也不了解情况正有些失望，突然得知可以直接面对面打探对方的底细，顿时兴奋了起来。</p>
<p>“那太好了！”</p>
<p>“这不是眼镜老弟么，别来无恙啊。”</p>
<p>“主教兄，甚好甚好，要不这顿我请？小二！”</p>
<p>饭菜上桌，互相客套了几句之后，话题就开始了。</p>
<p>“主教兄，这是我最近认识的朋友，年纪轻轻就周游四方，他有些事情要问你。”</p>
<p>“哦？”函数式主教把目光放了过来，“有何见教？”</p>
<p>“久闻贵教派向来神秘，为何最近有如此多的新教徒加入呢？”</p>
<p>“哈，这个嘛 … 现在的年轻人都不喜欢条条框框，本教向来以简洁强大著称，自然就受欢迎了。”</p>
<p>小王子心想，这个教主倒也是有话直说、自卖自夸，不过难道没了面向对象这种强大的武器，他还能变出怎么样的花儿来？</p>
<p>“那还敢请教教主大人，依你看要怎么实现 Animal, Cat, Dog 这些对象呢？”想了一会儿，小王子认为不如直接发问。</p>
<p>“这个嘛，本教派并无对象这种说法，不过如果你愿意，也可以构造一个对象出来，只需要……”</p>
<p>“我们拜函数教不用对象～”，还没等着主教说完，旁边的妹子突然发话了。</p>
<p>“哦，小兰，你来说吧。”这位被叫做小兰的少女像是主教的助手，看起来深得主教信任。</p>
<p>“嘻嘻，教主大人说的太复杂了，其实实现你说的那些根本不用什么对象。”</p>
<p>“哦？那该怎么做？”小王子顿时来了兴趣。</p>
<h2 id="函数是一等公民"><a href="#函数是一等公民" class="headerlink" title="函数是一等公民"></a>函数是一等公民</h2><p>“你想啊，搞出来这些猫啊狗啊的，不就是想让他们都可以吃东西么？干嘛要封装到一个对象中，太压抑了”</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fi1xuubkv9j20dp03n75j.jpg" alt=""></p>
<p>哦！Java 小王子恍然大悟，在自己的Java帝国，法律非常严格， 类和对象才是一等公民， 函数是不可能独立存在的， 你即使是想输出一个简单的hello world , 也必须写一个类，在类中写一个方法 ， 在这个方法中才能输出hello world 。</p>
<p>在这里函数已经翻身做主人，成为了一等公民，再也不用困在对象的牢笼中，声明后就可以直接使用。</p>
<p>“也就是说，猫、狗都可以直接拿来调用咯？”</p>
<p>“是的呢～ 不止是猫、狗，连人都能作为参数调用呢， 只要一个对象有name这个属性就行啊”小兰的脸上还是一样的笑容。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fi6j55po5zj20bo050tbr.jpg" alt=""></p>
<p>长期在一个强类型的语言中生活，小王子对这种有点“变态”的灵活性还真不习惯， 他说：“在Java帝国，方法的参数都有确定的类型，如果你的方法写错了，IDE就能自动帮你检测， 减少了很多错误，现在可就没这种福利了。”</p>
<p>“有得必有失嘛”小兰笑道 “你可以多写一点单元测试来保证正确性啊”</p>
<p>“既然函数是一等公民， 我相信它不止这点能耐吧？“</p>
<p>“那是自然， <strong>我们这里的函数还可以作为参数传递给另外一个函数呢！</strong>”</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535ly1fi29uzx2ggj20fd0afwj2.jpg" alt=""></p>
<p>小王子突然想到父王给自己讲过，要在Java8中引入函数式编程， 可以把一个所谓的lambada 表达式传递给另外一个函数， 省去了创建类或匿名类的开销。</p>
<p>但是宫廷老师偷偷地告诉过自己：“那只是半吊子的函数式编程，每个lambda表达式其实还得和一个函数接口相匹配， JDK在背后做了类型的推断”</p>
<p>（微信公众号码农翻身注： 参见文章《<a href="http://mp.weixin.qq.com/s?__biz=MzAxOTc0NzExNg==&amp;mid=2665513149&amp;idx=1&amp;sn=00e563fbd09c9cf9e2ac4283d43cccf1&amp;scene=21#wechat_redirect" target="_blank" rel="noopener">Java帝国之函数式编程（上）</a>》和《<a href="http://mp.weixin.qq.com/s?__biz=MzAxOTc0NzExNg==&amp;mid=2665513152&amp;idx=1&amp;sn=1398826ca9f9ea2b7c374574302a3838&amp;scene=21#wechat_redirect" target="_blank" rel="noopener">Java帝国之函数式编程（下）</a>》）</p>
<p>“函数既然能作为参数，我猜肯定也能作为返回值吧？” 小王子觉得拜函数教的邱大教主在场， 这个天真活泼的小兰好像不敢给自己透露太多， 只好主动发问。</p>
<p>“你这个外乡人很聪明嘛， 估计有不少编程基础吧？” 小兰又展示了一段代码：</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535ly1fi29y62x09j20i8092gqw.jpg" alt=""></p>
<p>果然和自己的猜想一致！ 作为皇族，小王子确实非常聪明，他很快就想到了另外一个问题： 如果内部的eat函数访问了外部函数的变量会发生什么状况？</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535ly1fi29z47ypzj20f70aijw6.jpg" alt=""></p>
<p>按照我们 Java 帝国的理论， 函数在被调用的时候是以栈帧的方式被压入栈中的， 函数的局部变量也在栈帧当中， 当这个函数返回，对应的栈帧就会被清除，局部变量自然也不可用了。</p>
<p>现在这个eat函数还能再使用createEatFunction()函数的desc这个变量吗？ 或者在调用它的时候会使用外边的全局desc 变量？  从而输出 “dog 正在吃东西”?</p>
<p>函数作为返回值看起来很美， 但细节着实让人费解啊？</p>
<h2 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h2><p>看到小王子像上次一样又“卡”住发呆了， 眼镜官员笑着对主教和小兰说： 这小子肯定又在深思了。</p>
<p>小兰说：“这个外乡人确实不一般，思考很深入，让他的CPU再运转一会儿吧”</p>
<p>小王子没有找到答案，从思考中回来，看到大家都盯着自己看，有点不好意思， 把疑惑给大家说了。  </p>
<p>“外乡人，Java 把你毒害得不浅， 我看你资质不错，不如忘掉Java 那丑陋的模型， 加入到我们拜函数教来吧。 将来你继承我的位置也未可知啊！” 邱大教主看了小兰一眼，意味深长地说。</p>
<p>小兰接口说：“还是先解释下你的疑惑吧， 你那段代码的输出应该是‘dog is eating’ , 而不是 ‘dog 正在吃东西’”</p>
<p>小王子说： “这我猜到了， 我就是不理解一个函数(createEatFunction)都执行完了, 为什么它的变量(desc)还能被 后面执行的函数(eat)来使用。”</p>
<p>“要不说你的java毒中的很深啊， 你换个角度想想，局部变量在函数执行完以后还可以被访问， 那它肯定不能存在于你说的那个什么java栈帧中。” 小兰说。</p>
<p>“那它放在那里？”</p>
<p>“在JavaScript 当中，有个作用域链(scope chain)的东西，它定义了一个函数激活执行的时候去哪儿找变量的值，  比如eat函数的作用域链是这样的：”</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535ly1fi2a2ahf9wj20cf0ptgmq.jpg" alt=""></p>
<p>（微信公众号码农翻身注： 此图只是示意图，并不严谨，例如没有表达出Activation object， Variable Object等概念）</p>
<p>小王子看着这个图，马上就明白了，这个eat函数没有定义desc 这个变量， 所以就沿着链去查找， 在createEatFunction作用域去查找，如果还找不到，就到global 作用域中查找……</p>
<p>这个例子中，在createEatFunction的作用域中有定义，于是就直接使用了。</p>
<p>“可是 ”小王子不服气地说  “createEatFunction 已经执行完了， 难道它的desc 变量不删除吗？”</p>
<p>“那肯定不能删除喽”  小兰说  “这里和你熟悉的java 有个重要的不同， 当你执行creatEatFunction的时候， eat函数才会被创建出来，此时eat函数就会把外部函数的作用域链记录下来（其中包含desc=’ is eating’)，以便执行时使用”</p>
<p>“奥，这个作用域是在<strong>函数创建时刻</strong>发生关联的，而不是运行时刻”</p>
<p>“没错， 这叫做静态作用域(static scope)，或者叫词法作用域（lexical scope）。当eat函数被激活执行，就可以在createEatFuncction中找到desc的值，而不是在全局中找到desc的值。 ”  小兰接着说，“我再给你看个例子， 你就理解这个静态作用域了”</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535ly1fi2a38ptrbj207q08zwgm.jpg" alt=""></p>
<p>小王子说： “这段代码的输出应该是2 啊， 还有什么可说的，哦，不对不对，应该输出1， 静态作用域！   函数foo在创建的那一刻， 已经确定了它会和包含x=1的全局作用域关联 , 所以在运行的时候也只会从全局作用域查找，而不是从bar 函数的作用域中找x ”</p>
<p>“看来你已经Get到了， 这个静态作用域是实现闭包的一个必需条件， 你听说过闭包吧？”</p>
<p>小王子说： “我听父王说过，但是不知道怎么回事….”</p>
<p>小王子说漏了嘴，赶紧打住。</p>
<p>小兰像没有听到一样，继续讲闭包：“闭包在<strong>JavaScript当中就是一个函数和以静态方式存储的父作用域的一个集合体</strong>，通过这个集合体，一个函数就可以访问外部函数的变量了。 ”</p>
<p>“所以eat函数就可以访问外部函数的变量了！  闭包这个名称有点古怪，不过背后的概念还是比较清晰的” 小王子赶紧说。</p>
<h2 id="尾声"><a href="#尾声" class="headerlink" title="尾声"></a>尾声</h2><p>“咳咳，小莱你够了。客人都被你吓到了。”这时，在旁边默默看着的邱大教主说话了。</p>
<p>经过这一番交谈，小王子震惊于函数式的独特之处，尤其是和Java帝国的不同。</p>
<p>不过毕竟是皇族，阅历丰富，他还是悟出了一点门道，“我大概明白了一点，由于 JavaScript 是动态类型，其实无论是函数还是对象，在这里都可以做为一个值来传递。函数式里面偏向对值直接进行处理，通过对这些值的传递和组合，就可以组装实现更高级的功能。”</p>
<p>“不错不错，我看你这位朋友的来头可不一般啊，新加入的信徒大多都经过漫长的适应期才能理解，他却立即悟出这些道理来。”邱大教主对小王子赞赏有加，或许以他的智慧已经识破了小王子的身份。</p>
<p>“不不不，还是因为小兰妹妹讲的好啊。”小王子脸红的说道。</p>
<p>“这还不是多亏了我们的原型才能自由灵活的实现各种编程范式么。”眼镜大哥也参合了起来。</p>
<p>“哈哈哈，你又在自夸了。”</p>
<p>“来，说了这么多 eat，不说了，吃菜吃菜～”</p>
<p>看来编程世界上还有这么多种形态，小王子下次要去哪里，又会见识到怎样的东西呢？或许也能给他的 Java 帝国带回一些新鲜的血液？</p>
<p><strong>附</strong></p>
<p>登场人物名：</p>
<p>小兰 == lambda</p>
<p>邱大教主 == 阿隆佐.丘齐(Alonzo Church)  Lambda演算发明人</p>
]]></content>
      
        <categories>
            
            <category> 学习总结 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 理解计算机 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[大话设计模式之简单工厂模式]]></title>
      <url>/2017/07/28/%E5%A4%A7%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<p>想起之前学 Android 开发和 Java 开发的时候发现框架的出现能大大提高开发效率。如今学习 Web 前端开发的时候发现前端框架更加丰富。那研究各式各样的框架就成为了挺重要的学习部分，我一位学计算机的高中同学介绍说“框架是设计模式的一次实战应用”。所以这又扯到了设计模式，那什么是设计模式，后面我们将慢慢介绍各种各样有趣的设计模式</p>
<a id="more"></a>
<hr>
<p>大话设计模式人物及背景</p>
<blockquote>
<p>小菜：准码农一枚，正求职找工作</p>
<p>大鸟：小菜表哥，大学毕业后长期从事软件开发和管理工作，与小菜同住一起</p>
</blockquote>
<h2 id="什么是设计模式"><a href="#什么是设计模式" class="headerlink" title="什么是设计模式"></a>什么是设计模式</h2><p>码农翻身作者刘欣曾在他的公众号推送<a href="http://mp.weixin.qq.com/s/EoFUsLAJDPLgYZoqwPovzA" target="_blank" rel="noopener">给设计模式说句公道话</a>说过</p>
<blockquote>
<p>设计模式是什么东西？ 简单来讲就是久经考验的、在面向对象设计领域的成功经验的总结</p>
</blockquote>
<p>因为自从上世纪70年代高级语言发展到面向对象阶段，这中间接近六十年的时间你可以想象有多少应用会被开发出来，这中间开发人员得积累了多少的经验教训。而设计模式就是这半个多世纪那些开发大牛对血与泪教训的经验总结。我同时认为，这些经验总结不单单只是程序开发经验的总结，而是取自于现实社会生活，但同时也能反哺现实生活的一种经验性知识。正因为是取自于现实社会生活，才有了如工厂模式、观察者模式、中介者模式、代理模式等如此生活化的命名方式。而     OO    语言的指导思想就是希望能够以现实人类求解日常问题的思维方法去求解软件开发的问题，那么开发出来的软件不仅容易被人理解，而且易于维护和修改，从而会保证软件的可靠性和可维护性，并能提高公共问题域中的软件模块和模块重用的可靠性。所以学习并学会合理使用设计模式就显得尤其重要了！好，下面开讲第一课！</p>
<h2 id="面试受挫"><a href="#面试受挫" class="headerlink" title="面试受挫"></a>面试受挫</h2><p>小菜今年计算机专业大四了，学了不少软件开发的知识，对自己的技术能力也信心满满。这不，他自信地在各大招聘网站投下自己的简历，希望能谋得一份不错的开发工作。投递结果也如小菜预计的一样，各大公司、单位陆陆续续向他发送了面试通知。到了人家单位，前台小姐姐给了他一份题目，上面写着：“请用 C++、Java、C# 或 VB.NET 任意一种面向对象语言实现一个计算器控制台程序，要求输入两个数和运算符号，得到结果。”小菜心想：“这还不简单！”，三下五除二。不到一会儿就写完了，觉得也没错误，就交了卷。交卷时前台小姐姐面带微笑地说道“请回去等待进行下一轮面试的通知吧”。于是小菜只得耐心等待，可是半个月过去了，什么消息也没有，小菜很苦闷，便向他已经从事软件开发工作七年的表哥大鸟讨论可能的原因。大鸟问了题目和了解了小菜代码的细节以后，撇起嘴角，说道“小菜呀，你是真不明白吗？人家单位出题的意思，你完全都没明白，当然不会再联系你了。”这时小菜更加郁闷了，觉得自己代码应该能完美运行，越想越想不明白的小菜郁闷的看着大鸟。大鸟苦笑的指着他写下的代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">class Program&#123;</span><br><span class="line">  static void Main(string[] args)&#123;</span><br><span class="line">    Console.Write(&quot;请输入数字A：&quot;);</span><br><span class="line">    string A = Console.ReadLine();</span><br><span class="line">    Console.Write(&quot;请选择运算符号（+、-、*、、）：&quot;);</span><br><span class="line">    string B = Console.ReadLine();</span><br><span class="line">    Console.Write(&quot;请输入数字B：&quot;);</span><br><span class="line">    string C = Console.ReadLine();</span><br><span class="line">    string D = &quot;&quot;;</span><br><span class="line"></span><br><span class="line">    if (B == &quot;+&quot;)</span><br><span class="line">      D = Convert.ToString(Convert.ToDouble(A) + Convert.ToDouble(C));</span><br><span class="line">    if (B == &quot;-&quot;)</span><br><span class="line">      D = Convert.ToString(Convert.ToDouble(A) - Convert.ToDouble(C));</span><br><span class="line">    if (B == &quot;*&quot;)</span><br><span class="line">      D = Convert.ToString(Convert.ToDouble(A) * Convert.ToDouble(C));</span><br><span class="line">    if (B == &quot;/&quot;)</span><br><span class="line">      D = Convert.ToString(Convert.ToDouble(A) / Convert.ToDouble(C));</span><br><span class="line">    </span><br><span class="line">    Console.WriteLine(&quot;结果是：&quot; + D);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>大鸟一一的揪出了代码中不如意的地方。比如命名不规范、没有对用户输入情况做判断、判断分支的写法效率不够高。“哦，说的没错，这个我以前听老师说过，可是从来没有在意过，我马上改，改完你再看看”小菜说道。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">class Program&#123;</span><br><span class="line">  static void Main(string[] args)&#123;</span><br><span class="line">    try&#123;</span><br><span class="line">      Console.Write(&quot;请输入数字A：&quot;);</span><br><span class="line">      string strNumA = Console.ReadLine();</span><br><span class="line">      Console.Write(&quot;请选择运算符号（+、-、*、、）：&quot;);</span><br><span class="line">      string strOperation = Console.ReadLine();</span><br><span class="line">      Console.Write(&quot;请输入数字B：&quot;);</span><br><span class="line">      string strNumB = Console.ReadLine();</span><br><span class="line">      string strResult = &quot;&quot;;</span><br><span class="line">      </span><br><span class="line">      switch (strOperation)&#123;</span><br><span class="line">        case &quot;+&quot;:</span><br><span class="line">          strResult = Convert.ToString(Convert.ToDouble(A) + Convert.ToDouble(C));</span><br><span class="line">          break;</span><br><span class="line">        case &quot;-&quot;:</span><br><span class="line">          strResult = Convert.ToString(Convert.ToDouble(A) - Convert.ToDouble(C));</span><br><span class="line">          break;</span><br><span class="line">        case &quot;*&quot;:</span><br><span class="line">          strResult = Convert.ToString(Convert.ToDouble(A) * Convert.ToDouble(C));</span><br><span class="line">          break;</span><br><span class="line">        case &quot;/&quot;:</span><br><span class="line">          if (strNumB != &quot;0&quot;)&#123;</span><br><span class="line">            strResult = Convert.ToString(Convert.ToDouble(A) / Convert.ToDouble(C));</span><br><span class="line">          &#125;else&#123;</span><br><span class="line">            strResult = &quot;除数不能为0&quot;;</span><br><span class="line">          &#125;</span><br><span class="line">          break;</span><br><span class="line">      &#125;</span><br><span class="line">      Console.WriteLine(&quot;结果是：&quot; + strResult);</span><br><span class="line">      Console.ReadLine();</span><br><span class="line">    &#125;catch(Exception ex)&#123;</span><br><span class="line">      Console.WriteLine(&quot;您的输入有错：&quot; + ex.Message);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>大鸟接过小菜写下的代码，摇摇头着说道“目前这代码实现计算器没有问题，但这样写出的代码是否符合出题人的意思呢？”</p>
<h2 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h2><h3 id="活字印刷，面向对象"><a href="#活字印刷，面向对象" class="headerlink" title="活字印刷，面向对象"></a>活字印刷，面向对象</h3><p>大鸟沉寂了一会，突然拍着小菜的肩膀说“你还记得我们古代四大发明之一的活字印刷术吗？”小菜菜点点头。“那你还知道活字印刷术发明之前民间常用的雕版印刷术吗？”这是小菜摇摇头。大鸟说道“雕版印刷术就是印书的时候，先用一把刷子蘸了墨，在雕好的板上刷一下，接着，用白纸覆在板上，另外拿一把干净的刷子在纸背上轻轻刷一下，把纸拿下来，这样一页书就印好了。那如果万一这时发现文章写的不对，需要改，那就只能为了一处的错误而去重新雕刻整块印刷板。而活字印刷术的出现就刚刚好解决了这个问题，只需把文章中的字体一个个分别雕刻出来，等后面印刷成页的时候进行排版就行了，如果需要更改，就只需要在排版的时候更改顺序。同时雕刻的单个字体还可以重复使用，还可以根据情况对文章增删内容。这样岂不是比之前方便多了！”</p>
<p><img src="http://img.club.pchome.net/upload/club/other/2016/1/2/pics_huanliyuan_1451730366_600x0.jpg" alt="活字印刷术"></p>
<p><img src="http://www.nlc.gov.cn/newgtkj/zhsy/201106/W020110628606583158843.jpg" alt="雕版印刷术"></p>
<p>大鸟接着说道“开发程序也应该如此——可维护、可复用、可扩展。而在活字印刷术出现之前，要修改，必须重刻，要加字，必须重刻，要重新排列，必须重刻，印完一页后，此版已无任何可再利用价值。其实雕版印刷术的问题就在于所有的字都刻在同一版面上，按计算机专业的概念来理解，就是耦合度太高。而利用封装、继承、多态把程序的耦合度降低，将使程序更加灵活，容易修改，并且易于复用。”</p>
<h3 id="业务的封装"><a href="#业务的封装" class="headerlink" title="业务的封装"></a>业务的封装</h3><p>大鸟：“讲了那么多，你觉得之前那道题目你有什么想法吗？”</p>
<p>小菜：“我好像懂了一点，你刚才说的面向对象目的就是降低耦合度。刚才我写的代码的确还是有不合理的地方。比如代码逻辑中，既有计算逻辑也有控制台显示逻辑。这样就不利于代码的复用，维护，扩展。“</p>
<p>大鸟：“不错，那你试试按你的刚才的想法去修改一下的你的代码”</p>
<p>小菜：“那我试试！”</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">//Operation 运算类</span><br><span class="line">public class Operation&#123;</span><br><span class="line">  public static double GetResult(double numberA,double numberB,string operation)&#123;</span><br><span class="line">    double result = 0d;</span><br><span class="line">    switch (operation)&#123;</span><br><span class="line">      case &quot;+&quot;:</span><br><span class="line">        result = numberA + numberB;</span><br><span class="line">        break;</span><br><span class="line">      case &quot;-&quot;:</span><br><span class="line">        result = numberA - numberB;</span><br><span class="line">        break;</span><br><span class="line">      case &quot;*&quot;:</span><br><span class="line">        result = numberA * numberB;</span><br><span class="line">        break;</span><br><span class="line">      case &quot;/&quot;:</span><br><span class="line">        result = numberA / numberB;</span><br><span class="line">        break;</span><br><span class="line">    &#125;</span><br><span class="line">    return result;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">//控制台显示类</span><br><span class="line">static void Main(string[] args)&#123;</span><br><span class="line">  try&#123;</span><br><span class="line">    Console.Write(&quot;请输入数字A：&quot;);</span><br><span class="line">    string strNumA = Console.ReadLine();</span><br><span class="line">    Console.Write(&quot;请选择运算符号（+、-、*、、）：&quot;);</span><br><span class="line">    string strOperation = Console.ReadLine();</span><br><span class="line">    Console.Write(&quot;请输入数字B：&quot;);</span><br><span class="line">    string strNumB = Console.ReadLine();</span><br><span class="line">    string strResult = &quot;&quot;;</span><br><span class="line">    strResult = Convert.ToString(Operation.GetResult(Convert.ToDouble(strNumA),</span><br><span class="line">                        Convert.ToDouble(strNumB),strOperation));</span><br><span class="line">    Console.WriteLine(&quot;结果是：&quot;+strResult);</span><br><span class="line">    Console.ReadLine();</span><br><span class="line">  &#125;catch(Exception ex)&#123;</span><br><span class="line">    Console.WriteLine(&quot;您的输入有错：&quot;+ex.Message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>小菜：“写好了，你看看！”</p>
<p>大鸟：“不错，这样就完全把业务和界面分离了。你现在在其他平台上写计算器的应用，就可以复用这个运算类了。但你现在只用了面向对象三大特性中的一个，还有两个没用呢？”</p>
<p>小菜：“面向对象三大特性不就是封装、继承和多态吗，这里我用到的应该是封装。我觉得一个个小小的计算器程序不至于用到继承和多态吧。”</p>
<p>大鸟：“你看来 too young too naive！”</p>
<h3 id="继承和多态"><a href="#继承和多态" class="headerlink" title="继承和多态"></a>继承和多态</h3><p>第二天。</p>
<p>小菜问道：“你说计算器这样的小程序还可以用到面向对象三大特性？继承和多态怎么可能用得上，我实在理解不了。我已经把业务和界面分离了，这不是很灵活了吗？”</p>
<p>大鸟：”那我问你，现在如果希望增加一个开根（sqrt）运算，你如何改？“</p>
<p>小菜：”那只需要改 Operation 运算类就行了，在 switch 中加一个分支就行了。”</p>
<p>大鸟：“那万一你不小心改错了呢。这么说吧，如果公司把某个算法类交个你去做修改，结果一不小心改错了，结果还可能影响到了其他原有的代码。这样本来只是让你增加一个功能，却使得原有的运行良好的功能代码产生了变化，这个风险太大了 。你明白吗？“</p>
<p>小菜：“哦，你的意思是我应该把加减乘除运算分离，修改其中一个不影响另外的几个，增加运算算法也不影响其他代码。”</p>
<p>大鸟：“对，如何用继承和多态，你应该有感觉了。”</p>
<p>小菜：“OK，我马上去写。”</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//Operation 运算类</span><br><span class="line">public class Operation&#123;</span><br><span class="line">  private double _numberA = 0;</span><br><span class="line">  private double _numberB = 0;</span><br><span class="line">  </span><br><span class="line">  public double NumberA&#123;</span><br><span class="line">    get &#123;return _numberA;&#125;</span><br><span class="line">    set &#123;_numberA = value;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  public double NumberB&#123;</span><br><span class="line">    get &#123;return _numberB;&#125;</span><br><span class="line">    set &#123;_numberB = value;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  public virtual double GetResult()&#123;</span><br><span class="line">    double result = 0;</span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>加减乘除类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">class Add : Operation&#123;</span><br><span class="line">  public override double GetResult()&#123;</span><br><span class="line">    double result = 0;</span><br><span class="line">    result = NumberA + NumberB;</span><br><span class="line">    return result;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Sub : Operation&#123;</span><br><span class="line">  public override double GetResult()&#123;</span><br><span class="line">    double result = 0;</span><br><span class="line">    result = NumberA - NumberB;</span><br><span class="line">    return result;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Multi : Operation&#123;</span><br><span class="line">  public override double GetResult()&#123;</span><br><span class="line">    double result = 0;</span><br><span class="line">    result = NumberA * NumberB;</span><br><span class="line">    return result;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Div : Operation&#123;</span><br><span class="line">  public override double GetResult()&#123;</span><br><span class="line">    double result = 0;</span><br><span class="line">    if (NumberB==0)&#123;</span><br><span class="line">      throw new Exception(&quot;除数不能为0&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    result = NumberA / NumberB;</span><br><span class="line">    return result;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>大鸟：“写的不错，但是问题来了你如何让计算器知道我是希望用哪一个算法呢？”</p>
<p>小菜：“是哦，我还没考虑到。”</p>
<h2 id="简单工厂模式"><a href="#简单工厂模式" class="headerlink" title="简单工厂模式"></a>简单工厂模式</h2><p>大鸟：“你现在的问题其实就是如何根据用户去实例化运算类的问题。解决这个问题可以用’简单工厂模式‘，也就是说到底要实例化谁，将来会不会增加实例化的对象，比如上面提到的开根运算，这是很容易变化的地方，应该考虑用一个单独的类来做这个创造运算实例的过程，这就像我们生活当中会的工厂，共同点都是生产某一样特定的东西。那么这个类就叫做工厂类！”</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">//简单运算工厂类</span><br><span class="line">public class OperationFactory&#123;</span><br><span class="line">  public static Operation createOperation(string operation)&#123;</span><br><span class="line">    Operation oper = null;</span><br><span class="line">    switch (operation)&#123;</span><br><span class="line">      case &quot;+&quot;:</span><br><span class="line">        oper = new Add();</span><br><span class="line">        break;</span><br><span class="line">      case &quot;-&quot;:</span><br><span class="line">        oper = new Sub();</span><br><span class="line">        break;</span><br><span class="line">      case &quot;*&quot;:</span><br><span class="line">        oper = new Multi();</span><br><span class="line">        break;</span><br><span class="line">      case &quot;/&quot;:</span><br><span class="line">        oper = new Div();</span><br><span class="line">        break;</span><br><span class="line">    &#125;</span><br><span class="line">    return oper;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>大鸟：“看看代码，这样的话你只需要输入运算符号，工厂实例化出合适的对象，通过多态，返回父类的方式实现了计算器的结果。”</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//实现加法运算过程</span><br><span class="line">Operation oper;</span><br><span class="line">oper = OperationFactory.createOperation(&quot;+&quot;);</span><br><span class="line">oper.NumberA = 1;</span><br><span class="line">oper.NumberB = 2;</span><br><span class="line">double result = oper.GetResult();</span><br></pre></td></tr></table></figure>
<p>大鸟：“现在就是比较完整的计算器程序了。复用性，可维护性，可扩展性都不错。如果某一天需要更改加法运算，我们只需要更改 Add 类。增加其他各种运算，比如取对数，正弦余弦，就只要增加相对应的运算类即可。同时还要记得去工厂做一下”备注“-在工厂类 switch 增加对应的分支。是不是很不错啊。“</p>
<p>小菜：”厉害了我的哥，我服。看来我还是 too young too naive!“</p>
<p>大鸟：“就你嘴能，来我们最后看看这几个类的结构图总结一下。”</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535ly1fhztrcpezxj20wc0ebt93.jpg" alt="简单工厂模式 计算器"></p>
<blockquote>
<p>本文作者：刘志宇</p>
<p>版权声明：本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank" rel="noopener">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！</p>
</blockquote>
]]></content>
      
        <categories>
            
            <category> 学习总结 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 理解计算机 </tag>
            
            <tag> 设计模式 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[JavaScript王国的一次旅行，一个没有类的世界怎么玩转面向对象？]]></title>
      <url>/2017/07/25/JavaScript%E7%8E%8B%E5%9B%BD%E7%9A%84%E4%B8%80%E6%AC%A1%E6%97%85%E8%A1%8C%EF%BC%8C%E4%B8%80%E4%B8%AA%E6%B2%A1%E6%9C%89%E7%B1%BB%E7%9A%84%E4%B8%96%E7%95%8C%E6%80%8E%E4%B9%88%E7%8E%A9%E8%BD%AC%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%EF%BC%9F/</url>
      <content type="html"><![CDATA[<p>没有学习前端开发之前，一直以为 JavaScript 跟 Java 有亲缘关系，等了解了 JS 之后才发现原来半毛钱关系都没有。有一次我问一位我的高中同学，他专业是软件工程。我问他“Java 是面向对象语言，C 是面向过程语言，那么 JS 是什么？”。“基于对象”，他的回答让我很郁闷，那基于对象跟面向对象又有什么区别？这不，刚好码农翻身的最新推送解答了我的疑问</p>
<a id="more"></a>
<hr>
<blockquote>
<p>来源：码农翻身 微信公众号 </p>
<p>作者：刘欣</p>
<p>原文地址：<a href="http://mp.weixin.qq.com/s/l3feZ7NaV1pIJ52K5JCQEw" target="_blank" rel="noopener">码农翻身-JavaScript王国的一次旅行，一个没有类的世界怎么玩转面向对象？</a></p>
</blockquote>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>作为Java 帝国的未来继承人，Java小王子受到了严格的教育， 不但精通Java语言、Java虚拟机、java类库和框架，还对各种官方的Java规范了如指掌。   </p>
<p>近日他听说一个叫做Javascript的屌丝逆袭了， 成功地建立了一个独立的王国， 不但成了前端编程之王， 还不断地蚕食Java帝国的领地 ！  </p>
<p>按照小王子宫廷老师的说法： 想当年， 这家伙只是运行在浏览器中，完完全全是蹭了Java的热度这才发展起来， 现在竟然回过头来要欺负我们， 还有没有天理了？ 是可忍孰不可忍？ ！</p>
<p>(微信公众号码农翻身注：参见文章《<a href="http://mp.weixin.qq.com/s?__biz=MzAxOTc0NzExNg==&amp;mid=2665513059&amp;idx=1&amp;sn=a2eaf97d9e3000d15a33681d1b720463&amp;scene=21#wechat_redirect" target="_blank" rel="noopener">Javascript：一个屌丝的逆袭</a>》)</p>
<p>小王子可不这么认为， 存在必然是合理的，javascrip必有独特之处， 俗话说知己知彼，百战不殆，他觉得有必要去Javascript王国刺探一下，搜集一下情报， 看看这个曾经的浏览器中的面向对象语言是怎么回事， 为什么那么多码农趋之若鹜。</p>
<h2 id="初步印象"><a href="#初步印象" class="headerlink" title="初步印象"></a>初步印象</h2><p>乔装打扮以后，小王子来到Javascript 王国，这里看起来一派生气勃勃的景象，人们随性而奔放， 不像Java帝国那么严肃而呆板， 让人感觉心情愉悦。</p>
<p>不过令小王子感到不可思议的是， 这里竟然没有官方提供的类库!   人们干活用的工具五花八门，让人眼花缭乱， 什么AngularJS, React , Backbone，Vue, Ember，JQuery, ……   互相之间还吵来吵去，争来争去，煞是热闹。</p>
<p>对比这下，Java帝国有着严密的统治，有着官方提供的庞大类库， 还有一统天下的Web框架 SSH/SSM ，再加上各种各样的Java规范， 码农们只需要拿来学习，干活就行。</p>
<p>没有了选择的烦恼， 但同时也减少了选择的权利， 是好还是坏？  小王子自己也不知道。</p>
<p>小王子还注意到Javascript王国的人写程序几乎没人使用IDE， 找个趁手的文本编辑器就可以开工， 然后扔到浏览器中去运行测试，真是轻量级啊！  唉， 我们Java帝国还在争论IntelliJ IDEA和Eclipse孰优孰劣,   实在是没有必要啊。</p>
<h2 id="没有类怎么创建对象"><a href="#没有类怎么创建对象" class="headerlink" title="没有类怎么创建对象"></a>没有类怎么创建对象</h2><p>随着调查的深入，小王子愈发觉得吃惊， 这里竟然没有类的概念！  一个面向对象的语言竟然没有类！ 这和小王子从出生就被灌输的概念可是背道而驰！  </p>
<p>没有类怎么创建对象 ？ 小时候宫廷老师经常说： 先写一个类， 然后才能从这个类new出一个对象出来 。  </p>
<p>可是眼前却有着无数的javascript对象， 他们在不断地产生、消亡，一起辛苦地工作，支撑起庞大的、生机勃勃的帝国。</p>
<p>这些对象是从哪里来的？  小王子百思不得其解， 正值正午时分， 小王子看到前面有一家JSON酒馆，决定先歇歇脚，美美地吃一顿再说。</p>
<p>小王子要了二斤熟牛肉，三碗酒，正要开始享用， 只听到旁边桌子的一个穿着长袍的人问道：哎，你说的那个对象的原型是什么？　</p>
<p>另一位戴眼镜的则低声说：嘘，噤声，国王刚颁布命令，原型法是我们帝国的秘密，禁止公开讨论，以防被Java帝国给学了去。</p>
<p>小王子心中一动， 马上把小二叫来，要来上等酒菜， 送到邻桌，请两位吃酒。 一番酒喝下来， 小王子终于获得了两人的初步信任， 原来他们还是负责审查javscript语言规范的官员。</p>
<p>小王子问道： “我家世代经商， 走南闯北，去过C++王国，Java帝国， C#帝国， 他们都是号称面向对象的语言， 都有class 和 object的区分， 可是到了咱们javascript王国， 我怎么连一个class 都没有看到啊？ ”</p>
<p>戴眼镜的官员说： “我们不用class， 那玩意儿太不直观了 ！”</p>
<p>小王子暗暗称奇， 可是仔细一想， 好像就是这样啊， <strong>想</strong>当初我学习Java的时候， 费了好大的劲才接受了class这个概念，实际上面向对象的系统，不就是对象之间的交互吗？ 要类干什么？</p>
<p>然后小王子问了一个关键问题： “没有class, 怎么创建对象啊”</p>
<p>“外乡人， 没那么复杂，你想想什么是对象啊，不就是属性加上方法吗？　你看看我们这就创建一个对象出来 ”  这位官员说着，手指头沾着酒水在桌子上写了起来：<br><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fhwhzphly6j20cw05ft9x.jpg" alt="创建对象"></p>
<p>看到没有，这个animal对象定义了一个属性name, 和一个方法 eat , 简单吧？”</p>
<p>的确是简单又明了，完全不需要class， 一个对象就创建了，小王子面前似乎打开了一扇新的大门。</p>
<p>“由于对象并不和类关联， 我们可以随意地给这个对象增加属性：” 眼镜官员补充到。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fhwi0tnpisj20fp01kq3h.jpg" alt="增加对象"></p>
<p>“还能这么玩？！” 小王子被惊到了，没有类的约束，这些对象也太自由了吧。</p>
<h2 id="没有类怎么继承"><a href="#没有类怎么继承" class="headerlink" title="没有类怎么继承"></a>没有类怎么继承</h2><p>“那继承怎么实现， 继承可是面向对象的重要概念啊”</p>
<p>眼镜官员说： “简单啊，继承不就是让两个对象建立关联嘛！  在我们javascript王国，每个对象都有一个特殊的属性叫做<strong>proto</strong>， 你可以用这个属性去关联另外一个对象（这个对象就是所谓的原型了） ， 来我给你画一下”</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fhwi31b6rej20bj07xjt3.jpg" alt="继承"></p>
<p>这段酒水写成的代码不长，但是却深深地震撼了小王子， 因为其中信息量非常巨大，隐藏了“原型”的秘密， 小王子不由得陷入了深思：</p>
<p>对象dog 的原型是animal (注意：也是一个对象)，  对象cat的原型也是animal 。</p>
<p>无论是dog还是cat ，都没有定义eat()方法， 那怎么可以调用呢？</p>
<p>当eat方法被调用的时候，先在自己的方法列表中寻找， 如果找不到，就去找原型中的方法， 如果原型中找不到， 就去原型的原型中去寻找……   最后找到Object那里， 如果还找不到， 那就是未定义了。</p>
<p>这里的这几个对象肯定是通过<strong>proto</strong>建立了一个原型链！</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fhwi3i5lirj20gt0f8dif.jpg" alt="原型链"></p>
<p>嗯， 我师父给我讲JVM虚拟机的时候， 也提到了一个对象在执行方法的时候，需要查找方法的定义，这个查找的次序也是先从本对象所属的类开始， 然后父类， 然后父类的父类…… 直到Object,  思路是一模一样的！</p>
<p>只不过Java 的方法定义是在class中， 而这个javascript 的方法就在对象里边， 现在我觉得似乎在对象里更加直观一点啊。</p>
<p>属性和方法应该类似，也是沿着原型链向上查找， 不过这里dog的name属性似乎覆盖了animal的name属性， 还有那个this, 在调用dog.eat()的时候，应该是指向dog这个对象的。</p>
<p>看来面向对象的理念都是想通的啊。 想着想着，小王子脸上竟然露出了笑容。</p>
<p>看到小王子像程序卡住一样，不动了，  穿长袍的官员推了小王子一把： 外乡人， 你怎么了？</p>
<p>小王子意识到自己的失态， 赶紧说： “哦，没啥， 我觉得你们使用的这个’原型‘的办法很精妙啊， 完全不用类就实现了继承。”</p>
<p>眼镜官员一愣： “外乡人， 看来你悟性不错， 帝国的秘密已经被你给洞察了， 不过很多新来的程序员就不容易体会到这一点， 于是我们就做了一个变通， 让javascript可以像Java那样new 出对象出来。说来惭愧， 这完全是为了迁就那些C++,Java, C#程序员啊 ”</p>
<h2 id="向Java靠拢"><a href="#向Java靠拢" class="headerlink" title="向Java靠拢"></a>向Java靠拢</h2><p>小王子说：”什么变通办法？ 难道你们也开始使用类了吗？“</p>
<p>“不不， 我们提供了一个叫做构造函数的东西。还是给你写点儿代码吧 ”  官员说着，又蘸着酒水写了起来：</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fhwi4igkwfj20cv07v0vw.jpg" alt="构造函数"></p>
<p>小王子说道： “那个function 已经有点 class的感觉了啊,  天呐我竟然看到了this这个关键字， 对了那个Student是你故意写的大写吗？ ”</p>
<p>“是啊 ， 这样以来看起来就像Java的类了。但是，中间有个问题，你看出来了吗？ ”</p>
<p>小王子想了一阵：“ 是不是说每个新创建对象都有一个sayHello函数？ 在Java中函数都是定义在class 上的。 如果定义对象上， 那就意味着每个对象都有一份， 太浪费了。”</p>
<p>“是的，所以我们得提供一种更加高效的办法， 把这个sayHello函数放到另外一个地方去！ ”</p>
<p>“放到哪里？ ”</p>
<p>“记得我们刚才说的原型链吗？  当一个对象调用方法的时候，会顺着链向上找，所以我们可以创建一个<strong>原型对象</strong>，其中包含sayHello函数，  让andy, lisa这些从Student创建起来的对象指向这个原型就ok了。”</p>
<p>“可是你这里只有构造函数Student,  在哪里创建原型对象呢？  怎么把andy,lisa 这些对象的<strong>proto</strong>指向原型对象呢？ 不会让我手工来指定吧。”</p>
<p>眼镜官员瞪了一眼小王子说： “我们javascript帝国肯定不会这么麻烦程序员的， 我们可以把这个原型对象放到Student.prototype这个属性中（注意，不是<strong>proto</strong>）， 这样一来，每次当你创建andy,lisa这样的对象时， javascript 就会自动的把原型链给建立起来！”</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fhwi5hi3kzj20dl0afn0p.jpg" alt=""></p>
<p>小王子面露难色：“唉，这理解起来有点难啊。”</p>
<p>“还是画个图吧， 当你去new Student的时候，javascript会建立这样的关系链：”</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fhwi63fegej20ig0dzq68.jpg" alt="关系链"></p>
<p>小王子说： “明白了，这个所谓的构造函数Student 其实就是一个幌子啊， 每次去new Student的时候，确实会创建一个对象出来（andy或者lisa) ， 并且把这个对象的原型(<strong>proto</strong>)指向 Student.prototype这个对象，这样一来就能找到sayHello()方法了。”</p>
<p>眼镜官员回答：“没错，这个地方容易让人混淆的就是<strong>proto</strong>和prototype这两个属性， 唉，我也不知道最早为什么这么干， 实在是不优雅。”</p>
<p>“是啊，这个构造函数再加上prototype的概念，实在是让人费解， 所以我们商量着提供一点语法糖降低程序员的负担。”   长袍官员附和到。</p>
<h2 id="语法糖"><a href="#语法糖" class="headerlink" title="语法糖"></a>语法糖</h2><p>听到语法糖，小王子觉的很亲切， 因为 Java 中也提供了很多方便程序员的语法糖。</p>
<p>当长袍官员写出javascript的语法糖的时候， 小王子不由得大吃一惊：</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fhwi7gb2efj20d707bjt8.jpg" alt=""></p>
<p>这语法糖已经把javascript变得非常像Java, C#，C++的类了， 看来javascript帝国为了“讨好”程序员， 已经努力的在改变了， 我们java帝国看来得加油啊。</p>
<p>小王子现在明白了Javascript是一个基于原型实现的面向对象的语言， 根本没有类的概念， 新的方式给小王子的思维观念带来了重大的冲击。  </p>
<p>在这里待久了，他又了解到javascript强大的函数式编程，越来越喜欢javascript, 都有点乐不思蜀了。</p>
<p>小王子还会回到Java帝国吗？</p>
]]></content>
      
        <categories>
            
            <category> 学习总结 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 理解计算机 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[什么是框架？]]></title>
      <url>/2017/07/24/%E4%BB%80%E4%B9%88%E6%98%AF%E6%A1%86%E6%9E%B6%EF%BC%9F/</url>
      <content type="html"><![CDATA[<p>想起当初学习 Java 和 Android 开发的时候最后一个没有迈过去的门槛就是框架了。一开始我还很纳闷什么是框架，后来学习的时间长了才慢慢理解这个概念。同样，我们今天来看看码农翻身公众号的文章，该文章是以一个故事的形式来展开，极其有趣。通过这个故事来深入理解一下什么是框架</p>
<a id="more"></a>
<hr>
<blockquote>
<p>来源：码农翻身 微信公众号 </p>
<p>作者：刘欣</p>
<p>原文地址：<a href="http://mp.weixin.qq.com/s/En7nC2cjVeNI_vLjr4nYTg" target="_blank" rel="noopener">码农翻身-一个故事讲完https</a></p>
</blockquote>
<p>码农菜鸟张大胖立志走上Java之路， 听了大神Bill的指点， 先学了Java SE, 把集合、线程、反射、IO、泛型、注解之类的基础知识学了一遍， 在Bill的严厉督促下，写了大量的代码。</p>
<p>然后开始学Web基础，什么Http, html, javascript , css , servlet, jsp , tomcat …… 又是一大堆知识点。 他在网上找了一个小网站， 自己模拟着做了一下， 虽然不是专业美工， 界面惨不忍睹， 但总算是把功能模仿了七七八八， 很有成就感。</p>
<p>大胖拿去给Bill 看了， Bill 夸奖道： “嗯，功能实现的还可以， 没有用任何框架能做成这样子， 很不错。 ”</p>
<p>大胖说： “框架？  什么是框架？”</p>
<p>Bill 愣了一下： “ 你还突然把我给问住了， 我们整天开口框架，闭口框架， 现在让我给框架下个定义， 我还真说不出来， 让我想想。 ”</p>
<p>Bill 闭目养神， 大胖虔诚等待。</p>
<p>不到一炷香功夫， Bill睁开眼睛：“ 我来给你举个例子， 你不是刚刚用servlet和jsp做了小的Web项目吗， 假设有人出钱让你再做一个类似的系统，你会怎么办？”</p>
<p>“那我就把现在的代码复制一下， 在上面改改， 不就得了？ ”</p>
<p>“如果有十个八个类似这样的项目呢， 难道你都通过复制粘贴来做吗？” Bill 问</p>
<p>“十个八个？ 我还是跳楼去吧。  ”</p>
<p>“那你没有想想把其中重复的一些东西抽取出来， 形成可以复用的东西？”</p>
<p>张大胖说： “ 听你这么说，还真的有一点可以复用的东西， 比方说URL和业务代码的映射， 我经常会遇到类似这样的 url : www.xxx.com?action=login ， 在后台的servlet 中我就判断，  如果action 的名称是login ,   我就把userName, password 这样的参数从表单中提取出来， 执行登录的代码。  我得写很多的if else 才能支持不同的业务逻辑， 很折磨人。 有时候我就想， 要是有一种方法， 能够直接把URL和Java类直接映射起来就好了 ，  这样就轻松多了！”</p>
<p>“没错，这是一个很好的想法， 还有吗？ ” Bill 笑着问。</p>
<p>“嗯。。。 再比如数据验证啊，比如登录时用户名或者密码出错， 我要在浏览器端显示错误提示信息，这个也很难搞啊， 错误提示的字体、颜色、图标、位置太烦人了。”</p>
<p>“还有吗？”</p>
<p>“对了，访问数据库也是个大问题， 我写了很多的SQL, 很多的JDBC 代码, 仅仅是为了把数据从数据库取出来， 放到Java 对象中去。 你肯定知道，直接用JDBC编程得处理很多细节问题：一定要记住关闭连接了， 处理异常了 。。。等等， 不瞒你说，很多代码都是我复制粘贴的。”</p>
<p>“难道你不能写一个通用的类， 传入SQL，返回结果集吗？ ”  Bill 问道。</p>
<p>“那我肯定是写了， 但是把结果集变成Java 对象还有一段很长的路呢， 没啥技术含量， 纯粹体力活， 怪不得人家叫我们码农！ ”  大胖愤愤的说。</p>
<p>Bill 说： “我刚才翻了翻你的代码， 我发现很多的地方都让人不爽啊， 比如你几乎把所有的业务逻辑都写到Servlet当中去了， 中间还掺杂者页面控制和跳转， 这么乱七八糟像意大利面条一样的代码过了一个月估计你自己都看不明白了。 ”</p>
<p>大胖不好意思的笑了： “不用一个月，  这刚过了一个星期我就犯晕了。”</p>
<p>“所以嘛， 其实你这些问题我们的前辈早就遇到了， 他们也苦苦探索， 不断寻找好的实现方式， 找到以后就把各种经验给固化下来， 称为最佳实践。”</p>
<p>“最佳实践？  能举个例子嘛！”</p>
<p>“比如在Web开发中就有一个很好的实践啊，叫做MVC。  就是针对你上面的业务逻辑和页面控制混在一起提出的解决办法。 这个实践会强烈的建议你把数据模型、页面展示、页面跳转控制分开来写， 防止搅成一团。”  </p>
<p>Bill意犹未尽， 继续举例： “再比如你说的第一个问题， 也早就有解决方案了， 可以利用XML或者Java注解来描述URL和Java 类之间的关系，你只需要声明一下， 背后的操作，都交由框架去处理了。  还有你的Java 对象和数据库表的对应关系， 也只需要声明一下，框架就可以帮你把数据取出来，填充到Java对象中去，这就极大的减轻了你的工作量。”</p>
<p>“Bill,   你又提到框架这个词了，可不可以这么说， 框架就像一个模板， 里边已经预置了一些公认的最佳实践，我要是想用的话， 把我项目相关的东西填充进去就可以了，是不是这样？ ”</p>
<p>“可以这么理解， 框架像个半成品， 是无法独立运行的，必须由开发人员按照它定义的规则，把项目的代码放置到指定的地方， 由框架整合起来，这才是一个完整的应用程序。”</p>
<p>大胖挠着头说： “那框架其实也没什么啊， 我只要理解了那些最佳实践， 掌握了它的规则，可不就学会了吗?”</p>
<p>“没错， 现在很多Java Web系统都是基于像SpringMVC,  Hibernate, MyBatis这样的流行框架构造起来的，  框架不得不学， 但是如果只会使用框架， 只会填充代码， 那只是一个HTML填空人员。”</p>
<p>“那我学完了框架，可以用框架做项目了， 接下来学什么？” 大胖心里有点没底。</p>
<p>“你要是对Java 后端编程感兴趣， 还有很多东西啊， 用框架实现了业务只是很小一块， 还有系统架构设计， 缓存、性能、高可用性、分布式、安全、备份等很多内容啊， 你学的越多，就会发现无知的领域更多， 所谓学无止境啊！”</p>
<p>张大胖目视远方，沉默了。。。。。</p>
<p>张大胖听大神Bill讲解了框架的作用，回去思考了两天，茅塞顿开。</p>
<p>框架只是一个半成品而已， 这个半成品当中固化了很多最佳的实践， 开发人员必须把自己的代码填充到框架当中才能成为一个完整的应用程序。</p>
<p>说起来简单，  到底怎么“填充”呢 ？  码农们写出来的代码怎么才能让框架知道， 并且调用呢？</p>
<p>张大胖本来想找Bill 问个明白，  但转眼一想， 自己要是能思考出结果岂不更加印象深刻？ ！</p>
<p>他的脑子开始热身，迅速进入高速运转状态，  叮的一声， 一个想法跨入他的脑海： 可以用继承啊！</p>
<p>框架定义一些抽象类(如Java 中的abstract class ) 让具体的应用代码去继承， 抽象类的好处是可以写具体方法， 也可以只声明抽象方法而不实现 – 具体的实现肯定要留给码农们的应用程序了。</p>
<p>在抽象类的具体方法中，可以处理一些框架公用的逻辑， 然后调用那些子类应该实现的抽象方法， 这不就把框架和应用结合起来了吗？</p>
<p>嗯， 这不就是我上周看过的一个著名的设计模式： 模板方法吗？ 用在此处挺合适的嘛， 大胖不由的一阵得意， 似乎是自己重新发明了这个设计模式。</p>
<p><img src="http://i4.piimg.com/1949/973a8f5f0dcaaec7.jpg" alt="模板方法"></p>
<p>（注： Action 为抽象类，doBusiness 为抽象方法，其他为具体方法）</p>
<p>张大胖马上向Bill汇报自己的新发明，  Bill 鼓励到： “你小子开窍了啊， 这的确是一个办法， 著名的MVC框架struts1 就是这么干的， 还有JUnit的早期版本,更早的EJB1.x, 2.x 都是这样，  都需要自己的业务类/测试类去继承一个框架的抽象类， 实现抽象方法才可以。”</p>
<p>张大胖知道Bill的习惯是先扬后抑， 静静的等待着转折。</p>
<p>“但是，” 转折果然如期而至， “ 这种方法让人感到不爽，业务类比较死板 ， 比如你必须得用框架规定的方法名， 没法自己定制。例如JUnit的早期版本， 测试用例的初始化方法必须得叫Setup,  销毁方法必须是TearDown,    你想换成init/destroy 是肯定不行的， 因为框架根本不知道。 ”</p>
<p>张大胖说： “这没什么啊， 我觉得还是比较好的编程实践呢， 大家都保持名称一致，可读性很好啊”</p>
<p>“其实你往深处想想就会明白， 这种方式其实让你的业务类和框架绑定了！ 这是最要命的。 你的例子中抽象类是Action , 如果这个Action 很‘重’ ，依赖HttpServletRequest/HttpServletResponse，   必须得有一个Web容器（Tomcat）才能创建起来， 那你的LoginAction 可就悲催了， 想要做个单元测试必须得把Tomcat跑起来才行。 ”</p>
<p>张大胖说：“听你这么一解释， 我明白了，这种继承的方式问题很大啊。 是不是可以这么说， 框架和业务类最好是独立变化， 中间用一座桥来连接起来。”</p>
<p>Bill 赞许道 ： “对，  你想想这个桥用什么‘材料’做比较好？”</p>
<p>张大胖挠挠头，一脸懵逼。</p>
<p>“回到原始的问题， 我们不就是试图让框架把我们的业务类创建起来，然后调用特定的方法吗？  完全不用在代码中写死， 可以采用别的声明式的办法啊”   Bill  循循善诱。</p>
<p>“难道在代码中写注释？  ”  张大胖继续一脸懵逼。</p>
<p>“注释都是纯文本， 不是结构化的信息啊， 难道你让框架读取文本，然后做个语义分析？ 根本不可能， 更何况注释在编译过的class中间已经不复存在了，无处可寻， 框架怎么读？   再想想”  Bill急得就差自己公布答案了。</p>
<p>“啊， 我知道了，你刚才说的结构化信息提醒了我，  可以用XML啊， XML来描述结构化东西很擅长！ ”</p>
<p>张大胖说着还写了个例子出来： “通过用XML来描述， 框架就可以找到相关的类和方法，就可以调用了”</p>
<p><img src="http://i4.piimg.com/1949/7ead6364339368d3.jpg" alt="Markdown"></p>
<p>“是的， 你举了一个小例子， 实际上由于XML的扩展性， 能描述极为复杂的语义，很多框架都会制定规则， 让码农们去‘声明’自己的业务类及其方法。 “</p>
<p>“这种声明的方式真是不错，业务类不用继承框架的抽象类了，我刚想到一个问题，　我们的Java类和XML配置不在一起，  当我们想知道一个类的方法，字段是怎么被框架使用的时候，还得回过头来查看XML， 这实在不爽。 ”　张大胖问道。</p>
<p>“这是个好问题， 那就把这种‘声明’信息挪到Java 类中去吧！”  Bill 说。</p>
<p>“你刚才说了不能用注释， 怎么在Java 文件中写‘声明’ 啊？”</p>
<p>“没有注释， 可以有注解啊！ ”</p>
<p>“你是说那个@author, @version, @return, @see这样用来生成Java文档的注解吗？ 还有什么@Override，@Deprecated, 我从来都不用。”</p>
<p>Bill 笑了： “那只是Java内置的一些注解， 现在Java可以自定义注解了， 我们完全可以利用这种注解来声明框架想用的信息， 我给你举个例子：”</p>
<p><img src="http://i4.piimg.com/1949/8f3ff8ea22a7f8a5.jpg" alt="Markdown"></p>
<p>张大胖问道： “@Controller, @ReqeustMapping, @RequestParam 都是框架自定义的注解？“</p>
<p>“是的， 你可以直接在Java 代码中使用， 在运行时框架能读取这些注解， 就知道你想干什么事情了。”</p>
<p>“ 嗯，所有的信息都在Java 中了， 比XML看起来更简洁一些， 果然是十分酸爽。” 张大胖十分感慨 ，“不过，这样一来声明式的信息又四处分散，维护又不方便了。 ”</p>
<p>Bill说： “哪有十全十美的东西？　在编程中根据情况选择吧！</p>
]]></content>
      
        <categories>
            
            <category> 学习总结 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 理解计算机 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[散列查找(哈希表)基础讲解]]></title>
      <url>/2017/07/21/%E6%95%A3%E5%88%97%E6%9F%A5%E6%89%BE-%E5%93%88%E5%B8%8C%E8%A1%A8/</url>
      <content type="html"><![CDATA[<p>还记得上个月面试官问我能不能谈谈哈希表，然后我就说了”数组+链表“。然后就再也憋不出任何一句话了，因为数据结构我刚好学到二叉树，一段黑历史了。不说了，现在补上之前没有填上的坑……</p>
<a id="more"></a>
<hr>
<h2 id="引子"><a href="#引子" class="headerlink" title="引子"></a>引子</h2><p>相信大家多多少少肯定会对查找算法有些了解，比如顺序查找、二分查找、利用“二叉搜索树”查找等等。顺序查找适用于数据量不大的时候；二分查找虽然时间复杂度较为乐观，但前提是数据元素已经按照关键字排序并且存储在连续的地址空间中；二叉搜索树查找具有相当不错的时间复杂度，但有时需要附加条件。那这样我们就需要一种适应性广而速度又快的查找算法。这就是本篇要讲的散列查找。</p>
<p>其实我们生活中有许多例子也是运用到了散列查找的精髓。举个栗子，我们琢磨一下查英文字典的过程，其实这个过程结合了散列查找、二分查找和顺序查找这几种查找方法。</p>
<h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><p>讲解基本概念之前，我们再回到查字典这个例子。我们会根据所查单词的首字母去字典的检索表获取该单词所在位置大概在整本字典的哪一部分。然后再翻到大概页面仔细查找相对应的单词。而在散列查找的概念，上面所说的单词首字母就是散列查找中的“关键词”(key)。然后通过“散列函数”求出关键词所在的存储位置(value)。但我们也得重点说明一下查字典时我们事先“估计”关键词的“大致位置”，而散列函数“计算”的是关键词的“准确位置”。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fhwgueudrbj20ew03bgle.jpg" alt="hash diagram"></p>
<blockquote>
<p>散列查找之所以能够通过计算来快速定位要找的关键词，一个基本的前提是在存放的时候也要通过同样的“计算方法”来定位存储的位置。</p>
</blockquote>
<p>从抽象的数据类型的角度看，上表实际上就是一张符号表(Symbol Table)，我们也称它为散列表或哈希表(Hash Table)。它定义为“名字-属性”对的集合。名字和属性的含义随着应用的不同而不同，</p>
<p> 符号表的抽象数据类型描述为：</p>
<p><strong>类型名称</strong>：符号表(SymbolTable)</p>
<p><strong>数据对象集</strong>：符号表是“名字(Name)-属性(Attribute)”对的集合</p>
<p><strong>操作集</strong>：对于一个具体的符号表 $ Table \in SymbolTable $，一个给定名字 $Name \in NameType$，属性 $Attr \in AttributeType$，以及正整数 $TableSize$，符号表的基本操作主要有</p>
<ul>
<li><code>SymbolTable CreateTable(int TableSize)</code>-创建空的符号表，其最大长度为 <code>TableSize</code></li>
<li><code>boolean IsIn(SymbolTable Table,NameType Name)</code>-查找指定名字<code>Name</code> 是否在符号表中，若是返回<code>true</code>；否则返回<code>false</code></li>
<li><code>AttributeType Find(SymbolTable Table,NameType Name)</code>-获取符号表<code>Table</code>中指定名字<code>Name</code>对应的属性</li>
<li><code>boolean Modify(SymbolTable Table,NameType Name,AttributeType Attr)</code>-将<code>Table</code>中指定名字<code>Name</code>的属性修改为<code>Attr</code>。成功返回<code>true</code>；找不到<code>Name</code>则返回<code>false</code></li>
<li><code>boolean Insert(SymbolTable Table,NameType Name,AttributeType Attr)</code>-向<code>Table</code>中插入一个新名字<code>Name</code>及其属性<code>Attr</code>。成功则返回<code>true</code>；若<code>Name</code>已存在则返回<code>false</code></li>
<li><code>boolean Delete(SymbolTable Table,NameType Name)</code>-从<code>Table</code>中删除一个名字<code>Name</code> 及其属性。成功返回<code>true</code>；找不到<code>Name</code>则返回<code>false</code></li>
</ul>
<p>散列(Hashing)是一种重要的查找算法。它的基本思想是：以数据对象的关键词 key 为自变量，通过一个确定的函数关系 $h$ ,计算出对应的函数值 $h(key)$ ，把这个值解释为数据对象的存储地址，并按此存放，即“$存储位置=h(key)$”。</p>
<p>在查找某数据对象时，有函数 $h$ (也称为哈希函数)对给定值 key 计算出地址，将 key 与该地址单元中数据对象关键字进行比较，确定查找是否成功。因此散列法又称为“关键字-地址转换法”。</p>
<p>说到这里，读者可能会有疑问：如果有两个（或更多）关键词通过某散列函数计算出相同的存储位置，那又该怎么办？总不能把多个多个关键词对应的信息都存放在相同的位置吧？我们把这种情况叫做冲突。因此，我们还需要研究解决冲突的方法。这就引出了后面我们要讲的散列查找法的两个基本内容：</p>
<blockquote>
<p>1.如何构造散列函数</p>
<p>2.如何解决冲突</p>
</blockquote>
<h2 id="散列函数的构造方法"><a href="#散列函数的构造方法" class="headerlink" title="散列函数的构造方法"></a>散列函数的构造方法</h2><p>一个“好”的散列函数一般应考虑下列两个因素：</p>
<blockquote>
<p>1.计算简单，以便提高转换速度</p>
<p>2.关键词对应的地址空间分布均匀，以尽量减少冲突。</p>
</blockquote>
<p>关键词可分为<strong>数字型关键词</strong>和<strong>字符串型关键词</strong>这两种类型</p>
<h3 id="数字关键词的散列函数构造"><a href="#数字关键词的散列函数构造" class="headerlink" title="数字关键词的散列函数构造"></a>数字关键词的散列函数构造</h3><p>构造这类散列函数只不过把原来的数字按某种规律转换成另一个数字</p>
<h4 id="直接定址法"><a href="#直接定址法" class="headerlink" title="直接定址法"></a>直接定址法</h4><p>$$ h(key)=a \times key + b                   (a、b为常数) $$</p>
<p>这类函数计算简单，分布均匀，不会产生冲突，但要求地址集合与关键词集合大小相同，因此对于较大的关键词集合不适用。</p>
<h4 id="除留余数法"><a href="#除留余数法" class="headerlink" title="除留余数法"></a>除留余数法</h4><p>假设散列表长为 TableSize（TableSize 的选取，通常由关键词集合的大小 $n$ 允许最大装填因子 $\alpha$ 决定），选择一个正整数 $p \leq TableSize$ ，散列函数为：</p>
<p>$$<br>h(key)= key \bmod p<br>$$</p>
<p>设散列表空间大小为 $m$ ，填入表中的元素个数是 $n$，则称 $\alpha = n/m$ 为散列表的装填因子。一般散列表大小设计使得 $\alpha=0.5 \sim0.8$为宜</p>
<p>使用除留余数法，选取合适的 $p​$ 很重要，一般选取 $p​$ 为小于或等于散列表表长 $TableSize​$ 的某个最大素数比较好。用素数求得的余数作为散列地址，比较均匀分布在整个地址空间上的可能性比较大。</p>
<p>大家也可能注意到如果 $p &lt; TableSize$ ，则意味着地址 $p \sim TableSize -1$ 是不能通过散列函数直接映射到的。</p>
<h4 id="数字分析法"><a href="#数字分析法" class="headerlink" title="数字分析法"></a>数字分析法</h4><p>如果数字关键词的位数比较多，我们可以根据实际情况将关键词中随机性比较大的位数提取出来形成一个新的关键词。例如 11 位手机号，前 3 位和中间 4 位在一定范围内很容易发生重复。所以直接选取最后 4 位作为散列地址。如果 4 位正整数太大，不适合作为地址，可以结合前面的除留余数法再做一次转换。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fhwgv2bcvkj20ik0b63yw.jpg" alt="手机号码各位数含义"></p>
<h3 id="字符串关键词的散列函数构造"><a href="#字符串关键词的散列函数构造" class="headerlink" title="字符串关键词的散列函数构造"></a>字符串关键词的散列函数构造</h3><h4 id="简单的散列函数——ASCII-码加和法"><a href="#简单的散列函数——ASCII-码加和法" class="headerlink" title="简单的散列函数——ASCII 码加和法"></a>简单的散列函数——ASCII 码加和法</h4><p>$$<br>h(key)=(\sum key[i]) \bmod TableSize<br>$$</p>
<p>函数很简单，然而均匀性也较差。但仔细研究一下你会发现关键词集合元素可能性个数大大超过存储的散列地址个数。显然冲突会是很严重的，特别是关键词集合元素个数比较大的情况下。</p>
<h4 id="简单的改进——前-3-个字符移位法"><a href="#简单的改进——前-3-个字符移位法" class="headerlink" title="简单的改进——前 3 个字符移位法"></a>简单的改进——前 3 个字符移位法</h4><p>我们改进一下上面的散列函数<br>$$<br>h(key)=(key[0]+key[1]\times 27+key[2]\times 27^{2})<br>$$<br>这里我们先假设字符串的每个字符只有不分大小的英文字母（26个）和空格符（1个）。函数仅考虑关键词的前 3 个字符。若忽略空格符不急，则前 3 位所有可能的不同组合为 $26^{3}=17576$ 种，似乎该数字不大。但是现实生活中英文不是随机的，真正的英文单词中前 3 位的不同组合大约不到 3000 种。这样不仅难以确定 $TableSize$ 大小而且具有相同的前 3 个字符的不同关键词一定会发生冲突。显然这个还不是很合适。</p>
<h4 id="好的散列函数——移位法"><a href="#好的散列函数——移位法" class="headerlink" title="好的散列函数——移位法"></a>好的散列函数——移位法</h4><p>$$<br>h(key)=(\sum_{i=0}^{n-1}key[n-i-1]\times32^i)\bmod TableSize<br>$$</p>
<p>这个散列函数涉及关键词的所有 $n$ 个字符，并且分布得很好。每位字符占 5 位(即 $2^5=32$)。具体实现时并不需要一一做乘法运算，而是通过将每位字符转换成 二进制 ASCII 码值，通过一次左移 5 位来完成，低位补 0 ，得到的二进制结果再转换成十进制数值，这就是字符 ASCII 码值乘以一次 32 的结果。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fhwgvk6mruj22u20j74dr.jpg" alt="移位法求积"></p>
<h2 id="处理冲突的方法"><a href="#处理冲突的方法" class="headerlink" title="处理冲突的方法"></a>处理冲突的方法</h2><p>在前面的散列函数构造过程中，我们努力使散列地址均匀分布于整个地址空间，但是实际应用中，冲突不可避免只能减少。因此我们应该研究如何解决冲突的问题。</p>
<h3 id="开放定址法"><a href="#开放定址法" class="headerlink" title="开放定址法"></a>开放定址法</h3><p>假如你打算在某个小区买套房子住，根据你的生辰八字(关键词)，风水先生(散列函数)告诉你 8-801 最适合你。正准备下单的时候，开发商却告诉你说该房子已被人预定（冲突发生）。此时我们可能会看看其他附近其他套房子。这就是开放定址法。</p>
<p>所谓开放地址法，就是一旦产生了冲突，即改地址已经存放了其他数据元素，就去寻找另一个空的散列地址。在没有装满的散列表中，空的散列地址是有的，但是怎么去找，这是我们应该考虑的因素之一</p>
<p>一般来说，如果关键词经过散列函数得出散列地址后发现有冲突，那么就需要试探性散列函数去试试其他附近的散列地址是否是空的。如果还发生冲突的话就再次使用试探性散列函数再去试试其他散列地址。试探性散列函数的基本公式是：<br>$$<br>p_i(key)=(h(key)+d_i)\bmod TableSize  (1\leq i &lt; TableSize)<br>$$<br>上面式子中，$i$ 表示冲突次数。根据 $d_i$ 的选取方式不同，我们可以得到不同的解决冲突方法。上面的地址必须对 $TableSize$ 取余。</p>
<h4 id="线性探测法"><a href="#线性探测法" class="headerlink" title="线性探测法"></a>线性探测法</h4><p>我们举个栗子，某个关键词 $key$ 经过散列函数 $h$ 获得散列地址 $h(key)$ 。但是发现该散列地址不是空的，发生了第一次冲突，此时 $d_1=1$ 。这时候我们就需要使用试探性散列函数去获取试探性散列地址 $p_1(key)$ 。如果 $p_1(key)$ 散列地址也不是空的，就发生了第二次冲突,此时 $d_2=2$ 求得 $p_2(key)$ 散列地址再去尝试。以此类推，我们可以得出 $d_i=i$ ，确定 $d_i$ 取值之后再不断用试探性散列函数去尝试新的散列地址直到没有发生冲突为止。这就是线性试探法。</p>
<p>线性试探法可能使第 $i$ 个散列地址的同义词存入第 $i+1$ 个散列地址，也就说本应存入第 $i$ 个散列地址的数据对象变成了第 $i+1$ 个散列地址的同义词。因为线性试探就是不断在发生冲突的地方附近一一试探，因此极容易出现很多元素在相邻的散列地址上“堆积”起来的叫做“一次聚集”的现象，这种现象会大大降低查找效率。为减轻这种一次聚集效应，可采用下面讲解的平方探测法或双散列探测法。</p>
<h4 id="平方探测法"><a href="#平方探测法" class="headerlink" title="平方探测法"></a>平方探测法</h4><p>按上面的流程，如果 $d_i =\pm i^{2}$ ，即 $d_i$ 的取值依次为 $1^{2}$，$-1^{2}$ ，$2^{2}$ ，$-2^{2}$ ，… ，$q^{2}$ ，$-q^{2}$ 且 $q \leq [TableSize/2]$ 去不断试探下一个存储地址的形式就是平方探测法。我们需要注意一点的就是散列表长度 $TableSize$ 是某个 $4k+3$ ($k$ 是正整数)形式的素数时能保证平方探测法可以探查到这个散列空间。这个是平凡探测法的理论基础。</p>
<h4 id="双散列探测法"><a href="#双散列探测法" class="headerlink" title="双散列探测法"></a>双散列探测法</h4><p>如果公式 $p_i(key)$ 中的 $d_i=i \times h_2(key)$ ，其中 $h_2(key)$ 是另一个散列函数。我们就把它叫做双散列探测法。而第二个散列函数 $h_2(key)$ 的选取至关重要，要确保 $h_2(key)$ 都不能是 0 值，否则所有探测都是同一个位置。我们同时也需要保证所有的散列存储单元都应该能够被探测到，一般形如<br>$$<br>h_2(key)=p-(key \bmod p)(p是小于TableSize 的素数)<br>$$<br>的 $h_2(key)$ 函数具有良好的探测效果。采用双散列探测法会增加探测过程中的计算量，但其期望的探测次数比较少，这使得它在理论上很有吸引力。不过平方探测法不需要计算第二个散列函数，从而在实践中可能更简单又实用。</p>
<h4 id="再散列法"><a href="#再散列法" class="headerlink" title="再散列法"></a>再散列法</h4><p>开放地址法的装填因子 $\alpha$ 会严重影响查找效率，由于表长在一定时间是定值，$\alpha$ 与“填入表中的元素个数”成正比，所以 $\alpha$ 越大填入表中的元素越多，产生冲突的可能性就越大。减少冲突是提高查找速度的直接因素，因为散列表的查找过程基本上与建表过程相同。一些关键词可通过散列函数转换的地址直接找到，另一些关键词在散列函数得到的地址上产生了冲突，需要按处理冲突的方式进行查找。因此加倍扩大散列表减少冲突是一种提高查找效率的方法，此方法的过程就叫做再散列(Rehashing)。</p>
<p>再散列需要新建一个新的两倍大的散列表，再将原表中的数据重新计算分配到新表中。这个过程集中花费时间长，体现在交互系统的现象就是使人感觉系统有“停顿”现象。这种现象在一些实时系统中是致命的，例如医用的生命保障系统中，设备的短暂“停顿”可能导致严重后果，所以需谨慎使用。此时可以采用不需要再散列的“分离链接法”。</p>
<h3 id="分离链接法"><a href="#分离链接法" class="headerlink" title="分离链接法"></a>分离链接法</h3><p>分离链接法(Separate Chaining)是解决冲突的另一种方法，其做法是将所有关键词为同义词(散列地址一致的关键词)的数据对象通过结点链接存储在同一个单链表中。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fhwgx6vsdlj20ci08mgm0.jpg" alt="Separate Chaining"></p>
<h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>懂得基本的数据结构与算法是程序猿的必备素养，学习数据结构与算法的方式也有多种多样。浙江大学计算机系的<a href="http://www.icourse163.org/learn/ZJU-93001?tid=1002019005" target="_blank" rel="noopener">数据结构</a>的网络课程是个相当不错在线课程，课程还提供了在线编程平台<a href="https://pta.patest.cn/" target="_blank" rel="noopener">PTA</a>，感兴趣的朋友可以去看看。</p>
<blockquote>
<p>本文作者：刘志宇</p>
<p>版权声明：本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank" rel="noopener">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！</p>
</blockquote>
]]></content>
      
        <categories>
            
            <category> 学习总结 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 数据结构 </tag>
            
            <tag> 算法 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[一个故事讲完 Https]]></title>
      <url>/2017/07/20/%E4%B8%80%E4%B8%AA%E6%95%85%E4%BA%8B%E8%AE%B2%E5%AE%8Chttps/</url>
      <content type="html"><![CDATA[<p>想起上个月面试官问我了不了解 Https，当时对 HTTP 都不太熟的我只能说”No”。当我看完计算机网络教材的时候，又恰巧看见了微信公众号码农翻身的此篇推送，让我受益良多。</p>
<a id="more"></a>
<hr>
<blockquote>
<p>来源：码农翻身 微信公众号 </p>
<p>作者：刘欣</p>
<p>原文地址：<a href="http://mp.weixin.qq.com/s/StqqafHePlBkWAPQZg3NrA" target="_blank" rel="noopener">码农翻身-一个故事讲完https</a></p>
</blockquote>
<h2 id="序言"><a href="#序言" class="headerlink" title="序言"></a>序言</h2><p>今天来聊一聊https 安全传输的原理。</p>
<p>在开始之前，我们来虚构两个人物， 一个是位于中国的张大胖（怎么又是你？！）， 还有一个是位于米国的Bill (怎么还是你？！)。</p>
<p>这俩哥们隔着千山万水，通过网络联系上了， 两个人臭味相投，聊得火热。</p>
<p>此时正值米国大选， 张大胖亲切地“致电”Bill, 对米国总统大选的情况表示强烈地关注。 Bill则回电说谢谢关心米国人的事情我们米国人自己做主，不用你们歪果仁瞎操心……</p>
<p>张大胖继续“致电”说其实我们支持特朗普， 因为希拉里太情绪化，太难打交道了， 我们挺希望看到特朗普上台这样米国就会变成 The Divided State of America ……</p>
<p>Bill 回电： 拉倒你吧你， 我们米国的政体有着强大的纠错性， 虽然有时候发展得慢， 有时候会走上岔路， 但很快就会回到正途，几百年来稳定得很，不像你们像坐了过山车一样…..</p>
<p>两个人越聊越投机，天南地北，海阔天空，还夹杂着不少隐私的话题。</p>
<h2 id="总是有一种被偷看的感觉"><a href="#总是有一种被偷看的感觉" class="headerlink" title="总是有一种被偷看的感觉"></a>总是有一种被偷看的感觉</h2><p>有一天， Bill 突然意识到： 坏了， 我们的通信是明文的， 这简直就是网络上裸奔啊， 任何一个不怀好意的家伙都可以监听我们通信，打开我们发送的数据包，窥探我们的隐私啊。</p>
<p>张大胖说： “你不早点说，我刚才是不是把我的微信号给你发过去了？ 我是不是告诉你我上周去哪儿旅游了?   估计已经被人截取了吧！”</p>
<p>Bill  提议： “要不我们做个数据的加密？ 每次传输之前， 你把消息用一个加密算法加密， 然后发到我这里以后我再解密， 这样别人就无法偷窥了，像这样： ”</p>
<p><img src="http://i1.buimg.com/1949/ade6db4481ac227a.png" alt="加密数据"></p>
<p>张大胖冰雪聪明，一看就明白了， 这加密和解密算法是公开的，那个密钥是保密的， 只有两人才知道， 这样生成的加密消息（密文） 别人就无法得知了。 他说： “Bill 老兄，你生成一个密钥， 然后把密钥发给我， 咱们这就开启加密消息， 让那些偷窥狂人们哭去吧！”</p>
<p>（码农翻身注：这叫对称加密算法， 因为加密和解密用的是同一个密钥）</p>
<p>一炷香功夫过去了， Bill 还是没有回音， 张大胖忍不住地催促： “快发啊？！！！”</p>
<p>Bill 终于回复了： “ 我感觉有一双眼睛正在虎视眈眈地盯着我们的通话， 如果我把密钥发给你， 也被他截取了， 那加密岂不白费工夫？”</p>
<p>张大胖沉默了， 是啊， 网络是不安全的， 这密钥怎么安全地发过来啊 ？　</p>
<p>“奥，对了，我下周要去米国旅游，到时候我们见一面，把密码确定下来，写到纸上，谁也偷不走， 这不就结了？”　</p>
<p>“哈哈， 这倒是终极解决之道 ”  Bill 笑了， “不过，我不仅仅和你聊天， 我还要和易卜拉欣，阿卜杜拉， 弗拉基米尔，克里斯托夫，玛格丽特， 桥本龙太郎， 李贤俊， 许木木，郭芙蓉，吕秀才等人通信， 我总不能打着飞的，满世界的和人交换密码吧？ ”</p>
<p>张大胖心里暗自佩服Bill同学的好友竟然遍布全球，看来他对加密通信的要求更加强烈啊！</p>
<p>可是这个加密解密算法需要的密钥双方必须得知道啊， 但是密钥又无法通过网络发送， 这该死的偷窥者！</p>
<h2 id="RSA：非对称加密"><a href="#RSA：非对称加密" class="headerlink" title="RSA：非对称加密"></a>RSA：非对称加密</h2><p>Bill 和 张大胖的通信无法加密，说话谨慎了不少， 直到有一天， 他们听说了一个叫做RSA的非对称加密算法，一下子来了灵感。</p>
<p>这个RSA算法非常有意思，它不是像之前的算法， 双方必须协商一个保密的密钥， 而是有一对儿钥匙， 一个是保密的，称为私钥，另外一个是公开的，称为公钥。</p>
<p>更有意思的是，<strong>用私钥加密的数据，只有对应的公钥才能解密，用公钥加密的数据， 只有对应的私钥才能解密</strong>。</p>
<p><img src="http://i1.buimg.com/1949/5e8c39e7ca86956d.png" alt="私钥与公钥"></p>
<p>有了这两个漂亮的特性， 当张大胖给Bill发消息的时候， 就可以先用Bill的公钥去加密（反正Bill的公钥是公开的，地球人都知道）， 等到消息被Bill 收到后， 他就可以用自己的私钥去解密（只有Bill才能解开，私钥是保密的 ）</p>
<p><img src="http://i1.buimg.com/1949/43e126b0647a1475.png" alt="密文"></p>
<p>反过来也是如此， 当Bill 想给张大胖发消息的时候，就用张大胖的公钥加密， 张大胖收到后，就用自己的私钥解密。</p>
<p>这样以来，通信安全固若金汤， 没有任何人能窥探他们的小秘密了。</p>
<h2 id="非对称加密-对称加密"><a href="#非对称加密-对称加密" class="headerlink" title="非对称加密+对称加密"></a>非对称加密+对称加密</h2><p>两人实验了几次，  张大胖说： “Bill  , 你有没有感觉这个RSA的加密和解密有点慢啊？”</p>
<p>Bill叹了口气 ：“是啊， 我也注意到了， 刚才搜了一下，这个RSA算法比之前的对称密钥算法要慢上百倍。我们就是加个密而已，现在搞得都没法用了”</p>
<p>“回到咱们最初的问题，我们想用一个密钥来加密通信，那个对称加密算法是非常快的，但是苦于密钥无法安全传输， 现在有了RSA ,我想可以结合一下， 分两步走　(1) 我生成一个对称加密算法的密钥， 用RSA的方式安全发给你，  (2) 我们随后就不用RSA了， 只用这个密钥，利用对称加密算法来通信,  如何？   ”</p>
<p>Bill 说： “你小子可以啊， 这样以来既解决了密钥的传递问题， 又解决了RSA速度慢的问题，不错。”　</p>
<p>于是两人就安全地传递了对称加密的密钥， 用它来加密解密，果然快多了！</p>
<h2 id="中间人攻击"><a href="#中间人攻击" class="headerlink" title="中间人攻击"></a>中间人攻击</h2><p>张大胖把和Bill 聊天的情况给老婆汇报了一次。</p>
<p>老婆告诫他说： “你要小心啊， 你确定网络那边坐着的确实是Bill ?”</p>
<p>张大胖着急地辩解说：“肯定是他啊，我都有他的公钥，我们俩的通信都是加密的。”</p>
<p>老婆提醒道：＂假如啊，Bill给你发公钥的时候， 有个中间人，截取了Bill的公钥， 然后把自己的公钥发给了你，冒充Bill ，你发的消息就用中间人的公钥加了密，　那中间人不就可以解密看到消息了？＂</p>
<p>张大胖背后出汗了，是啊，这个中间人解密以后，还可以用Bill的公钥加密，发给Bill ,  Bill和我根本都意识不到， 还以为我们在安全传输呢！</p>
<p><img src="http://i1.buimg.com/1949/a58bf0d069be1226.png" alt="中间人攻击"></p>
<p><strong>看来问题出现在公钥的分发上</strong>！  虽然这个东西是公开的， 但是在别有用心的人看来，截取以后还可以干坏事 ！</p>
<h2 id="你到底是谁"><a href="#你到底是谁" class="headerlink" title="你到底是谁"></a>你到底是谁</h2><p>但是怎么安全地分发公钥呢？ 似乎又回到了最初的问题： 怎么安全的保护密钥？</p>
<p>可是似乎和最初的问题还不一样，这一次的公钥不用保密，但是一定得有个办法声明这个公钥确实是Bill的， 而不是别人的。</p>
<p>怎么声明呢？</p>
<p>张大胖突然想到： 现实中有公证处，它提供的公证材料大家都信任，那在网络世界也可以建立一个这样的具备公信力的认证中心， 这个中心给大家颁发一个证书， 用于证明一个人的身份。</p>
<p>这个证书里除了包含一个人的基本信息之外，还有包括最关键的一环：这个人的公钥！</p>
<p>这样以来我拿到证书就可以安全地取到公钥了 ！ 完美！</p>
<p>可是Bill 马上泼了一盆冷水：证书怎么安全传输？ 要是证书传递的过程中被篡改了怎么办？</p>
<p>张大胖心里不由地咒骂起来： 我操， 这简直就是鸡生蛋，蛋生鸡的问题啊。</p>
<p>天无绝人之路， 张大胖很快就找到了突破口： <strong>数字签名</strong>。</p>
<p>简单来讲是这样的， Bill可以把他的公钥和个人信息用一个Hash算法生成一个消息摘要， 这个Hash算法有个极好的特性，<strong>只要输入数据有一点点变化，那生成的消息摘要就会有巨变</strong>，这样就可以防止别人修改原始内容。</p>
<p><img src="http://i1.buimg.com/1949/b1bb655d23b8c5cc.png" alt="消息摘要"></p>
<p>可是作为攻击者的中间人笑了： “虽然我没办法改公钥，但是我可以把整个原始信息都替换了， 生成一个新的消息摘要， 你不还是辨别不出来？”</p>
<p>张大胖说你别得意的太早 ， 我们会让有公信力的认证中心（<strong>简称CA</strong>）用它的私钥对消息摘要加密，形成签名：</p>
<p><img src="http://i1.buimg.com/1949/38d3543e8ee28c6e.png" alt="数字签名"></p>
<p>这还不算， 还把原始信息和数据签名合并， 形成一个全新的东西，叫做“数字证书”</p>
<p><img src="http://i1.buimg.com/1949/e7a1c438c1108a01.png" alt="数字证书"></p>
<p>张大胖接着说：当Bill把他的证书发给我的时候， 我就用同样的Hash 算法， 再次生成消息摘要，然后用CA的公钥对数字签名解密， 得到CA创建的消息摘要， 两者一比，就知道有没有人篡改了！</p>
<p>如果没人篡改， 我就可以安全的拿到Bill的公钥喽，有了公钥， 后序的加密工作就可以开始了。</p>
<p>虽然很费劲， 但是为了防范你们这些偷窥者，实在是没办法啊。</p>
<p><img src="http://i1.buimg.com/1949/495b3241682bbe98.png" alt="验证"></p>
<p>中间人恶狠狠地说： “算你小子狠！ 等着吧，我还有别的招。 对了，我且问你， 你这个CA的公钥怎么拿到？　难道不怕我在你传输ＣＡ公钥的时候发起中间人攻击吗？　如果我成功的伪装成了ＣＡ，你这一套体系彻底玩完。”</p>
<p>张大胖语塞了，折腾了半天，又回到了公钥安全传输的问题！</p>
<p>不过转念一想，想解决鸡生蛋，蛋生鸡的问题必须得打破这个怪圈才行，我必须得信任ＣＡ，并且通过安全的的方式获取他们的公钥，这样才能把游戏玩下去。</p>
<p>（公众号码农翻身注：这些ＣＡ本身也有证书来证明自己的身份，并且ＣＡ的信用是像树一样分级的，高层的ＣＡ给底层的ＣＡ做信用背书，而操作系统／浏览器中会内置一些顶层的ＣＡ的证书，相当于你自动信任了他们。　这些顶层的ＣＡ证书一定得安全地放入操作系统／浏览器当中，否则世界大乱。）</p>
<h2 id="Https"><a href="#Https" class="headerlink" title="Https"></a>Https</h2><p>终于可以介绍https了，前面已经介绍了https的原理， 你把张大胖替换成浏览器， 把Bill 替换成某个网站就行了。</p>
<p>一个<strong>简化的（例如下图没有包含Pre-Master Secret）</strong>https流程图是这样的， 如果你理解了前面的原理，这张图就变得非常简单：</p>
<p><img src="http://i1.buimg.com/1949/ecbc530393f88118.png" alt="Https"></p>
]]></content>
      
        <categories>
            
            <category> 学习总结 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 理解计算机 </tag>
            
            <tag> 计算机网络 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[神经网络入门]]></title>
      <url>/2017/07/19/%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E5%85%A5%E9%97%A8/</url>
      <content type="html"><![CDATA[<p>一直对人工智能感兴趣，但苦于找不到简洁易懂的入门资料。前几天拜读了阮一峰博客中的此篇博文，觉得非常不错，故转载过来，希望那些想了解神经网络的人都能有所收获</p>
<a id="more"></a>
<hr>
<p>眼下最热门的技术，绝对是人工智能。</p>
<p>人工智能的底层模型是”<a href="http://baike.baidu.com/item/%E4%BA%BA%E5%B7%A5%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C" target="_blank" rel="noopener">神经网络</a>“。许多复杂的应用（比如模式识别、自动控制）和高级模型（比如深度学习）都基于它。学习人工智能，一定是从它开始。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071201.jpg" alt="神经网络示意图"></p>
<p>什么是神经网络呢？网上似乎<a href="https://www.zhihu.com/question/22553761" target="_blank" rel="noopener">缺乏</a>通俗的解释。</p>
<p>前两天，我读到 Michael Nielsen 的开源教材<a href="http://neuralnetworksanddeeplearning.com/index.html" target="_blank" rel="noopener">《神经网络与深度学习》</a>（Neural Networks and Deep Learning），意外发现里面的解释非常好懂。下面，我就按照这本书，介绍什么是神经网络。</p>
<h2 id="感知器"><a href="#感知器" class="headerlink" title="感知器"></a>感知器</h2><p>历史上，科学家一直希望模拟人的大脑，造出可以思考的机器。人为什么能够思考？科学家发现，原因在于人体的神经网络。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071212.png" alt="神经元"></p>
<blockquote>
<ol>
<li>外部刺激通过神经末梢，转化为电信号，转导到神经细胞（又叫神经元）。</li>
<li>无数神经元构成神经中枢。</li>
<li>神经中枢综合各种信号，做出判断。</li>
<li>人体根据神经中枢的指令，对外部刺激做出反应。</li>
</ol>
</blockquote>
<p>既然思考的基础是神经元，如果能够”人造神经元”（artificial neuron），就能组成人工神经网络，模拟思考。上个世纪六十年代，提出了最早的”人造神经元”模型，叫做<a href="https://zh.wikipedia.org/wiki/%E6%84%9F%E7%9F%A5%E5%99%A8" target="_blank" rel="noopener">“感知器”</a>（perceptron），直到今天还在用。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071202.png" alt="感知器模型"></p>
<p>上图的圆圈就代表一个感知器。它接受多个输入（x1，x2，x3…），产生一个输出（output），好比神经末梢感受各种外部环境的变化，最后产生电信号。</p>
<p>为了简化模型，我们约定每种输入只有两种可能：1 或 0。如果所有输入都是1，表示各种条件都成立，输出就是1；如果所有输入都是0，表示条件都不成立，输出就是0。</p>
<h2 id="感知器的例子"><a href="#感知器的例子" class="headerlink" title="感知器的例子"></a>感知器的例子</h2><p>下面来看一个例子。城里正在举办一年一度的游戏动漫展览，小明拿不定主意，周末要不要去参观。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071213.jpg" alt="游戏漫展"></p>
<p>他决定考虑三个因素。</p>
<blockquote>
<ol>
<li>天气：周末是否晴天？</li>
<li>同伴：能否找到人一起去？</li>
<li>价格：门票是否可承受？</li>
</ol>
</blockquote>
<p>这就构成一个感知器。上面三个因素就是外部输入，最后的决定就是感知器的输出。如果三个因素都是 Yes（使用<code>1</code>表示），输出就是1（去参观）；如果都是 No（使用<code>0</code>表示），输出就是0（不去参观）。</p>
<h2 id="权重和阈值"><a href="#权重和阈值" class="headerlink" title="权重和阈值"></a>权重和阈值</h2><p>看到这里，你肯定会问：如果某些因素成立，另一些因素不成立，输出是什么？比如，周末是好天气，门票也不贵，但是小明找不到同伴，他还要不要去参观呢？</p>
<p>现实中，各种因素很少具有同等重要性：某些因素是决定性因素，另一些因素是次要因素。因此，可以给这些因素指定权重（weight），代表它们不同的重要性。</p>
<blockquote>
<ul>
<li>天气：权重为8</li>
<li>同伴：权重为4</li>
<li>价格：权重为4</li>
</ul>
</blockquote>
<p>上面的权重表示，天气是决定性因素，同伴和价格都是次要因素。</p>
<p>如果三个因素都为1，它们乘以权重的总和就是 8 + 4 + 4 = 16。如果天气和价格因素为1，同伴因素为0，总和就变为 8 + 0 + 4 = 12。</p>
<p>这时，还需要指定一个阈值（threshold）。如果总和大于阈值，感知器输出1，否则输出0。假定阈值为8，那么 12 &gt; 8，小明决定去参观。阈值的高低代表了意愿的强烈，阈值越低就表示越想去，越高就越不想去。</p>
<p>上面的决策过程，使用数学表达如下。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071203.png" alt="决策过程"></p>
<p>上面公式中，<code>x</code>表示各种外部因素，<code>w</code>表示对应的权重。</p>
<h2 id="决策模型"><a href="#决策模型" class="headerlink" title="决策模型"></a>决策模型</h2><p>单个的感知器构成了一个简单的决策模型，已经可以拿来用了。真实世界中，实际的决策模型则要复杂得多，是由多个感知器组成的多层网络。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071205.png" alt="多层网络"></p>
<p>上图中，底层感知器接收外部输入，做出判断以后，再发出信号，作为上层感知器的输入，直至得到最后的结果。（注意：感知器的输出依然只有一个，但是可以发送给多个目标。）</p>
<p>这张图里，信号都是单向的，即下层感知器的输出总是上层感知器的输入。现实中，有可能发生循环传递，即 A 传给 B，B 传给 C，C 又传给 A，这称为<a href="https://zh.wikipedia.org/wiki/%E9%80%92%E5%BD%92%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C" target="_blank" rel="noopener">“递归神经网络”</a>（recurrent neural network），本文不涉及。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071211.png" alt="递归神经网络"></p>
<h2 id="矢量化"><a href="#矢量化" class="headerlink" title="矢量化"></a>矢量化</h2><p>为了方便后面的讨论，需要对上面的模型进行一些数学处理。</p>
<ul>
<li>外部因素 <code>x1</code>、<code>x2</code>、<code>x3</code> 写成矢量 <code>&lt;x1, x2, x3&gt;</code>，简写为 <code>x</code></li>
<li>权重 <code>w1</code>、<code>w2</code>、<code>w3</code> 也写成矢量 <code>(w1, w2, w3)</code>，简写为 <code>w</code></li>
<li>定义运算 <code>w⋅x = ∑ wx</code>，即 <code>w</code> 和 <code>x</code> 的点运算，等于因素与权重的乘积之和</li>
<li>定义 <code>b</code> 等于负的阈值 <code>b = -threshold</code></li>
</ul>
<p>感知器模型就变成了下面这样。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071206.png" alt="决策模型"></p>
<h2 id="神经网络的运作过程"><a href="#神经网络的运作过程" class="headerlink" title="神经网络的运作过程"></a>神经网络的运作过程</h2><p>一个神经网络的搭建，需要满足三个条件。</p>
<blockquote>
<ul>
<li>输入和输出</li>
<li>权重（<code>w</code>）和阈值（<code>b</code>）</li>
<li>多层感知器的结构</li>
</ul>
</blockquote>
<p>也就是说，需要事先画出上面出现的那张图。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071205.png" alt=""></p>
<p>其中，最困难的部分就是确定权重（<code>w</code>）和阈值（<code>b</code>）。目前为止，这两个值都是主观给出的，但现实中很难估计它们的值，必需有一种方法，可以找出答案。</p>
<p>这种方法就是试错法。其他参数都不变，<code>w</code>（或<code>b</code>）的微小变动，记作<code>Δw</code>（或<code>Δb</code>），然后观察输出有什么变化。不断重复这个过程，直至得到对应最精确输出的那组<code>w</code>和<code>b</code>，就是我们要的值。这个过程称为模型的训练。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071207.png" alt=""></p>
<p>因此，神经网络的运作过程如下。</p>
<blockquote>
<ol>
<li>确定输入和输出</li>
<li>找到一种或多种算法，可以从输入得到输出</li>
<li>找到一组已知答案的数据集，用来训练模型，估算<code>w</code>和<code>b</code></li>
<li>一旦新的数据产生，输入模型，就可以得到结果，同时对<code>w</code>和<code>b</code>进行校正</li>
</ol>
</blockquote>
<p>可以看到，整个过程需要海量计算。所以，神经网络直到最近这几年才有实用价值，而且一般的 CPU 还不行，要使用专门为机器学习定制的 GPU 来计算。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071214.jpg" alt="GPU"></p>
<h2 id="神经网络的例子"><a href="#神经网络的例子" class="headerlink" title="神经网络的例子"></a>神经网络的例子</h2><p>下面通过车牌自动识别的例子，来解释神经网络。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071215.jpg" alt="img"></p>
<p>所谓”车牌自动识别”，就是高速公路的探头拍下车牌照片，计算机识别出照片里的数字。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071216.jpg" alt="img"></p>
<p>这个例子里面，车牌照片就是输入，车牌号码就是输出，照片的清晰度可以设置权重（<code>w</code>）。然后，找到一种或多种<a href="http://www.ruanyifeng.com/blog/2011/07/principle_of_similar_image_search.html" target="_blank" rel="noopener">图像比对算法</a>，作为感知器。算法的得到结果是一个概率，比如75%的概率可以确定是数字<code>1</code>。这就需要设置一个阈值（<code>b</code>）（比如85%的可信度），低于这个门槛结果就无效。</p>
<p>一组已经识别好的车牌照片，作为训练集数据，输入模型。不断调整各种参数，直至找到正确率最高的参数组合。以后拿到新照片，就可以直接给出结果了。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071217.png" alt="img"></p>
<h2 id="输出的连续性"><a href="#输出的连续性" class="headerlink" title="输出的连续性"></a>输出的连续性</h2><p>上面的模型有一个问题没有解决，按照假设，输出只有两种结果：0和1。但是，模型要求<code>w</code>或<code>b</code>的微小变化，会引发输出的变化。如果只输出<code>0</code>和<code>1</code>，未免也太不敏感了，无法保证训练的正确性，因此必须将”输出”改造成一个连续性函数。</p>
<p>这就需要进行一点简单的数学改造。</p>
<p>首先，将感知器的计算结果<code>wx + b</code>记为<code>z</code>。</p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; z = wx + b</span><br><span class="line">&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>然后，计算下面的式子，将结果记为<code>σ(z)</code>。</p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; σ(z) = 1 / (1 + e^(-z))</span><br><span class="line">&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>这是因为如果<code>z</code>趋向正无穷<code>z → +∞</code>（表示感知器强烈匹配），那么<code>σ(z) → 1</code>；如果<code>z</code>趋向负无穷<code>z → -∞</code>（表示感知器强烈不匹配），那么<code>σ(z) → 0</code>。也就是说，只要使用<code>σ(z)</code>当作输出结果，那么输出就会变成一个连续性函数。</p>
<p>原来的输出曲线是下面这样。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071208.png" alt="img"></p>
<p>现在变成了这样。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071209.png" alt="img"></p>
<p>实际上，还可以证明<code>Δσ</code>满足下面的公式。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071210.png" alt="img"></p>
<p>即<code>Δσ</code>和<code>Δw</code>和<code>Δb</code>之间是线性关系，变化率是偏导数。这就有利于精确推算出<code>w</code>和<code>b</code>的值了。</p>
<blockquote>
<p>原作者：<a href="http://www.ruanyifeng.com/" target="_blank" rel="noopener">阮一峰</a></p>
<p>原文地址：<a href="http://link.zhihu.com/?target=http%3A//www.ruanyifeng.com/blog/2017/07/neural-network.html" target="_blank" rel="noopener">神经网络入门 - 阮一峰的网络日志</a></p>
</blockquote>
]]></content>
      
        <categories>
            
            <category> 学习总结 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 人工智能 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[学习笔记(二)]]></title>
      <url>/2017/07/12/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(%E4%BA%8C)/</url>
      <content type="html"><![CDATA[<p>本文章将记录后面几个月的学习笔记</p>
<a id="more"></a>
<hr>
<h2 id="2017-7-9"><a href="#2017-7-9" class="headerlink" title="2017.7.9"></a>2017.7.9</h2><h3 id="CSS-注意事项"><a href="#CSS-注意事项" class="headerlink" title="CSS 注意事项"></a>CSS 注意事项</h3><ol>
<li>CSS 类选择器中类名的第一个字符不能使用数字！它无法在 Mozilla 或 Firefox 中起作用</li>
<li>不要在属性值与单位之间留有空格。假如你使用 “margin-left: 20 px” 而不是 “margin-left: 20px” ，它仅在 IE 6 中有效，但是在 Mozilla/Firefox 或 Netscape 中却无法正常工作。</li>
<li>定块状元素使用 margin 属性来水平对齐时要注意块状元素的宽度不能是父元素的 100%</li>
</ol>
<h2 id="2017-7-14"><a href="#2017-7-14" class="headerlink" title="2017.7.14"></a>2017.7.14</h2><h3 id="网页结构"><a href="#网页结构" class="headerlink" title="网页结构"></a>网页结构</h3><p>一个网页由许多文件组成：文本，代码，样式表，媒体内容等等。当你开发网页时，你需要将这些文件以清晰的结构在你的本地计算机中存储下来，保证它们之间的联系，使它们看起来正确，然后<strong>才能将它们上传至服务器</strong></p>
<h3 id="网页应该存放在计算机何处？"><a href="#网页应该存放在计算机何处？" class="headerlink" title="网页应该存放在计算机何处？"></a>网页应该存放在计算机何处？</h3><p>当你在本地操作你的网页时，你应该将所有关联的文件放在一个能反映服务器上文件结构的单独的文件夹里。这个文件夹可以存放在任何你喜欢的位置，不过你应该将它放在你容易找到的位置，或许可以是你的桌面，你的主页，或是磁盘根目录</p>
<h3 id="网页应该使用什么结构"><a href="#网页应该使用什么结构" class="headerlink" title="网页应该使用什么结构"></a>网页应该使用什么结构</h3><p>我们创建的任何网页项目中最常使用的就是一个索引HTML文件和不同的包括图像，样式表和脚本文件的文件夹</p>
<ol>
<li>index.html：这个文件通常将包括你的主页内容，也就是说，人们第一次进入你的网页看到的文本和图像</li>
<li>images folder：这个文件夹包含你网页上所有使用的图像</li>
<li>styles folder：这个文件夹包含了为你的内容添加样式的样式表</li>
<li>scripts folder：这个文件夹包含了所有为你网页添加交互功能的 JavaScript 代码</li>
</ol>
<p><img src="https://mdn.mozillademos.org/files/9231/file-structure.png" alt="web项目结构"></p>
<h3 id="文件路径"><a href="#文件路径" class="headerlink" title="文件路径"></a>文件路径</h3><p>如上面网页结构中 index.html 与 images 文件夹属于同级目录。index 网页需要引用 images 文件夹下的图片资源，就可以使用 images/icon.png 。如果 index.html 与图片资源 icon.png 直接同级的话，就直接使用 icon.png 。如果图片资源 icon.png 位于 Index.html  的上级目录中，则使用 ../icon.png</p>
<h3 id="解析一个-HTML-元素"><a href="#解析一个-HTML-元素" class="headerlink" title="解析一个 HTML 元素"></a>解析一个 HTML 元素</h3><p>如下图</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fhwh0ezl53j20mt0733yg.jpg" alt="一个段落元素"></p>
<p>这个元素的主要部分有：</p>
<ol>
<li>开始标签：这里包含了元素的名称（这里是 p），表示这里是这个元素的开始发挥作用——在这个例子中从这一段的开头开始。</li>
<li>闭合标签：表明这里是元素的结尾——在这个例子中，就是这一段落的结尾。</li>
<li>内容（content）：这是一个元素的内容，这个例子中就是所输入的文本本身。</li>
<li>元素（The element）：开标签、闭标签与内容相结合，便是一个完整的元素。</li>
</ol>
<h3 id="解析-HTML-文档"><a href="#解析-HTML-文档" class="headerlink" title="解析 HTML 文档"></a>解析 HTML 文档</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>My test page<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/firefox-icon.png"</span> <span class="attr">alt</span>=<span class="string">"My test image"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这里我们有：</p>
<ul>
<li>&lt;!DOCTYPE html&gt;——文档类型。在 HTML 刚刚出现的时期里（大约是1991/2 年），文档类型是用来链接一些应该遵守的规则，有点像<strong>自动校正</strong>等。然而现在大家都不用管文件类型，只是因为历史原因必须包含在代码中。现阶段大家知道这些就够了。</li>
<li><code>&lt;html&gt;</code> 元素。这个元素包含了整个页面的内容，有时也被称作根元素。</li>
<li><code>&lt;head&gt;</code> 元素。这个元素可以包含你想添加的所有内容，但是不会被用户所看到。这里面包括像想被搜索引擎搜索到的关键字（keywords）和页面描述，CSS样式表和字符编码声明等等。</li>
<li><code>&lt;body&gt;</code> 元素。这个元素包含了你想被用户看到的内容，不管是文本，图像，视频，游戏，可播放的音轨或是其他内容。</li>
<li><meta charset="utf-8">——这个元素指定了你的文档需要使用的字符编码，像 UTF-8 ，它包括了非常多人类已知语言的字符。基本上 UTF-8 可以处理任何文本内容。我们没有任何理由不去设定字符编码，而且也可以避免以后可能出现的问题。</li>
<li><code>&lt;title&gt;</code> 元素——这个元素设置了页面的标题，标题显示在浏览器标签页上，而且在你将网页添加到收藏夹或喜爱中时将作为默认名称。</li>
</ul>
<h3 id="解析-CSS-规则"><a href="#解析-CSS-规则" class="headerlink" title="解析 CSS 规则"></a>解析 CSS 规则</h3><p><img src="http://i1.buimg.com/1949/66d15e2c9eb7dd99.png" alt="CSS规则"></p>
<h4 id="选择多个元素"><a href="#选择多个元素" class="headerlink" title="选择多个元素"></a>选择多个元素</h4><p>你也可以选择多种类型的元素然后为它们添加一组样式。记得将不同的选择符用逗号分开</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span>,<span class="selector-tag">li</span>,<span class="selector-tag">h1</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>:red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Margin-属性"><a href="#Margin-属性" class="headerlink" title="Margin 属性"></a>Margin 属性</h3><h4 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h4><p>margin属性为给定元素设置所有四个（上下左右）方向的外边距属性。这是四个外边距属性设置的简写。四个外边距属性设置分别是： margin-top， margin-right， margin-bottom 和 margin-left 。指定的外边距允许为负数</p>
<h4 id="浏览器支持"><a href="#浏览器支持" class="headerlink" title="浏览器支持"></a>浏览器支持</h4><p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fhwh16uf5fj20l107kt9b.jpg" alt="支持的浏览器"></p>
<h4 id="取值方式"><a href="#取值方式" class="headerlink" title="取值方式"></a>取值方式</h4><p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fhwh1m8uokj20sv06bdgp.jpg" alt="取值"></p>
<h4 id="应用实例"><a href="#应用实例" class="headerlink" title="应用实例"></a>应用实例</h4><p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fhwh1zi5vej20sp0tb0w7.jpg" alt="应用实例"></p>
<h4 id="外边距合并"><a href="#外边距合并" class="headerlink" title="外边距合并"></a>外边距合并</h4><p>块的顶部外边距和底部外边距有时被组合(折叠)为单个外边距，其大小是组合到其中的最大外边距，这种行为称为外边距塌陷(margin collapsing)，有的地方翻译为外边距合并。具体可了解<a href="http://www.w3school.com.cn/css/css_margin_collapsing.asp" target="_blank" rel="noopener">W3C 外边距合并</a>、<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Box_Model/Mastering_margin_collapsing" target="_blank" rel="noopener">MDN 外边距合并</a>、<a href="https://juejin.im/post/5965c46ef265da6c2518f5ec" target="_blank" rel="noopener">前端面试必备——外边距合并</a>、<a href="http://geekplux.com/2014/03/14/collapsing_margins.html" target="_blank" rel="noopener">Collapsing margins——合并的外边距</a></p>
<p>发生外边距合并的三种基本情况：</p>
<ol>
<li>相邻的兄弟姐妹元素</li>
<li>块级父元素与其第一个/最后一个子元素</li>
<li>空块元素</li>
</ol>
<h3 id="CSS-overflow属性"><a href="#CSS-overflow属性" class="headerlink" title="CSS overflow属性"></a>CSS overflow属性</h3><p><a href="http://www.w3school.com.cn/cssref/pr_pos_overflow.asp" target="_blank" rel="noopener">w3c overflow</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/overflow" target="_blank" rel="noopener">MDN overflow</a></p>
<h3 id="CSS-clear属性"><a href="#CSS-clear属性" class="headerlink" title="CSS clear属性"></a>CSS clear属性</h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/clear" target="_blank" rel="noopener">MDN clear属性</a></p>
<h3 id="CSS-float浮动元素和清除浮动"><a href="#CSS-float浮动元素和清除浮动" class="headerlink" title="CSS float浮动元素和清除浮动"></a>CSS float浮动元素和清除浮动</h3><p>float 会使浮动元素脱离正常的文档布局流，并粘贴到其父容器的某个方向。在正常布局中位于该浮动元素之下，不管是父容器的内容还是元素浮动后其兄弟元素补上他原来位置后其本身的内容，此时会围绕着浮动元素，填满其它方向的空间。但有时候我们为了停止浮动元素之下位于正常布局的元素不再围绕着浮动元素，这是需要清除浮动。同时如果设置某个元素浮动后，那么其父容器（如果存在的话）就会出现父容器背景不能显示、边框不能撑开、<code>margin</code>设置值不能正确显示</p>
<p>详情可看<a href="https://developer.mozilla.org/zh-CN/docs/Learn/CSS/CSS_layout/Floats" target="_blank" rel="noopener">MDN布局 浮动布局</a>、<a href="https://developer.mozilla.org/zh-CN/docs/CSS/float" target="_blank" rel="noopener">MDN float属性参考</a>、<a href="http://geekplux.com/2014/04/25/several_core_concepts_of_css.html" target="_blank" rel="noopener">CSS 最核心的几个概念</a></p>
<h3 id="HTTPS-是什么"><a href="#HTTPS-是什么" class="headerlink" title="HTTPS 是什么"></a>HTTPS 是什么</h3><p>在协议名 http 后面加上的‘s’代表 SSL 运输层安全协议，表明现在使用的是提供安全服务的 HTTP 协议。在这种情况下，在发送方，SSL 接受应用层的数据，对数据进行加密，然后把加了密的数据送往 TCP 套接字。在接收方，SSL 从 TCP 套接字读取数据，解密后把数据交给应用层。</p>
<h3 id="什么是Web-Server"><a href="#什么是Web-Server" class="headerlink" title="什么是Web Server"></a>什么是Web Server</h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Learn/Common_questions/What_is_a_web_server" target="_blank" rel="noopener">什么是网络服务器 MDN</a></p>
<h2 id="2017-7-18"><a href="#2017-7-18" class="headerlink" title="2017.7.18"></a>2017.7.18</h2><h3 id="什么是元数据-Metadata"><a href="#什么是元数据-Metadata" class="headerlink" title="什么是元数据(Metadata)"></a>什么是元数据(Metadata)</h3><p>元数据是描述数据的数据。举个简单的例子，如果一份 HTML 文档是一数据，那么描述这份数据的数据，比如作者，关键字，摘要，指定文档文档字符编码等等就是元数据。它在 HTML 文档结构中存在<code>&lt;title&gt;&lt;/title&gt;</code>当中。</p>
<h2 id="2017-7-22"><a href="#2017-7-22" class="headerlink" title="2017.7.22"></a>2017.7.22</h2><h3 id="在-HTML-中应用-CSS-和-JavaSscript"><a href="#在-HTML-中应用-CSS-和-JavaSscript" class="headerlink" title="在 HTML 中应用 CSS 和 JavaSscript"></a>在 HTML 中应用 CSS 和 JavaSscript</h3><p><code>&lt;link&gt;</code>元素位于文档头部，它有两个属性，<code>rel=&quot;stylesheet&quot;</code>，这表明这是文档的样式表，而<code>href</code>属性指明了样式表文件的路径：</p>
<blockquote>
<link rel="stylesheet" href="my-css-file.css">

</blockquote>
<p><code>&lt;script&gt;</code>元素放置文档正文<code>&lt;body&gt;&lt;/body&gt;</code>标签内的尾部会是一个更好的选择，因为这样可以确保在加载脚本之前浏览器已经解析了 HTML 内容(如果脚本加载某个不存在的元素，浏览器会报错)</p>
<blockquote>
<script src="my-js-file.js"></script>



</blockquote>
<h3 id="为文档设定主语言"><a href="#为文档设定主语言" class="headerlink" title="为文档设定主语言"></a>为文档设定主语言</h3><blockquote>
<html lang="en-US">

</html></blockquote>
<p>这是为你的站点设定语言。这样你的 HTML 文档就会被搜索引擎更有效地索引。我们还可以将文档的分段设置为不同的语言。例如下面我们把日语部分设置为日语：</p>
<blockquote>
<p>Japanese example: <span lang="jp">ご飯が熱い。</span>.</p>



</blockquote>
<h2 id="2017-7-23"><a href="#2017-7-23" class="headerlink" title="2017.7.23"></a>2017.7.23</h2><h3 id="HTML-lt-meta-gt-标签"><a href="#HTML-lt-meta-gt-标签" class="headerlink" title="HTML &lt;meta&gt; 标签"></a>HTML <code>&lt;meta&gt;</code> 标签</h3><p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fhwh4lz4eyj20sy0h2abu.jpg" alt="HTML meta标签属性"></p>
<h4 id="http-equiv-属性"><a href="#http-equiv-属性" class="headerlink" title="http-equiv 属性"></a>http-equiv 属性</h4><p>http-equiv 属性为名称/值对提供了名称。并指示服务器在发送实际的文档之前先在要传送给浏览器的 MIME 文档头部包含名称/值对。<br>当服务器向浏览器发送文档时，会先发送许多名称/值对。虽然有些服务器会发送许多这种名称/值对，但是所有服务器都至少要发送一个：content-type:text/html。这将告诉浏览器准备接受一个 HTML 文档。<br>使用带有 http-equiv 属性的 <meta> 标签时，服务器将把名称/值对添加到发送给浏览器的内容头部。</p>
<h4 id="name-属性"><a href="#name-属性" class="headerlink" title="name 属性"></a>name 属性</h4><p>name 属性提供了名称/值对中的名称。HTML 和 XHTML 标签都没有指定任何预先定义的 <meta> 名称。通常情况下，您可以自由使用对自己和源文档的读者来说富有意义的名称。</p>
<p>“keywords” 是一个经常被用到的名称。它为文档定义了一组关键字。某些搜索引擎在遇到这些关键字时，会用这些关键字对文档进行分类。</p>
<p>类似这样的 meta 标签可能对于进入搜索引擎的索引有帮助：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=&quot;keywords&quot; content=&quot;HTML,ASP,PHP,SQL&quot;&gt;</span><br></pre></td></tr></table></figure>
<p>如果没有提供 name 属性，那么名称/值对中的名称会采用 http-equiv 属性的值。</p>
<h4 id="content-属性"><a href="#content-属性" class="headerlink" title="content 属性"></a>content 属性</h4><p>content 属性提供了名称/值对中的值。该值可以是任何有效的字符串。content 属性始终要和 name 属性或 http-equiv 属性一起使用。</p>
<h4 id="scheme-属性"><a href="#scheme-属性" class="headerlink" title="scheme 属性"></a>scheme 属性</h4><p>scheme 属性用于指定要用来翻译属性值的方案。此方案应该在由 <head> 标签的 profile 属性指定的概况文件中进行了定义。</head></p>
<h3 id="HTML-主要元素"><a href="#HTML-主要元素" class="headerlink" title="HTML 主要元素"></a>HTML 主要元素</h3><p>一篇 HTML 文档的的结构是具有一定的通用型的，其通用元素有<code>&lt;main&gt;</code>,<code>&lt;article&gt;</code>,<code>&lt;section&gt;</code>,<code>&lt;aside&gt;</code>,<code>&lt;header&gt;</code>,<code>&lt;nav&gt;</code>,<code>&lt;footer&gt;</code>。其中每个元素的具体信息可看<a href="https://developer.mozilla.org/zh-CN/docs/learn/HTML/Introduction_to_HTML/%E6%96%87%E4%BB%B6%E5%92%8C%E7%BD%91%E7%AB%99%E7%BB%93%E6%9E%84#HTML_layout_elements_in_more_detail" target="_blank" rel="noopener">MDN HTML layout elements</a></p>
<h3 id="HTML-文档纠错"><a href="#HTML-文档纠错" class="headerlink" title="HTML 文档纠错"></a>HTML 文档纠错</h3><p>大型HTML文档可使用W3C的工具进行错误检查，具体可见<a href="https://developer.mozilla.org/zh-CN/docs/Learn/HTML/Introduction_to_HTML/Debugging_HTML#HTML_validation" target="_blank" rel="noopener">HTML validation</a></p>
<h3 id="Markdown-本质"><a href="#Markdown-本质" class="headerlink" title="Markdown 本质"></a>Markdown 本质</h3><p>书写的 markdown 语言，最后其实是转换成 html 语言的。html 本来就是为了结构化文档的，可是 html 写起来太费劲了，所以才有 markdown 语言。markdown 标准化了，大家都可以用自己的方式将 markdown 转换成自己想要的 html 。其实转 html 是差不多的，不一样就体现在各个解析器怎么去写自己 css（体现成不同的样式）</p>
<h2 id="2017-7-24"><a href="#2017-7-24" class="headerlink" title="2017.7.24"></a>2017.7.24</h2><h3 id="Understanding-Uninitialized-Variables"><a href="#Understanding-Uninitialized-Variables" class="headerlink" title="Understanding Uninitialized Variables"></a>Understanding Uninitialized Variables</h3><p>当 JavaScript 中的变量被声明的时候，程序内部会给它一个初始值 <code>undefined</code>。当你对一个值为 <code>undefined</code>的变量进行运算操作的时候，算出来的结果将会是 <code>NaN</code>，<code>NaN</code> 的意思是 “Not a Number”。当你用一个没有 <code>定义</code> 的变量来做字符串连接操作的时候，它会如实的输出<code>&quot;undefined&quot;</code></p>
<h3 id="Understanding-String-Immutability"><a href="#Understanding-String-Immutability" class="headerlink" title="Understanding String Immutability"></a>Understanding String Immutability</h3><p>在 JavaScript 中，字符串的值是不可变的，这意味着一旦字符串被创建就不能被改变</p>
<h3 id="JS-的-strict-模式"><a href="#JS-的-strict-模式" class="headerlink" title="JS 的 strict 模式"></a>JS 的 strict 模式</h3><p>JavaScript在设计之初，为了方便初学者学习，并不强制要求用<code>var</code>申明变量。这个设计错误带来了严重的后果：如果一个变量没有通过<code>var</code>申明就被使用，那么该变量就自动被申明为全局变量：</p>
<blockquote>
<p>i = 10;     // i 现在是全局变量</p>
</blockquote>
<p>在同一个页面的不同的 JavaScript 文件中，如果都不用<code>var</code>申明，恰好都使用了变量<code>i</code>，将造成变量<code>i</code>互相影响，产生难以调试的错误结果。使用<code>var</code>申明的变量则不是全局变量，它的范围被限制在该变量被申明的函数体内（函数的概念将稍后讲解），同名变量在不同的函数体内互不冲突。</p>
<p>为了修补 JavaScript 这一严重设计缺陷，ECMA 在后续规范中推出了strict 模式，在 strict 模式下运行的 JavaScript 代码，强制通过<code>var</code>申明变量，未使用<code>var</code>申明变量就使用的，将导致运行错误。</p>
<p>启用 strict 模式的方法是在 JavaScript 代码的第一行写上：</p>
<blockquote>
<p>‘use strict’;</p>
</blockquote>
<p>这是一个字符串，不支持 strict 模式的浏览器会把它当做一个字符串语句执行，支持 strict 模式的浏览器将开启 strict 模式运行 JavaScript。</p>
<h2 id="2017-7-25"><a href="#2017-7-25" class="headerlink" title="2017.7.25"></a>2017.7.25</h2><h3 id="HTTP-HTTPS"><a href="#HTTP-HTTPS" class="headerlink" title="HTTP HTTPS"></a>HTTP HTTPS</h3><p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fhwh54jyc1j20mu0bvt97.jpg" alt="http(s)"></p>
<h2 id="2017-7-26"><a href="#2017-7-26" class="headerlink" title="2017.7.26"></a>2017.7.26</h2><h3 id="HTML-输出流"><a href="#HTML-输出流" class="headerlink" title="HTML 输出流"></a>HTML 输出流</h3><p>JavaScript 能够创建动态的 HTML 内容。在 JavaScript 中，<code>document.write()</code>可用于直接向 HTML 输出流写内容</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>输出流测试<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="built_in">document</span>.write(<span class="built_in">Date</span>());</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>运行结果是：</p>
<blockquote>
<p>今天的日期是：Wed Jul 26 2017 14:30:15 GMT+0800 (中国标准时间)</p>
</blockquote>
<h3 id="HTML-DOM"><a href="#HTML-DOM" class="headerlink" title="HTML DOM"></a>HTML DOM</h3><p>通过 DOM，可访问 HTML 文档的所有元素。当网页被加载时，浏览器会创建页面的文档对象模型（Document Object Model），通过 DOM 创建的表示文档的树形图，开发人员获得了控制页面内容和结构的主动权。文档对象模型 DOM 是针对 XML 但经过扩展用于 HTML 的应用程序编程接口（API），<strong>HTML DOM</strong> 模型被构造为<strong>对象</strong>的树：</p>
<p><img src="http://www.runoob.com/images/pic_htmltree.gif" alt="DOM"></p>
<p>通过可编程的对象模型，JavaScript 获得了足够的能力来创建动态的 HTML。</p>
<ul>
<li>JavaScript 能够改变页面中的所有 HTML 元素</li>
<li>JavaScript 能够改变页面中的所有 HTML 属性</li>
<li>JavaScript 能够改变页面中的所有 CSS 样式</li>
<li>JavaScript 能够对页面中的所有事件做出反应</li>
</ul>
<h4 id="查找HTML元素"><a href="#查找HTML元素" class="headerlink" title="查找HTML元素"></a>查找HTML元素</h4><p>通常，通过 JavaScript，您需要操作 HTML 元素。</p>
<p>为了做到这件事情，您必须首先找到该元素。有三种方法来做这件事：</p>
<ul>
<li>通过 id 找到 HTML 元素</li>
<li>通过标签名找到 HTML 元素</li>
<li>通过类名找到 HTML 元素</li>
</ul>
<h3 id="浏览器事件兼容性处理"><a href="#浏览器事件兼容性处理" class="headerlink" title="浏览器事件兼容性处理"></a>浏览器事件兼容性处理</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="built_in">document</span>.getElementById(<span class="string">"myBtn"</span>);</span><br><span class="line"><span class="keyword">if</span> (x.addEventListener)&#123;		<span class="comment">//所有主流浏览器，除了 IE8 及更早版本</span></span><br><span class="line">  x.addEventListener(<span class="string">"click"</span>,myFunction);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span> (x.attachEvent)&#123;		<span class="comment">//IE8 及更早版本</span></span><br><span class="line">  x.attachEvent(<span class="string">"onclick"</span>,myFunction);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="DOM创建和删除元素"><a href="#DOM创建和删除元素" class="headerlink" title="DOM创建和删除元素"></a>DOM创建和删除元素</h3><h4 id="添加新元素"><a href="#添加新元素" class="headerlink" title="添加新元素"></a>添加新元素</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p1"</span>&gt;</span>this is the first paragraph<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p2"</span>&gt;</span>this is the second paragraph<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> para=<span class="built_in">document</span>.createElement(<span class="string">"p"</span>);				<span class="comment">//创建新的文本元素</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> node=<span class="built_in">document</span>.createTextNode(<span class="string">"这是一个新段落。"</span>);<span class="comment">//创建新的文本节点</span></span></span><br><span class="line"><span class="javascript">  para.appendChild(node);			<span class="comment">//元素追加文本节点</span></span></span><br><span class="line"><span class="undefined">  </span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> element=<span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>);		<span class="comment">//找到一个已有的元素</span></span></span><br><span class="line"><span class="javascript">  element.appendChild(para);					<span class="comment">//已存在的元素后添加新元素</span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="删除已有的HTML元素"><a href="#删除已有的HTML元素" class="headerlink" title="删除已有的HTML元素"></a>删除已有的HTML元素</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p1"</span>&gt;</span>this is the first paragraph<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p2"</span>&gt;</span>this is the second paragraph<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">//这个 HTML 文档含有拥有两个子节点（两个 <span class="tag">&lt;<span class="name">p</span>&gt;</span> 元素）的 <span class="tag">&lt;<span class="name">div</span>&gt;</span> 元素</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> parent=<span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>);	<span class="comment">//找到 id="div1" 的元素</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> child=<span class="built_in">document</span>.getElementById(<span class="string">"p1"</span>);		<span class="comment">//找到 id="p1" 的 &lt;p&gt; 元素</span></span></span><br><span class="line"><span class="javascript">  parent.removeChild(child);					<span class="comment">//从父元素中删除子元素</span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>注意：</strong>DOM需要清楚你需要删除的元素，以及他的父元素</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//找到您希望删除的子元素，然后使用其 parentNode 属性来找到父元素</span></span><br><span class="line"><span class="keyword">var</span> child=<span class="built_in">document</span>.getElementById(<span class="string">"p1"</span>);</span><br><span class="line">child.parentNode.removeChild(child);</span><br></pre></td></tr></table></figure>
<h3 id="Canvas的基本用法"><a href="#Canvas的基本用法" class="headerlink" title="Canvas的基本用法"></a>Canvas的基本用法</h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/canvas" target="_blank" rel="noopener">Canvas</a>是一个可以使用脚本(通常为<a href="https://developer.mozilla.org/zh-CN/docs/JavaScript" target="_blank" rel="noopener">JavaScript</a>)在其中绘制图形的 <a href="https://developer.mozilla.org/zh-CN/docs/HTML" target="_blank" rel="noopener">HTML</a> 元素。它可以用于制作照片集或者制作简单(也不是<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API/A_basic_ray-caster" target="_blank" rel="noopener">那么简单</a>)的动画。</p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API/Tutorial/Basic_usage" target="_blank" rel="noopener">基本用法</a></p>
<h3 id="HTML-SVG"><a href="#HTML-SVG" class="headerlink" title="HTML SVG"></a>HTML SVG</h3><p><strong>SVG 是使用 XML 来描述二维图形和绘图程序的语言。</strong></p>
<h2 id="2017-7-27"><a href="#2017-7-27" class="headerlink" title="2017.7.27"></a>2017.7.27</h2><h3 id="关于开发者工具-style-栏的使用"><a href="#关于开发者工具-style-栏的使用" class="headerlink" title="关于开发者工具 style 栏的使用"></a>关于开发者工具 style 栏的使用</h3><p><a href="https://developers.google.com/web/tools/chrome-devtools/inspect-styles/edit-styles" target="_blank" rel="noopener">google developer 编辑样式</a></p>
<h3 id="CSS-样式优先级"><a href="#CSS-样式优先级" class="headerlink" title="CSS 样式优先级"></a>CSS 样式优先级</h3><p>浏览器缺省 &lt; 外部样式表 &lt; 外部样式表类选择器 &lt; 外部样式表类派生选择器 &lt; 外部样式表ID选择器 &lt; 外部样式表ID派生选择器 &lt; 内部样式表 &lt; 内部样式表类选择器 &lt; 内部样式表类派生选择器 &lt; 内部样式表ID选择器 &lt; 内部样式表ID派生选择器 &lt; 内联样式</p>
<h3 id="各种选择器"><a href="#各种选择器" class="headerlink" title="各种选择器"></a>各种选择器</h3><ul>
<li><a href="http://www.w3school.com.cn/css/css_selector_type.asp" target="_blank" rel="noopener">元素选择器</a></li>
<li><a href="http://www.w3school.com.cn/css/css_selector_class.asp" target="_blank" rel="noopener">类选择器</a></li>
<li><a href="http://www.w3school.com.cn/css/css_selector_id.asp" target="_blank" rel="noopener">ID选择器</a></li>
<li><a href="http://www.w3school.com.cn/css/css_selector_attribute.asp" target="_blank" rel="noopener">属性选择器</a></li>
<li><a href="http://www.w3school.com.cn/css/css_selector_descendant.asp" target="_blank" rel="noopener">后代选择器</a></li>
<li><a href="http://www.w3school.com.cn/css/css_selector_child.asp" target="_blank" rel="noopener">子元素选择器</a></li>
<li><a href="http://www.w3school.com.cn/css/css_selector_adjacent_sibling.asp" target="_blank" rel="noopener">相邻兄弟选择器</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Learn/CSS/Introduction_to_CSS/Pseudo-classes_and_pseudo-elements#伪类（Pseudo-class）" target="_blank" rel="noopener">伪类</a>和<a href="https://developer.mozilla.org/zh-CN/docs/Learn/CSS/Introduction_to_CSS/Pseudo-classes_and_pseudo-elements#伪元素" target="_blank" rel="noopener">伪元素</a></li>
</ul>
<p>其中，后代选择器和子元素选择器以及相邻兄弟选择器统称为派生选择器。<strong>伪选择器就是不选择实际元素，而是元素的某些部分，或仅在某些上下文中的元素。它们有两种主要类型 - 伪类和伪元素</strong>。</p>
<h3 id="chrome开发者工具style一栏划线条目或灰色条目意义"><a href="#chrome开发者工具style一栏划线条目或灰色条目意义" class="headerlink" title="chrome开发者工具style一栏划线条目或灰色条目意义"></a>chrome开发者工具style一栏划线条目或灰色条目意义</h3><p>划线条目代表优先级低已被优先级高所取代</p>
<p>灰色条目代表没有起作用，原因可能是该条目需要根据运行结果计算出来，或者该条目不可继承。</p>
<p><a href="https://segmentfault.com/q/1010000004603784" target="_blank" rel="noopener">chrome下的调试器里面灰色的样式是代表什么？</a></p>
<h3 id="CSS的值和单位"><a href="#CSS的值和单位" class="headerlink" title="CSS的值和单位"></a>CSS的值和单位</h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Learn/CSS/Introduction_to_CSS/Values_and_units" target="_blank" rel="noopener">MDN CSS的值和单位</a></p>
<h2 id="2017-7-29"><a href="#2017-7-29" class="headerlink" title="2017.7.29"></a>2017.7.29</h2><h3 id="编程范式漫谈"><a href="#编程范式漫谈" class="headerlink" title="编程范式漫谈"></a>编程范式漫谈</h3><p>编程范式是某种编程语言典型的编程风格或者说是编程方式。但是同时一个语言的编程范式没有绝对的划分界限，比如 Java 面向对象语言，但是 最新的 Java 8 标准加入了函数式特性，JavaScript 也是多范式语言。因此我们可以得出编程语言的发展都是根据需求来制定的。我们知道现有语言的编程范式有：<strong>过程式（面向过程），面向对象，函数式（具有声明式），逻辑式。</strong>随着软件工业化程度的普及，以及软件的复杂度越来越高，编程语言的发展历程也是从最初的过程式（命令式）语言c，发展到以 Java 语言为代表的面向对象编程语言。而逻辑编程语言(以prolog为代表）和函数式语言(lisp系列）还多用在学术和人工智能领域中。近几年，随着多核，云计算时代的到来。函数式编程语言逐渐浮出水面，最经典的语言以scheme,common-lisp,ml,clojure,go为代表.而且最近的jdk8也逐步加入了functional,closure,lambda等语法，而且scala的作者也越来越推崇编码者以函数式语言的思维来coding。可见编程语言的发展也是满足时代的变化不断变化着。从其中的发展历程中我们可以看到：技术的发展都是在围绕着解决“软件的复杂度”这个基本的需求而发展的。</p>
<ul>
<li>过程化（命令式）编程：应该是最原始的、也是我们最熟悉的一种传统的编程方式。从本上来讲，它是“冯诺依曼机”运行机制的抽象，它的编程方式源于计算机指令的顺序排列。也就是说过程化语言模拟的是计算机机器的系统结构。它的编程步骤是：首先，应该讲待解的问题的解决方案抽象为一系列概念化的步骤。然后通过编程的方式将这些步骤转化为程序指令集，而这些指令按照一定的顺序排列，用来说明如何执行一个任务或解决一个问题。过程化语言特别适合解决线性的问题。它强调“自上而下”的设计方式，一步一步的解决问题。这种方式非常类似我们的工作和生活方式，都是以时间为线性基础的。过程化语言趋向于开发运行较快且对系统资源利用率较高的程序。它的不足之处就是不适合某些种类问题的解决，例如那些非结构化的具有复杂算法的问题。</li>
<li>事件驱动编程（响应式编程）：事件驱动的程序设计中，程序中的许多部分可能在完全不可预料的时刻被执行。往往这些程序的执行是由用户与正在执行的程序的互动激发所致。事件驱动常常用于用户与程序的交互，通过图形用户接口（鼠标、键盘、触摸板）进行交互式的互动。属于事件驱动的编程语言有： VB、C#、Java Swing等。它们所涉的事件绝大多数都是 GUI 事件。</li>
<li>面向对象编程：以“世界万物皆为对象”的思想指导开发工作。这符合人类的认知方式。所以常被用来开发问题复杂的软件。</li>
</ul>
<h2 id="2017-7-31"><a href="#2017-7-31" class="headerlink" title="2017.7.31"></a>2017.7.31</h2><h3 id="服务器编程语言"><a href="#服务器编程语言" class="headerlink" title="服务器编程语言"></a>服务器编程语言</h3><p>Java、PHP、Python、Ruby等。这些服务器端的语言可以帮我们产生 HTML 的网页。</p>
<h3 id="表格"><a href="#表格" class="headerlink" title="表格"></a><table>表格</table></h3><p>在一些浏览器中，没有内容的表格单元显示得不太好，如果某个单元格是空的（没有内容），浏览器可能无法显示出这个单元格的边框。为了避免这种情况，在空单元格中添加一个空格占位符，就可以将边框显示出来。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>row1,cell1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>row1,cell2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>&amp;nbsp;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>row2,cell2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="jQuery事件"><a href="#jQuery事件" class="headerlink" title="jQuery事件"></a>jQuery事件</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">//开始写 jQuery 业务代码</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//等效写法</span></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">//开始写 jQuery 业务代码</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>这个方法允许我们在文档完全加载完后执行函数。如果文档未完全加载完毕就执行逻辑代码，那么操作失败。</p>
<h3 id="jQuery-toggle"><a href="#jQuery-toggle" class="headerlink" title="jQuery toggle()"></a>jQuery toggle()</h3><p>可是使用<code>$(&quot;选择器&quot;).toggle(speed,callback)</code>方法来切换 <code>hide()</code>和<code>show()</code>方法。参数<code>speed</code>可选值：”slow”、”fast”或毫秒。参数<code>callback</code>是隐藏或显示完成后所执行的函数名称。</p>
<p>但是对于<code>callback</code>参数，需要说明的就是：</p>
<ol>
<li><code>$(&quot;选择器&quot;)</code>选中的个数有 n 个，则回调函数就会执行 n 次</li>
<li>callback 函数名后加括号，会立刻执行函数体，而不是等到显示或者隐藏完成后才执行</li>
<li>callback 既可以是函数名，也可以是匿名函数</li>
</ol>
<p><strong>code sample</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">  $(<span class="string">"#hide"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">    $(<span class="string">"p"</span>).hide(<span class="string">"slow"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;alert(<span class="string">"callback"</span>)&#125;); <span class="comment">//先执行两次回调函数再隐藏元素</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">//$("p").hide("slow",show);     隐藏后再执行回调函数</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">//$("p").hide("slow",show());   先执行回调函数再隐藏元素</span></span></span><br><span class="line"><span class="undefined">  &#125;);</span></span><br><span class="line"><span class="undefined">  </span></span><br><span class="line"><span class="javascript">  $(<span class="string">"#show"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">    $(<span class="string">"p"</span>).show();</span></span><br><span class="line"><span class="undefined">  &#125;);</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">/*</span></span><br><span class="line"><span class="javascript"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">  alert(<span class="string">"callback回调函数"</span>);</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">*/</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>如果你点击“隐藏” 按钮，我将会消失。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>我在学习 jQuery。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"hide"</span>&gt;</span>隐藏<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"show"</span>&gt;</span>显示<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="2017-8-1"><a href="#2017-8-1" class="headerlink" title="2017.8.1"></a>2017.8.1</h2><h3 id="关于-JavaScript、jQuery、AJAX、JSON-之间的关系"><a href="#关于-JavaScript、jQuery、AJAX、JSON-之间的关系" class="headerlink" title="关于 JavaScript、jQuery、AJAX、JSON 之间的关系"></a>关于 JavaScript、jQuery、AJAX、JSON 之间的关系</h3><p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fifkoeufdaj20ru0nf0t5.jpg" alt="关系示意图"></p>
<ul>
<li>JavaScript 是一门语言，早先时期运行与前端，负责网页的动画以及前后台的交互，现已进化成前后端通吃</li>
<li>JQuery 是为了简化 JavaScript 语法而形成的库，其实就是对 JavaScript 的封装，形成更简洁的语法</li>
<li>AJAX 是一种接口技术，或者说是一种思想，用来实现异步刷新，用 JavaScript 和 JQuery 都可以实现该技术(思想)</li>
<li>JSON 是一种简单的数据交换格式。简单来说就是 JavaScript 的对象属性集合，他比 xml 语法要更加简单，方便传输。</li>
</ul>
<p>详情请见：<a href="https://www.zhihu.com/question/31305968" target="_blank" rel="noopener">JavaScript、jQuery、AJAX、JSON 这四个之间的关系？</a></p>
<h2 id="2017-8-4"><a href="#2017-8-4" class="headerlink" title="2017.8.4"></a>2017.8.4</h2><h3 id="盒子位移属性是如何工作？"><a href="#盒子位移属性是如何工作？" class="headerlink" title="盒子位移属性是如何工作？"></a>盒子位移属性是如何工作？</h3><p>盒子的位移属性有四个“top、right、bottom和left”，用来指定元素的定位位置和方向。这些属性只能在元素的“position”属性设置了“relative、absolute和fixed”属性值，才生效。<strong><em>对于相对定位元素，这些属性的设置让元素从默认位置移动</em></strong>。例如，top设置一个值“20px”在一个相对定位的元素上，这个元素会在原来位置向下移动“20px”。对于绝对定位和固定定位，这些属性指定了元素与父元素边缘之间的距离，例如，<strong><em>绝对定位的元素设置一个“top”值为“20px”，将使绝对定位元素相对于其设置了相对定位的祖先元素顶部边缘向下移动“20px”，反之，如果设置一个“top”值为“20px”，将使绝对定位元素相对于其设置了相对定位的祖先元素顶部边缘向上移动“20px”。（绝对定位的参考点是其祖先元素设置了“relative”或者“absolute”值）</em></strong>。</p>
<p>详情可查阅<a href="https://www.zhihu.com/question/19926700" target="_blank" rel="noopener">CSS 中，为什么绝对定位（absolute）的父级元素必须是相对定位（relative）？-知乎</a></p>
<h3 id="子绝父相"><a href="#子绝父相" class="headerlink" title="子绝父相"></a>子绝父相</h3><blockquote>
<p>“子绝父相”指的是设置为绝对定位的元素其参考物是设置为相对定位的父元素。如果父级元素是绝对定位或者没有设置，里面的绝对定位自动以body定位。</p>
</blockquote>
<p>上面是绝对定位的一般认识，但是这种认识是错误。正确理解应该是：</p>
<p>只要父级元素设了 position 并且不是 static（默认既是 static ），那么设定了 absolute 的子元素即以此为包含块（最近的）。绝对定位（Absolute positioning）元素定位的参照物是其包含块，既相对于其包含块进行定位，不一定是其父元素。若没有非 static 祖先，包含块为初始包含块，在浏览器里，根元素的包含块（<html>）为初始包含块，只是一般情况下看上去像是 body 区域。</html></p>
<h2 id="2017-8-7"><a href="#2017-8-7" class="headerlink" title="2017.8.7"></a>2017.8.7</h2><h3 id="互联网安全协议"><a href="#互联网安全协议" class="headerlink" title="互联网安全协议"></a>互联网安全协议</h3><h4 id="网络层安全协议"><a href="#网络层安全协议" class="headerlink" title="网络层安全协议"></a>网络层安全协议</h4><p>在虚拟专用网 VPN 上传送的信息都是经过加密的，而提供这种服务的就是 IPsec。IPsec 并不是一个单一协议，而是能够在 IP 层提供互联网通信安全的协议族。IPsec 并没有限定用户必须使用何种特定的加密和鉴别算法。实际上，IPsec 是个框架，它允许通信双方选择合适的算法和参数。为保证互操作性，IPsec 还包含了一套加密算法，所有 IPsec 的实现都必须使用。</p>
<h4 id="运输层安全协议"><a href="#运输层安全协议" class="headerlink" title="运输层安全协议"></a>运输层安全协议</h4><p>运输层现在广泛使用的两个安全协议就是：</p>
<ul>
<li>安全套接字层(Source Socket Layer)</li>
<li>运输层安全(Transport Layer Security)</li>
</ul>
<p>SSL 协议是 Netscape 公司开发，广泛用于基于万维网的各种网络应用。它作用在端系统应用层的 HTTP 和运输层之间，在 TCP 之上建立起一个安全通道，为通过 TCP 传输的应用层数据提供安全保障。之后 1995 年 Netscape 将 SSL 转交给 IETF，IETF 在 SSL 的基础上设计了 TLS 协议，为所有基于 TCP 的网络应用提供安全数据传输服务。</p>
<p>在未使用 SSL 时，应用层的应用程序的数据是通过 TCP 套接字与运输层进行交互的。使用 SSL 之后，在应用程序下面多了一个 SSL 子层，而在应用程序和 SSL 子层之间，还有一个 SSL 套接字，其作用和以前讲过的 TCP 套接字相似，是应用程序和 SSL 子层的应用编程接口 API。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535ly1fib811ach5j20m109uaah.jpg" alt="SSL"></p>
<p>应用层使用 SSL 最多的就是 HTTP，但是 SSL 并非仅用于 HTTP，而是可用于任何应用层的协议。使用 SSL 进行通行时：</p>
<ul>
<li>发送方：SSL 从 SSL 套接字接收应用层的数据，对数据进行加密，然后把加密的数据送往 TCP 套接字</li>
<li>接收方：SSL 从 TCP 套接字读取数据，解密后通过 SSL 套接字把数据交给应用层</li>
</ul>
<p>SSL 提供的安全服务可归纳为一下三种：</p>
<ul>
<li>SSL 服务器鉴别，允许用户证实服务器的身份。支持 SSL 的客户端通过验证来自服务器的数字证书，来鉴别服务器的真实身份并获得服务器的公钥</li>
<li>SSL 客户鉴别，SSL 的可选安全服务，允许服务器证实客户的身份</li>
<li>加密的 SSL 会话，对客户和服务器间发送的所有报文进行加密，并检测报文是否被篡改</li>
</ul>
<h3 id="动态主机配置协议"><a href="#动态主机配置协议" class="headerlink" title="动态主机配置协议"></a>动态主机配置协议</h3><p>为了把协议软件做成通用的和便于移植的，协议软件的编写者不会把所有的细节都固定在源码中。相反，他们把协议软件参数化。这就使得在很多台计算机上有可能使用通过一个经过编译的二进制代码。不同计算机可以设置不同参数来使计算机使用不同的网络协议。动态主机配置协议 DHCP (Dynamic Host Configuration Protocol)，它提供了一种机制，称为即插即用连网。这种机制允许一台计算机加入新的网络和获取 IP 地址而不用手工参与。这有利于经常移动位置的计算机，但对于不经常移动的计算机来说，也免去了手工配置参数的麻烦。</p>
<h2 id="2017-8-9"><a href="#2017-8-9" class="headerlink" title="2017.8.9"></a>2017.8.9</h2><h3 id="Git标签"><a href="#Git标签" class="headerlink" title="Git标签"></a>Git标签</h3><p><code>git tag vxxx</code>可以给最新提交到本地版本打上标签</p>
<p><code>git tag -d vxxx</code> 删除本地标签 </p>
<p><code>git tag vxxx xxxx</code>给历史版本补上标签</p>
<p><code>git tag -a vxxx</code>打上带注解的标签，会进入vi命令模式，按<code>i</code>可以进入编辑模式，再按<code>Esc</code>可以退回命令模式，按<code>:wq</code>保存并退出vi编辑器模式</p>
<p><code>git push origin vxxxx</code>将本地的标签推送到远端服务器</p>
<p><code>git push origin :refs/tags/vxxx</code> 删除远程标签</p>
<h3 id="JavaScript来由"><a href="#JavaScript来由" class="headerlink" title="JavaScript来由"></a>JavaScript来由</h3><p>JavaScript 诞生于 1995 年。当时，它的主要目的是处理以前由服务器端语言（如 Perl）负责的一些输入验证操作。在 JavaScript 问世之前，必须把表单数据发送到服务器端才能确定用户是否没有填写某个必填域，是否输入了无效的值。在那个拨号上网的年代，每一次与服务器的数据交换事实上都成了对人们耐心的一次考验。由此，JavaScript的诞生就是为了解决这个问题。当然如今的 JavaScript 早已具备了与浏览器窗口及其内容等几乎所有方面交互的能力。</p>
<h3 id="ECMAScript"><a href="#ECMAScript" class="headerlink" title="ECMAScript"></a>ECMAScript</h3><p>1997 年，以 JavaScript 1.1 为蓝本的建议被提交给了欧洲计算机制造商协会（ECMA，European Computer Manufactures Association）。该协会最后完成了 ECMA-262——定义一种名为 ECMAScript 的新脚本语言的标准。</p>
<h3 id="JavaScript实现"><a href="#JavaScript实现" class="headerlink" title="JavaScript实现"></a>JavaScript实现</h3><p>虽然 JavaScript 和 ECMAScript 通常都被人们用来表达相同的含义，但 JavaScript 的含义却比 ECMA-262 中规定的要多得多。一个完整的 JavaScript 实现应该由下列三个不同的部分组成。如下图：</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fidl40ke71j20jg08ct8q.jpg" alt="ECMA与JavaScript"></p>
<h2 id="2017-8-10"><a href="#2017-8-10" class="headerlink" title="2017.8.10"></a>2017.8.10</h2><h3 id="HTML-5-的时代要求"><a href="#HTML-5-的时代要求" class="headerlink" title="HTML 5 的时代要求"></a>HTML 5 的时代要求</h3><p>现在的时代已经迫切地要求有一个统一的互联网通用标准。HTML 5 之前的情况是，由于各浏览器之间的不统一，光是修改 Web 浏览器之间的由于兼容性而引起的 bug 就浪费了大量时间。而 HTML 5 的目标就是将 Web 带入一个成熟的应用平台，在 HTML 5 平台上，视频、音频、图像、动画，以及同电脑的交互都被标准化。</p>
<h3 id="Web应用程序"><a href="#Web应用程序" class="headerlink" title="Web应用程序"></a>Web应用程序</h3><p>应用程序有两种模式 C/S、B/S。C/S 是客户端/服务器端程序，也就是说这类程序一般独立运行。而 B/S 就是浏览器端/服务器端应用程序，这类应用程序一般借助 IE 等浏览器来运行。WEB 应用程序一般是 B/S 模式。Web 应用程序首先是“应用程序”，和用标准的程序语言，如 C、C++ 等编写出来的程序没有什么本质上的不同。然而 Web 应用程序又有自己独特的地方，就是它是基于 Web 的，而不是采用传统方法运行的。换句话说，它是典型的浏览器/服务器架构的产物。</p>
<h3 id="HTML-5-要解决的三个问题"><a href="#HTML-5-要解决的三个问题" class="headerlink" title="HTML 5 要解决的三个问题"></a>HTML 5 要解决的三个问题</h3><ol>
<li>Web 浏览器之间的兼容性很低：HTML 5 出现之前 HTML 并没有一个全球统一的标准，这就导致各家浏览器之间的兼容性很低。在某个 Web 浏览器上可以正常运行的 HTML/CSS/JavaScript 等 Web 程序，在另一个 Web 浏览器上就不正常了的事情是非常多的。HTML 5 的使命是详细分析各浏览器所具有的功能，然后以此为基础，要求这些浏览器所有内部功能都要符合一个通用标准。如果各浏览器都符合通用标准，然后以该标准为基础来书写程序，那么程序在各浏览器都能正常运行的可能性就大大提高了。</li>
<li>文档结构不够明确：在HTML 5 之前的版本中，文档的结构不够清晰、明确、语义化。特别是<code>&lt;div&gt;</code>标签的滥用严重降低了文档的语义特性。</li>
<li>Web 应用程序的功能受到了限制：一直以来对于 Web 应用程序来说，HTML 真正做出的贡献是很少的，譬如说就连上传文件时想同时选择一个以上的文件都做不到。为了弥补这方面的不足，HTML 5 已经开始提供各种各样 Web 应用上的新 API，各浏览器也在快速地封装着这些 API，HTML 5 已经使富 Web 应用的实现变成了可能。</li>
</ol>
<h3 id="HTML-5-的语法变化"><a href="#HTML-5-的语法变化" class="headerlink" title="HTML 5 的语法变化"></a>HTML 5 的语法变化</h3><h4 id="DOCTYPE-声明"><a href="#DOCTYPE-声明" class="headerlink" title="DOCTYPE 声明"></a>DOCTYPE 声明</h4><p>HTML 4</p>
<blockquote>
<p>&lt;!DOCTYPE HTML PUBLIC “-//W3C//DTD HTML 4.01 Transitional//EN” “<a href="http://www.w3.org/TR/html4/loose.dtd&quot;&gt;" target="_blank" rel="noopener">http://www.w3.org/TR/html4/loose.dtd&quot;&gt;</a></p>
</blockquote>
<p>HTML 5</p>
<blockquote>
<p>&lt;!DOCTYPE HTML&gt;</p>
</blockquote>
<h4 id="可以省略结束标记的元素"><a href="#可以省略结束标记的元素" class="headerlink" title="可以省略结束标记的元素"></a>可以省略结束标记的元素</h4><p>li、dt、dd、p、rt、rp、optgroup、option、colgroup、thead、tbody、tfoot、tr、td、th</p>
<h4 id="不允许写结束标记的元素"><a href="#不允许写结束标记的元素" class="headerlink" title="不允许写结束标记的元素"></a>不允许写结束标记的元素</h4><p>area、base、br、col、command、embed、hr、img、input、keygen、link、meta、param、source、track、wbr</p>
<h4 id="可以省略全部标记的元素-以隐式方式存在"><a href="#可以省略全部标记的元素-以隐式方式存在" class="headerlink" title="可以省略全部标记的元素(以隐式方式存在)"></a>可以省略全部标记的元素(以隐式方式存在)</h4><p>html、head、body、colgroup、tbody</p>
<h4 id="具有-boolean-值得属性"><a href="#具有-boolean-值得属性" class="headerlink" title="具有 boolean 值得属性"></a>具有 boolean 值得属性</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">'checkbox'</span> <span class="attr">checked</span>&gt;</span>			//只写属性不写属性值代表属性为 true</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">'checkbox'</span>&gt;</span>					//不写属性代表属性为 false</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">'checkbox'</span> <span class="attr">checked</span> = <span class="string">'checked'</span>&gt;</span>	//属性名=属性值，代表属性为 true</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">'checkbox'</span> <span class="attr">checked</span> = <span class="string">''</span>&gt;</span>			//属性值为空字符串，代表属性为 true</span><br></pre></td></tr></table></figure>
<h4 id="全局属性"><a href="#全局属性" class="headerlink" title="全局属性"></a>全局属性</h4><p>是指可以对任何元素都使用的属性，具体可参考<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Global_attributes" target="_blank" rel="noopener">MDN 全局属性</a></p>
<h3 id="HTML-5-新增主体结构元素"><a href="#HTML-5-新增主体结构元素" class="headerlink" title="HTML 5 新增主体结构元素"></a>HTML 5 新增主体结构元素</h3><h4 id="article元素"><a href="#article元素" class="headerlink" title="article元素"></a>article元素</h4><p>article元素代表文档、页面或应用程序中独立的、完整的、可以独自被外部引用的内容。他可以使一篇博客或报刊中的文章、一篇论坛帖子、一段用户评论或独立的插件。</p>
<p>article元素是可以嵌套使用的，内层的内容在原则上需要与外层的内容相关联。</p>
<h4 id="section元素"><a href="#section元素" class="headerlink" title="section元素"></a>section元素</h4><p>section元素用于对网站或应用程序中页面上的内容进行分块，或者说对文章进行分段。</p>
<h3 id="JavaScript-比较"><a href="#JavaScript-比较" class="headerlink" title="JavaScript 比较"></a>JavaScript 比较</h3><blockquote>
<p>相等运算符：==</p>
</blockquote>
<p>相等运算符会进行类型比较</p>
<blockquote>
<p>严格相等运算符：===</p>
</blockquote>
<p>严格相等运算符同时比较元素的值和数据类型</p>
<blockquote>
<p>不相等运算符：!=</p>
</blockquote>
<p>与相等运算符逻辑相反</p>
<blockquote>
<p>严格不相等运算符：!== </p>
</blockquote>
<p>与严格相等运算符逻辑相反</p>
<blockquote>
<p>>、\&lt;、>=、\&lt;=</p>
</blockquote>
<p>都会进行类型转换</p>
<h2 id="2017-8-11"><a href="#2017-8-11" class="headerlink" title="2017.8.11"></a>2017.8.11</h2><h3 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h3><p>JSON 是 JavaScript 语法的一个严格的子集，利用了 JavaScript 中的一些模式来表示结构化数据。它是一种数据格式，不是一种编程语言。很多编程语言都有针对 JSON 的解析器和序列化器。</p>
<p>JSON 支持简单值（字符串、数值、布尔值和null）、对象、数组。例子如下：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"Nicholas"</span>,</span><br><span class="line">  <span class="attr">"age"</span>: <span class="number">29</span>,</span><br><span class="line">  <span class="attr">"school"</span>: &#123;</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"MIT"</span>,</span><br><span class="line">    <span class="attr">"location"</span>: <span class="string">"North Andover,MA"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">//属性名一定为双引号</span><br></pre></td></tr></table></figure>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"title"</span>: <span class="string">"Professional JavaScript"</span>,</span><br><span class="line">    <span class="attr">"authors"</span>: [</span><br><span class="line">      <span class="string">"Nicholas C. Zakas"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"edition"</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="attr">"year"</span>: <span class="number">2011</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"title"</span>: <span class="string">"Professional JavaScript"</span>,</span><br><span class="line">    <span class="attr">"authors"</span>: [</span><br><span class="line">      <span class="string">"Nicholas C. Zakas"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"edition"</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">"year"</span>: <span class="number">2009</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"title"</span>: <span class="string">"Professional Ajax"</span>,</span><br><span class="line">    <span class="attr">"authors"</span>: [</span><br><span class="line">      <span class="string">"Nicholas C. Zakas"</span>,</span><br><span class="line">      <span class="string">"Jeremy McPeak"</span>,</span><br><span class="line">      <span class="string">"Joe Fawcett"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"edition"</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">"year"</span>: <span class="number">2008</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"title"</span>: <span class="string">"Professional Ajax"</span>,</span><br><span class="line">    <span class="attr">"authors"</span>: [</span><br><span class="line">      <span class="string">"Nicholas C. Zakas"</span>,</span><br><span class="line">      <span class="string">"Jeremy McPeak"</span>,</span><br><span class="line">      <span class="string">"Joe Fawcett"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"edition"</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">"year"</span>: <span class="number">2007</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h2 id="2017-8-13"><a href="#2017-8-13" class="headerlink" title="2017.8.13"></a>2017.8.13</h2><h3 id="HTML-使用-JavaScript"><a href="#HTML-使用-JavaScript" class="headerlink" title="HTML 使用 JavaScript"></a>HTML 使用 JavaScript</h3><p>使用<code>&lt;script&gt;</code>元素嵌入 JavaScript 代码块，解释器会从上至下一次解释。在解释器对代码的解释过程中，页面中的 HTML 元素不会被加载或显示。因此 JavaScript 代码块最好确保在 HTML 元素加载完全后再去解释。在使用<code>&lt;script&gt;</code>嵌入 JavaScript 代码时，记住不要在代码中的任何地方出现<code>&quot;&lt;/script&gt;&quot;</code>字符串。因为按照解析嵌入式代码的规则，当浏览器遇到字符串<code>&quot;&lt;/script&gt;&quot;</code>时会认为那是代码块结束标签。而通过<code>&quot;&lt;\/script&gt;&quot;</code>字符串解决这个问题</p>
<h3 id="延迟脚本"><a href="#延迟脚本" class="headerlink" title="延迟脚本"></a>延迟脚本</h3><p>HTML 4.01 为<code>&lt;script&gt;</code>标签定义了 defer 属性。这个属性告诉浏览器立即下载，延迟执行，脚本会被延迟到整个页面都解析完毕后再执行。因此只要设置了该属性，则 JS 代码的嵌入也可以放到<code>&lt;head&gt;</code>标签内。但是这个属性不是所有浏览器都支持，为此，把延迟脚本放在页面底部仍然是最佳选择。</p>
<h3 id="异步脚本"><a href="#异步脚本" class="headerlink" title="异步脚本"></a>异步脚本</h3><p>HTML 5 为<code>&lt;script&gt;</code>元素定义了 async 属性。这个属性改变了脚本的解释时机是由所处文件的位置决定的特点。指定 async 属性的目的是不让页面等待两个脚本下载和执行，从而异步加载页面其他内容。为此，建议异步脚本不要在页面加载期间修改 DOM。</p>
<p>JS 是单线程 UI 语言，但JS的单线程是指一个浏览器进程中只有一个JS的执行线程，同一时刻内只会有一段代码在执行（你可以使用IE的标签式浏览试试看效果，这时打开的多个页面使用的都是同一个JS执行线程，如果其中一个页面在执行一个运算量较大的function时，其他窗口的JS就会停止工作）。<br>而异步机制是浏览器的两个或以上常驻线程共同完成的，例如异步请求是由两个常驻线程：JS执行线程和事件触发线程共同完成的，JS的执行线程发起异步请求（这时浏览器会开一条新的HTTP请求线程来执行请求，这时JS的任务已完成，继续执行线程队列中剩下的其他任务），然后在未来的某一时刻事件触发线程监视到之前的发起的HTTP请求已完成，它就会把完成事件插入到JS执行队列的尾部等待JS处理。</p>
<p>具体可查阅 <a href="https://www.zhihu.com/question/20866267/answer/17057615" target="_blank" rel="noopener">JavaScript 既是单线程又是异步的，请问这二者是否冲突，以及有什么区别？-知乎</a></p>
<h3 id="const、let、var-的区别"><a href="#const、let、var-的区别" class="headerlink" title="const、let、var 的区别"></a>const、let、var 的区别</h3><ul>
<li>使用 var 声明的变量，其作用域为该语句所在的函数内，且存在变量提升现象</li>
<li>使用 let 声明的变量，其作用域为该语句所在的代码块内，不存在变量提升</li>
<li>使用 const 声明的是常量，在后面出现的代码中不能再修改该常量的值</li>
</ul>
<h3 id="变量提升和函数提升"><a href="#变量提升和函数提升" class="headerlink" title="变量提升和函数提升"></a>变量提升和函数提升</h3><h4 id="变量提升"><a href="#变量提升" class="headerlink" title="变量提升"></a>变量提升</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(global);		<span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">var</span> global = <span class="string">"global"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(global);		<span class="comment">// global</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fu</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a);			<span class="comment">// undefined</span></span><br><span class="line">  <span class="keyword">var</span> a =<span class="string">"aaa"</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(a);			<span class="comment">// aaa</span></span><br><span class="line">&#125;</span><br><span class="line">fn();</span><br></pre></td></tr></table></figure>
<p>实际执行顺序</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> global; <span class="comment">//变量提升，全局作用域，但是只声明，未赋值</span></span><br><span class="line"><span class="built_in">console</span>.log(global);		<span class="comment">// undefined</span></span><br><span class="line">global = <span class="string">"global"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(global);		<span class="comment">// global</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fu</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a; <span class="comment">//变量提升，函数作用域范围内，只声明，未赋值</span></span><br><span class="line">  <span class="built_in">console</span>.log(a);			<span class="comment">// undefined</span></span><br><span class="line">  <span class="keyword">var</span> a =<span class="string">"aaa"</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(a);			<span class="comment">// aaa</span></span><br><span class="line">&#125;</span><br><span class="line">fn();</span><br></pre></td></tr></table></figure>
<h4 id="函数提升"><a href="#函数提升" class="headerlink" title="函数提升"></a>函数提升</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(f1); <span class="comment">//funtion f1()&#123;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(f2); <span class="comment">//undefined</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> f2=funtion()&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>因为函数提升只对函数声明式起作用，对函数字面量式不起作用，其实际执行顺序</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(f1);</span><br><span class="line"><span class="built_in">console</span>.log(f2);</span><br><span class="line"><span class="keyword">var</span> f2=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2017-8-16"><a href="#2017-8-16" class="headerlink" title="2017.8.16"></a>2017.8.16</h2><h3 id="回调函数"><a href="#回调函数" class="headerlink" title="回调函数"></a>回调函数</h3><p>回调函数——函数中的参数如果是另一个函数的话，那么这个作为参数的函数就是回调函数，可以在需要的时候在函数体内调用这个函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params">callback</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"我是parent函数a"</span>);</span><br><span class="line">  	<span class="built_in">console</span>.log(<span class="string">"调用回调函数"</span>);</span><br><span class="line">  	callback();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"我是回调函数b"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"我是回调函数c"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    a(b);</span><br><span class="line">  	a(c);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">test();</span><br></pre></td></tr></table></figure>
<p>输出结果</p>
<p>我是parent函数a——&gt;调用回调函数——&gt;我是回调函数b——&gt;我是parent函数a——&gt;调用回调函数——&gt;我是回调函数c</p>
<h3 id="window-requestAnimationFrame"><a href="#window-requestAnimationFrame" class="headerlink" title="window.requestAnimationFrame()"></a>window.requestAnimationFrame()</h3><h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">animate</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//done();</span></span><br><span class="line">  	requestAnimationFrame(animate);</span><br><span class="line">&#125;</span><br><span class="line">requestAnimationFrame(animate);</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> globalID;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">animate</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//done();</span></span><br><span class="line">  	globalUD = requestAnimationFrame(animate);</span><br><span class="line">  	<span class="comment">//do something animate</span></span><br><span class="line">&#125;</span><br><span class="line">globalID = requestAnimationFrame(animate);</span><br><span class="line">cancelAnimationFrame(globalID);</span><br></pre></td></tr></table></figure>
<h4 id="兼容性最佳实践"><a href="#兼容性最佳实践" class="headerlink" title="兼容性最佳实践"></a>兼容性最佳实践</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> lastTime = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> vendors = [<span class="string">'webkit'</span>, <span class="string">'moz'</span>, <span class="string">'o'</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> x = <span class="number">0</span>; x &lt; vendors.length &amp;&amp; !<span class="built_in">window</span>.requestAnimationFrame; ++x) &#123;</span><br><span class="line">        <span class="built_in">window</span>.requestAnimationFrame = <span class="built_in">window</span>[vendors[x]+<span class="string">'RequestAnimationFrame'</span>];</span><br><span class="line">        <span class="built_in">window</span>.cancelAnimationFrame =</span><br><span class="line">          <span class="built_in">window</span>[vendors[x]+<span class="string">'CancelAnimationFrame'</span>] || <span class="built_in">window</span>[vendors[x]+<span class="string">'CancelRequestAnimationFrame'</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">window</span>.requestAnimationFrame)</span><br><span class="line">        <span class="built_in">window</span>.requestAnimationFrame = <span class="function"><span class="keyword">function</span>(<span class="params">callback, element</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> currTime = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">            <span class="keyword">var</span> timeToCall = <span class="built_in">Math</span>.max(<span class="number">0</span>, <span class="number">16</span> - (currTime - lastTime));</span><br><span class="line">            <span class="keyword">var</span> id = <span class="built_in">window</span>.setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; callback(currTime + timeToCall); &#125;,</span><br><span class="line">              timeToCall);</span><br><span class="line">            lastTime = currTime + timeToCall;</span><br><span class="line">            <span class="keyword">return</span> id;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">window</span>.cancelAnimationFrame)</span><br><span class="line">        <span class="built_in">window</span>.cancelAnimationFrame = <span class="function"><span class="keyword">function</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">            clearTimeout(id);</span><br><span class="line">        &#125;;</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure>
<h2 id="2017-8-24"><a href="#2017-8-24" class="headerlink" title="2017.8.24"></a>2017.8.24</h2><h3 id="JavaScript-的面向对象"><a href="#JavaScript-的面向对象" class="headerlink" title="JavaScript 的面向对象"></a>JavaScript 的面向对象</h3><h4 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Car = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.wheels = <span class="number">4</span>;</span><br><span class="line">  <span class="keyword">this</span>.engines = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">this</span>.seats = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> myCar = <span class="keyword">new</span> Car();</span><br></pre></td></tr></table></figure>
<p>如上面一个构造函数，通常使用大写字母开头，以便把自己和其他普通函数区别开来。在构造函数中，<em><code>this</code>指向被此构造函数创建出来的对象</em>。要使用<code>new</code>关键字去调用构造函数。因为只有这样，JavaScript 才知道这是要去构造一个新对象，<em>并且把构造函数中的<code>this</code>指向这个新对象</em>。</p>
<h4 id="对象的私有属性-方法和公有属性-方法"><a href="#对象的私有属性-方法和公有属性-方法" class="headerlink" title="对象的私有属性/方法和公有属性/方法"></a>对象的私有属性/方法和公有属性/方法</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Bike = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> gear = <span class="number">2</span>;					<span class="comment">//var 关键字创建私有属性，在对象外部无法访问私有属性/方法</span></span><br><span class="line">  <span class="keyword">this</span>.getGear = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;	<span class="comment">//this 关键字指向将要被创建对象，可创建公有属性/方法</span></span><br><span class="line">      <span class="keyword">return</span> gear;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">this</span>.setGear = <span class="function"><span class="keyword">function</span>(<span class="params">num</span>)</span>&#123;</span><br><span class="line">      gear = num;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> myBike = <span class="keyword">new</span> Bike();</span><br></pre></td></tr></table></figure>
<h2 id="2017-8-31"><a href="#2017-8-31" class="headerlink" title="2017.8.31"></a>2017.8.31</h2><h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><p>因为全局变量可以被内部环境（例如函数内部）读取使用，而局部变量只能在自身环境内部使用外并不能被外部使用。因此我们可以通过闭包的方式在外部读取内部的变量，这种方式会使局部变量始终保存在内存中，容易造成内存泄漏。简而言之，闭包就是内部函数和外部函数连接的一座桥梁。</p>
<p>例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHello2</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> text=<span class="string">"Hello "</span>+name;	<span class="comment">//局部变量,正常情况下外部无法访问</span></span><br><span class="line">  	<span class="keyword">var</span> sayAlert=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(text);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> say2=sayHello2(<span class="string">"Jane"</span>);</span><br><span class="line">say2();					<span class="comment">//Hello Jane</span></span><br></pre></td></tr></table></figure>
<p>更多内容可查阅</p>
<ul>
<li><a href="https://blog.fundebug.com/2017/08/07/javascript-closure-examples/" target="_blank" rel="noopener">通过示例学习JavaScript闭包</a></li>
<li><a href="http://blog.percymong.com/2016/09/11/javascript-closure/" target="_blank" rel="noopener">JavaScript 闭包 |知秋的博客</a></li>
<li><a href="http://fsux.me/js/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA/2016/01/03/In-depth-to-study-JS-Closure.html" target="_blank" rel="noopener">Javascript 深入浅出闭包</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html" target="_blank" rel="noopener">学习Javascript闭包（Closure）|阮一峰的网络日志</a></li>
</ul>
<h3 id="global-与-window"><a href="#global-与-window" class="headerlink" title="global 与 window"></a>global 与 window</h3><p>通过 node 环境执行 js 与我们平时在浏览器中执行 js 有所不同，平常我们在网页中执行 js 代码，我们的全局对象就是 window ，而所谓的最顶级的 global 对象，在浏览器中无法直接访问，我们只能通过 window 这个代理来访问到全局对象的相关属性。但是在 node 中，我们是可以直接访问到全局对象 global 的。</p>
<h3 id="JavaScript-模块化编程"><a href="#JavaScript-模块化编程" class="headerlink" title="JavaScript 模块化编程"></a>JavaScript 模块化编程</h3><p>随着 Web 应用程序的功能越来越丰富，JavaScript 业务逻辑越来越复杂。网页越来越像桌面程序，需要一个团队分工协作、进度管理、单元测试等等……开发者不得不使用软件工程的方法，管理网页的业务逻辑。Javascript 模块化编程，已经成为一个迫切的需求。理想情况下，开发者只需要实现核心的业务逻辑，其他都可以加载别人已经写好的模块。但是，Javascript不是一种模块化编程语言，它不支持”<a href="http://www.ruanyifeng.com/blog/2012/07/three_ways_to_define_a_javascript_class.html" target="_blank" rel="noopener">类</a>“（class），更遑论”模块”（module）了。（正在制定中的<a href="http://en.wikipedia.org/wiki/ECMAScript" target="_blank" rel="noopener">ECMAScript标准</a>第六版，将正式支持”类”和”模块”，但还需要很长时间才能投入实用。）具体可查阅<a href="http://www.ruanyifeng.com/blog/2012/10/javascript_module.html" target="_blank" rel="noopener">JavaScript 模块化编程（一）：模块的写法|阮一峰的网络日志</a>。而 AMD 和 CMD 是两种模块定义规范，AMD 即异步模块定义，依赖前置；CMD 通用模块定义规范，依赖就近。</p>
<h3 id="高内聚，低耦合"><a href="#高内聚，低耦合" class="headerlink" title="高内聚，低耦合"></a>高内聚，低耦合</h3><ul>
<li>内聚是从功能角度来度量模块内的联系，一个好的内聚模块应当恰好做一件事。它描述的是模块内的功能联系</li>
<li>耦合是软件结构中各模块之间相互连接的一种度量，耦合强弱取决于模块间接口的复杂程度、进入或访问一个模块的点以及通过接口的数据</li>
</ul>
<h2 id="2017-9-1"><a href="#2017-9-1" class="headerlink" title="2017.9.1"></a>2017.9.1</h2><h3 id="闭包的应用"><a href="#闭包的应用" class="headerlink" title="闭包的应用"></a>闭包的应用</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// 私有变量</span></span><br><span class="line">  <span class="keyword">var</span> series = <span class="string">"哺乳动物"</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params"></span>)</span>&#123;				<span class="comment">// 函数声明式</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"Run!!!"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 闭包</span></span><br><span class="line">  <span class="keyword">this</span>.getSeries = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> series;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="普通设计的单例模式"><a href="#普通设计的单例模式" class="headerlink" title="普通设计的单例模式"></a>普通设计的单例模式</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> singleton = &#123;</span><br><span class="line">  name: <span class="string">"percy"</span>,</span><br><span class="line">  speak: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"speaking"</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  getName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="模块化设计的单例模式-立即执行函数-IIFE"><a href="#模块化设计的单例模式-立即执行函数-IIFE" class="headerlink" title="模块化设计的单例模式(立即执行函数 IIFE)"></a>模块化设计的单例模式(立即执行函数 IIFE)</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> singleton = &#123;</span><br><span class="line">  <span class="comment">//私有变量</span></span><br><span class="line">  <span class="keyword">var</span> age = <span class="number">22</span>;</span><br><span class="line">  <span class="keyword">var</span> speak = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"speaking"</span>);</span><br><span class="line"> &#125;;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//公有属性和方法</span></span><br><span class="line">　<span class="keyword">return</span> &#123;</span><br><span class="line">     name: <span class="string">"percy"</span>,</span><br><span class="line">     getAge: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">         <span class="keyword">return</span> age;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>具体可查阅 <a href="http://www.ruanyifeng.com/blog/2012/10/javascript_module.html" target="_blank" rel="noopener">JavaScript模块化编程（一）：模块的写法|阮一峰的网络日志</a></p>
<h3 id="闭包计数器"><a href="#闭包计数器" class="headerlink" title="闭包计数器"></a>闭包计数器</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> countNumber = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;	<span class="comment">//匿名函数</span></span><br><span class="line">  <span class="keyword">var</span> num = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;			<span class="comment">//匿名函数</span></span><br><span class="line">      <span class="keyword">return</span> ++num;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<h3 id="eval-is-evil"><a href="#eval-is-evil" class="headerlink" title="eval is evil"></a>eval is evil</h3><p>eval() 函数极低的运算效率，是访问一个简单函数运算执行时间几百倍</p>
<h3 id="父作用域都是对子作用域可见"><a href="#父作用域都是对子作用域可见" class="headerlink" title="父作用域都是对子作用域可见"></a>父作用域都是对子作用域可见</h3><h3 id="浏览器内核"><a href="#浏览器内核" class="headerlink" title="浏览器内核"></a>浏览器内核</h3><p>一般来说浏览器内核指的是渲染引擎和 JS 引擎。最开始渲染引擎和 JS 引擎并没有区分的很明确，后来 JS 引擎越来越独立，<strong>内核就倾向于只指渲染引擎</strong>。所有网页浏览器、电子邮件客户端以及其它需要编辑、显示网络内容的应用程序都需要内核。常见的浏览器内核可以分这四种：Trident、Gecko、Blink(Chromium)、Webkit。</p>
<h2 id="2017-9-2"><a href="#2017-9-2" class="headerlink" title="2017.9.2"></a>2017.9.2</h2><h3 id="预处理器（Preprocessor）"><a href="#预处理器（Preprocessor）" class="headerlink" title="预处理器（Preprocessor）"></a>预处理器（Preprocessor）</h3><p>In time writing HTML and CSS may feel a bit taxing, requiring a lot of the same tasks to be completed over and over again. Tasks such as closing tags in HTML or repetitively having to looking up hexadecimal color values in CSS.</p>
<p>These different tasks, while commonly small, do add up to quite a bit of inefficiency. Fortunately these, and a handful of other inefficiencies, have been recognized and preprocessor solutions have risen to the challenge.</p>
<p>A preprocessor is a program that takes one type of data and converts it to another type of data. In the case of HTML and CSS, some of the more popular preprocessor languages include <a href="http://haml.info/" target="_blank" rel="noopener">Haml</a> and <a href="http://sass-lang.com/" target="_blank" rel="noopener">Sass</a>. Haml is processed into HTML and Sass is processed into CSS.</p>
<p>Upon setting out to solve some of the more common problems, Haml and Sass found many additional ways to empower HTML and CSS, not only by removing the inefficiencies but also in creating ways to make building websites easier and more logical. The popularity of preprocessors have also brought along different frameworks to support them, one of the more popular being Compass.</p>
<p>you can check <a href="http://learn.shayhowe.com/advanced-html-css/preprocessors/" target="_blank" rel="noopener">Preprocessors - Learn to Code Advanced HTML &amp; CSS</a> to get more information.</p>
<h2 id="2017-9-7"><a href="#2017-9-7" class="headerlink" title="2017.9.7"></a>2017.9.7</h2><h3 id="GitHub-Pages-是什么？"><a href="#GitHub-Pages-是什么？" class="headerlink" title="GitHub Pages 是什么？"></a>GitHub Pages 是什么？</h3><p>Github Pages 设计的初衷是为托管在 GitHub 上的项目提供介绍页面,开发者们可以通过 GitHub Pages 为他们的每一个项目创建一个用于介绍该项目的静态网站,不过由于他的空间免费而且稳定,因此用它搭建一个个人博客网站是再好不过了。</p>
<h2 id="2017-9-10"><a href="#2017-9-10" class="headerlink" title="2017.9.10"></a>2017.9.10</h2><h3 id="ECMAScript-1"><a href="#ECMAScript-1" class="headerlink" title="ECMAScript"></a>ECMAScript</h3><p>由 ECMA-262 定义的 ECMAScript 与 Web 浏览器没有依赖关系。实际上，这门语言本身并不包含输入和输出定义。ECMA-262 定义的只是这门语言的基础，而在此基础之上可以构建更完善的脚本语言。我们常见的 Web 浏览器只是 ECMAScript 实现可能的宿主环境之一。宿主环境不仅提供基本的 ECMAScript 实现，同时也会提供该语言的扩展，以便语言与环境之间对接交互。而这些扩展——如 DOM，则利用 ECMAScript 的核心类型和语法提供更多更具体的功能，以便实现针对环境的操作。</p>
<p>既然 ECMA-262 标准没有参照 Web 浏览器，那它都规定了以下这些内容：</p>
<ul>
<li>语法</li>
<li>类型</li>
<li>语句</li>
<li>关键字</li>
<li>保留字</li>
<li>操作符</li>
<li>对象</li>
</ul>
<h3 id="DOM-的诞生"><a href="#DOM-的诞生" class="headerlink" title="DOM 的诞生"></a>DOM 的诞生</h3><p>曾在 IE 4 和 Netscape Navigator 4 分别支持的不同形式 DHTML 技术，该技术可以使开发人员不用重新加载页面，就可以修改其外观和内容。然而，微软和 Netscape 两家公司在 DHTML 技术发展的不同观点将会使网页的兼容性大大降低，这时，致力于 Web 通信标准的 W3C 着手规划 DOM 标准。</p>
<h3 id="DOM-标准"><a href="#DOM-标准" class="headerlink" title="DOM 标准"></a>DOM 标准</h3><ul>
<li>DOM0——DOM历史坐标中的一个参照点，指的是最早的 DHTML 技术</li>
<li>DOM1——实现映射文档的结构这一功能，并提供一些对 HTML 的对象和方法</li>
<li>DOM2——在原先基础上增加对鼠标和用户界面事件、范围、遍历等模块</li>
<li>DOM3——进一步扩展 DOM，引入了以统一方式加载和保存文档的方法、新增了验证文档的方法</li>
</ul>
<h3 id="BOM-浏览器对象模型"><a href="#BOM-浏览器对象模型" class="headerlink" title="BOM 浏览器对象模型"></a>BOM 浏览器对象模型</h3><p>开发人员使用 BOM 可以控制浏览器显示的页面以外的部分——浏览器窗口和框架。</p>
<h3 id="Null-和-Undefined"><a href="#Null-和-Undefined" class="headerlink" title="Null 和 Undefined"></a>Null 和 Undefined</h3><p>无论在什么情况下，都没有必要把一个变量的值显示地设置为 undefined ，可是同样的规则对 null 却不适用。换句话说，只要意在保存对象的变量还没有真正保存到对象，就应该明确地让该变量保存 null 值。这样做不仅可以体现 null 作为空对象指针的惯例，而且也有助于进一步区分 null 和undefined。</p>
<h3 id="Boolean-类型"><a href="#Boolean-类型" class="headerlink" title="Boolean 类型"></a>Boolean 类型</h3><p>Boolean 类型的字面值只有两个，但 ECMAscript 中所有类型的值 Number、String、Undefined、Null 都有与这两个 Boolean 值等价的值。要将一个值转换为其对应的 Boolean 值，可以调用转型函数 <code>Boolean()</code> ，至于转换结果为 true 还是 false，取决于待转换值得数据类型及其实际值。具体转换规则可参考《JavaScript 高级程序设计》第45页表格。转换规则对理解流控制语句（如 if 语句）自动执行相应的 Boolean 转换非常重要，请看下面的代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> message = <span class="string">"Hello World!"</span></span><br><span class="line"><span class="keyword">if</span> (message)&#123;</span><br><span class="line">    alert(<span class="string">"Value is true"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2017-9-12"><a href="#2017-9-12" class="headerlink" title="2017.9.12"></a>2017.9.12</h2><h3 id="Web建站中各种技术的关系"><a href="#Web建站中各种技术的关系" class="headerlink" title="Web建站中各种技术的关系"></a>Web建站中各种技术的关系</h3><p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fjh07yzr62j21e00xcnar.jpg" alt=""></p>
<h2 id="2017-9-13"><a href="#2017-9-13" class="headerlink" title="2017.9.13"></a>2017.9.13</h2><h3 id="Vue框架的“渐进式”特性说明"><a href="#Vue框架的“渐进式”特性说明" class="headerlink" title="Vue框架的“渐进式”特性说明"></a>Vue框架的“渐进式”特性说明</h3><p>前端三大框架 Vue、React、Angular 各自都有自己的一些特点，这样不可避免的会对使用者有一定的要求，这些要求有强有弱，它的强势程度会影响在业务开发中的使用方式。而 Vue 框架的“渐进式”特性表明它的要求不是强势的，没有多做职责之外的事。也可以理解为所谓的“高内聚，低耦合”。具体更多信息可查阅 <a href="https://www.zhihu.com/question/51907207" target="_blank" rel="noopener">知乎|Vue2.0 中，“渐进式框架”和“自底向上增量开发的设计”这两个概念是什么？</a></p>
<h2 id="2017-9-14"><a href="#2017-9-14" class="headerlink" title="2017.9.14"></a>2017.9.14</h2><h3 id="jQuery-Validate插件"><a href="#jQuery-Validate插件" class="headerlink" title="jQuery Validate插件"></a>jQuery Validate插件</h3><h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><p>jQuery Validate 插件为表单提供了强大的验证功能，让客户端表单验证变得更简单，同时提供了大量的定制选项，满足应用程序各种需求。该插件捆绑了一套有用的验证方法，包括 URL 和电子邮件验证，同时提供了一个用来编写用户自定义方法的 API。所有的捆绑方法默认使用英语作为错误信息，且已翻译成其他 37 种语言。</p>
<h4 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a>使用</h4><h5 id="将表单验证规则写到控件上"><a href="#将表单验证规则写到控件上" class="headerlink" title="将表单验证规则写到控件上"></a>将表单验证规则写到控件上</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://static.runoob.com/assets/jquery-validation-1.14.0/lib/jquery.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://static.runoob.com/assets/jquery-validation-1.14.0/dist/jquery.validate.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://static.runoob.com/assets/jquery-validation-1.14.0/dist/localization/messages_zh.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">$.validator.setDefaults(&#123;</span></span><br><span class="line"><span class="javascript">    submitHandler: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      alert(<span class="string">"提交事件!"</span>);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="javascript">$().ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    $(<span class="string">"#commentForm"</span>).validate();</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-class">.error</span>&#123;</span></span><br><span class="line"><span class="css">	<span class="selector-tag">color</span><span class="selector-pseudo">:red</span>;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">"cmxform"</span> <span class="attr">id</span>=<span class="string">"commentForm"</span> <span class="attr">method</span>=<span class="string">"get"</span> <span class="attr">action</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">fieldset</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">legend</span>&gt;</span>输入您的名字，邮箱，URL，备注。<span class="tag">&lt;/<span class="name">legend</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"cname"</span>&gt;</span>Name (必需, 最小两个字母)<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"cname"</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">minlength</span>=<span class="string">"2"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"cemail"</span>&gt;</span>E-Mail (必需)<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"cemail"</span> <span class="attr">type</span>=<span class="string">"email"</span> <span class="attr">name</span>=<span class="string">"email"</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"curl"</span>&gt;</span>URL (可选)<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"curl"</span> <span class="attr">type</span>=<span class="string">"url"</span> <span class="attr">name</span>=<span class="string">"url"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"ccomment"</span>&gt;</span>备注 (必需)<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">id</span>=<span class="string">"ccomment"</span> <span class="attr">name</span>=<span class="string">"comment"</span> <span class="attr">required</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"submit"</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"Submit"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="将表单验证规则写到js代码中"><a href="#将表单验证规则写到js代码中" class="headerlink" title="将表单验证规则写到js代码中"></a>将表单验证规则写到js代码中</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">"utf-8"</span>&gt;</span><br><span class="line">&lt;title&gt;菜鸟教程(runoob.com)&lt;<span class="regexp">/title&gt;</span></span><br><span class="line"><span class="regexp">&lt;script src="http:/</span><span class="regexp">/static.runoob.com/</span>assets/jquery-validation<span class="number">-1.14</span><span class="number">.0</span>/lib/jquery.js<span class="string">"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;script src="</span>http:<span class="comment">//static.runoob.com/assets/jquery-validation-1.14.0/dist/jquery.validate.min.js"&gt;&lt;/script&gt;</span></span><br><span class="line">&lt;script src=<span class="string">"http://static.runoob.com/assets/jquery-validation-1.14.0/dist/localization/messages_zh.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;script&gt;</span><br><span class="line">$.validator.setDefaults(&#123;</span><br><span class="line">    submitHandler: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      alert(<span class="string">"提交事件!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">$().ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="comment">// 在键盘按下并释放及提交后验证提交表单</span></span><br><span class="line">  $(<span class="string">"#signupForm"</span>).validate(&#123;</span><br><span class="line">	    rules: &#123;</span><br><span class="line">	      firstname: <span class="string">"required"</span>,</span><br><span class="line">	      lastname: <span class="string">"required"</span>,</span><br><span class="line">	      username: &#123;</span><br><span class="line">	        required: <span class="literal">true</span>,</span><br><span class="line">	        minlength: <span class="number">2</span></span><br><span class="line">	      &#125;,</span><br><span class="line">	      password: &#123;</span><br><span class="line">	        required: <span class="literal">true</span>,</span><br><span class="line">	        minlength: <span class="number">5</span></span><br><span class="line">	      &#125;,</span><br><span class="line">	      confirm_password: &#123;</span><br><span class="line">	        required: <span class="literal">true</span>,</span><br><span class="line">	        minlength: <span class="number">5</span>,</span><br><span class="line">	        equalTo: <span class="string">"#password"</span></span><br><span class="line">	      &#125;,</span><br><span class="line">	      email: &#123;</span><br><span class="line">	        required: <span class="literal">true</span>,</span><br><span class="line">	        email: <span class="literal">true</span></span><br><span class="line">	      &#125;,</span><br><span class="line">	      <span class="string">"topic[]"</span>: &#123;</span><br><span class="line">	        required: <span class="string">"#newsletter:checked"</span>,</span><br><span class="line">	        minlength: <span class="number">2</span></span><br><span class="line">	      &#125;,</span><br><span class="line">	      agree: <span class="string">"required"</span></span><br><span class="line">	    &#125;,</span><br><span class="line">	    messages: &#123;</span><br><span class="line">	      firstname: <span class="string">"请输入您的名字"</span>,</span><br><span class="line">	      lastname: <span class="string">"请输入您的姓氏"</span>,</span><br><span class="line">	      username: &#123;</span><br><span class="line">	        required: <span class="string">"请输入用户名"</span>,</span><br><span class="line">	        minlength: <span class="string">"用户名必需由两个字母组成"</span></span><br><span class="line">	      &#125;,</span><br><span class="line">	      password: &#123;</span><br><span class="line">	        required: <span class="string">"请输入密码"</span>,</span><br><span class="line">	        minlength: <span class="string">"密码长度不能小于 5 个字母"</span></span><br><span class="line">	      &#125;,</span><br><span class="line">	      confirm_password: &#123;</span><br><span class="line">	        required: <span class="string">"请输入密码"</span>,</span><br><span class="line">	        minlength: <span class="string">"密码长度不能小于 5 个字母"</span>,</span><br><span class="line">	        equalTo: <span class="string">"两次密码输入不一致"</span></span><br><span class="line">	      &#125;,</span><br><span class="line">	      email: <span class="string">"请输入一个正确的邮箱"</span>,</span><br><span class="line">	      agree: <span class="string">"请接受我们的声明"</span>,</span><br><span class="line">	      topic: <span class="string">"请选择两个主题"</span></span><br><span class="line">	    &#125;</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;);</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;style&gt;</span></span><br><span class="line"><span class="regexp">.error&#123;</span></span><br><span class="line"><span class="regexp">	color:red;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">&lt;/</span>style&gt;</span><br><span class="line">&lt;<span class="regexp">/head&gt;</span></span><br><span class="line"><span class="regexp">&lt;body&gt;</span></span><br><span class="line"><span class="regexp">&lt;form class="cmxform" id="signupForm" method="get" action=""&gt;</span></span><br><span class="line"><span class="regexp">  &lt;fieldset&gt;</span></span><br><span class="line"><span class="regexp">    &lt;legend&gt;验证完整的表单&lt;/</span>legend&gt;</span><br><span class="line">    &lt;p&gt;</span><br><span class="line">      &lt;label <span class="keyword">for</span>=<span class="string">"firstname"</span>&gt;名字&lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">      &lt;input id="firstname" name="firstname" type="text"&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>p&gt;</span><br><span class="line">    &lt;p&gt;</span><br><span class="line">      &lt;label <span class="keyword">for</span>=<span class="string">"lastname"</span>&gt;姓氏&lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">      &lt;input id="lastname" name="lastname" type="text"&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>p&gt;</span><br><span class="line">    &lt;p&gt;</span><br><span class="line">      &lt;label <span class="keyword">for</span>=<span class="string">"username"</span>&gt;用户名&lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">      &lt;input id="username" name="username" type="text"&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>p&gt;</span><br><span class="line">    &lt;p&gt;</span><br><span class="line">      &lt;label <span class="keyword">for</span>=<span class="string">"password"</span>&gt;密码&lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">      &lt;input id="password" name="password" type="password"&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>p&gt;</span><br><span class="line">    &lt;p&gt;</span><br><span class="line">      &lt;label <span class="keyword">for</span>=<span class="string">"confirm_password"</span>&gt;验证密码&lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">      &lt;input id="confirm_password" name="confirm_password" type="password"&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>p&gt;</span><br><span class="line">    &lt;p&gt;</span><br><span class="line">      &lt;label <span class="keyword">for</span>=<span class="string">"email"</span>&gt;Email&lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">      &lt;input id="email" name="email" type="email"&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>p&gt;</span><br><span class="line">    &lt;p&gt;</span><br><span class="line">      &lt;label <span class="keyword">for</span>=<span class="string">"agree"</span>&gt;请同意我们的声明&lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">      &lt;input type="checkbox" class="checkbox" id="agree" name="agree"&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>p&gt;</span><br><span class="line">    &lt;p&gt;</span><br><span class="line">      &lt;label <span class="keyword">for</span>=<span class="string">"newsletter"</span>&gt;我乐意接收新信息&lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">      &lt;input type="checkbox" class="checkbox" id="newsletter" name="newsletter"&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>p&gt;</span><br><span class="line">    &lt;fieldset id=<span class="string">"newsletter_topics"</span>&gt;</span><br><span class="line">      &lt;legend&gt;主题 (至少选择两个) - 注意：如果没有勾选“我乐意接收新信息”以下选项会隐藏，但我们这里作为演示让它可见&lt;<span class="regexp">/legend&gt;</span></span><br><span class="line"><span class="regexp">      &lt;label for="topic_marketflash"&gt;</span></span><br><span class="line"><span class="regexp">        &lt;input type="checkbox" id="topic_marketflash" value="marketflash" name="topic[]"&gt;Marketflash</span></span><br><span class="line"><span class="regexp">      &lt;/</span>label&gt;</span><br><span class="line">      &lt;label <span class="keyword">for</span>=<span class="string">"topic_fuzz"</span>&gt;</span><br><span class="line">        &lt;input type=<span class="string">"checkbox"</span> id=<span class="string">"topic_fuzz"</span> value=<span class="string">"fuzz"</span> name=<span class="string">"topic[]"</span>&gt;Latest fuzz</span><br><span class="line">      &lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">      &lt;label for="topic_digester"&gt;</span></span><br><span class="line"><span class="regexp">        &lt;input type="checkbox" id="topic_digester" value="digester" name="topic[]"&gt;Mailing list digester</span></span><br><span class="line"><span class="regexp">      &lt;/</span>label&gt;</span><br><span class="line">      &lt;label <span class="keyword">for</span>=<span class="string">"topic"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"error"</span> style=<span class="string">"display:none"</span>&gt;至少选择两个&lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>fieldset&gt;</span><br><span class="line">    &lt;p&gt;</span><br><span class="line">      &lt;input <span class="class"><span class="keyword">class</span></span>=<span class="string">"submit"</span> type=<span class="string">"submit"</span> value=<span class="string">"提交"</span>&gt;</span><br><span class="line">    &lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>fieldset&gt;</span><br><span class="line">&lt;<span class="regexp">/form&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>body&gt;</span><br><span class="line">&lt;<span class="regexp">/html&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h3><h4 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h4><p>AJAX = Asynchronous JavaScript and XML（异步的 JavaScript 和 XML）。AJAX 不是新的编程语言，而是一种使用现有标准的新方法。AJAX 最大的优点是在不重新加载整个页面的情况下，可以与服务器交换数据并更新部分网页内容。AJAX 不需要任何浏览器插件，但需要用户允许JavaScript在浏览器上执行。</p>
<h4 id="使用-2"><a href="#使用-2" class="headerlink" title="使用"></a>使用</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="function"><span class="keyword">function</span> <span class="title">loadXMLDoc</span>(<span class="params"></span>)</span></span></span><br><span class="line"><span class="undefined">&#123;</span></span><br><span class="line"><span class="javascript">	<span class="keyword">var</span> xmlhttp;</span></span><br><span class="line"><span class="javascript">	<span class="keyword">if</span> (<span class="built_in">window</span>.XMLHttpRequest)</span></span><br><span class="line"><span class="undefined">	&#123;</span></span><br><span class="line"><span class="javascript">		<span class="comment">//  IE7+, Firefox, Chrome, Opera, Safari 浏览器执行代码</span></span></span><br><span class="line"><span class="javascript">		xmlhttp=<span class="keyword">new</span> XMLHttpRequest();</span></span><br><span class="line"><span class="undefined">	&#125;</span></span><br><span class="line"><span class="javascript">	<span class="keyword">else</span></span></span><br><span class="line"><span class="undefined">	&#123;</span></span><br><span class="line"><span class="javascript">		<span class="comment">// IE6, IE5 浏览器执行代码</span></span></span><br><span class="line"><span class="javascript">		xmlhttp=<span class="keyword">new</span> ActiveXObject(<span class="string">"Microsoft.XMLHTTP"</span>);</span></span><br><span class="line"><span class="undefined">	&#125;</span></span><br><span class="line"><span class="javascript">	xmlhttp.onreadystatechange=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span></span></span><br><span class="line"><span class="undefined">	&#123;</span></span><br><span class="line"><span class="javascript">		<span class="keyword">if</span> (xmlhttp.readyState==<span class="number">4</span> &amp;&amp; xmlhttp.status==<span class="number">200</span>)</span></span><br><span class="line"><span class="undefined">		&#123;</span></span><br><span class="line"><span class="javascript">			<span class="built_in">document</span>.getElementById(<span class="string">"myDiv"</span>).innerHTML=xmlhttp.responseText;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined">	&#125;</span></span><br><span class="line"><span class="javascript">	xmlhttp.open(<span class="string">"GET"</span>,<span class="string">"/try/ajax/ajax_info.txt"</span>,<span class="literal">true</span>);</span></span><br><span class="line"><span class="undefined">	xmlhttp.send();</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"myDiv"</span>&gt;</span><span class="tag">&lt;<span class="name">h2</span>&gt;</span>使用 AJAX 修改该文本内容<span class="tag">&lt;/<span class="name">h2</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"loadXMLDoc()"</span>&gt;</span>修改内容<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="2017-9-15"><a href="#2017-9-15" class="headerlink" title="2017.9.15"></a>2017.9.15</h2><h3 id="for-in-循环-for-of-循环"><a href="#for-in-循环-for-of-循环" class="headerlink" title="for in 循环/for of 循环"></a>for in 循环/for of 循环</h3><p>for in 循环是 ES5标准，for of 是 ES6 标准</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">'a'</span>,<span class="string">'b'</span>];</span><br><span class="line"><span class="keyword">for</span> (a <span class="keyword">in</span> arr)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a);			<span class="comment">//0,1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (a <span class="keyword">of</span> arr)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a);			<span class="comment">//a,b</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>关于本知识点有个面试题是这样的：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> scores = [<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>];</span><br><span class="line"><span class="keyword">var</span> total = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> score <span class="keyword">in</span> scores)&#123;</span><br><span class="line">    total += score;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> mean = total / scores.length;</span><br><span class="line"><span class="built_in">console</span>.log(mean);</span><br></pre></td></tr></table></figure>
<p>那么这个<code>mean</code>值是什么？</p>
<p>11？1？都不对。答案是 4。解释是 <strong>for in 循环循环的值永远是键名key，而 key 是一个字符串</strong>。所以 total 的值是：‘0012’。它是字符串，但进行数序运算时他又自动转换为数值 12,然后$12\div3=4$ 。</p>
<p>这里涉及到几个 JavaScript 基础知识：</p>
<ol>
<li>for in 循环是循环对象的索引属性，key是一个字符串</li>
<li>数值类型和字符串相加，会自动转换成字符串</li>
<li>字符串除以数值类型，会先把字符串转为数值</li>
</ol>
<h2 id="2017-9-17"><a href="#2017-9-17" class="headerlink" title="2017.9.17"></a>2017.9.17</h2><h3 id="AJAX-向服务器发送请求"><a href="#AJAX-向服务器发送请求" class="headerlink" title="AJAX-向服务器发送请求"></a>AJAX-向服务器发送请求</h3><p>如需将请求发送到服务器，我们使用 XMLHttpRequest 对象的<code>open()</code>和<code>send()</code>方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xmlhttp.open(<span class="string">"GET"</span>,<span class="string">"ajax_info.txt"</span>,<span class="literal">true</span>);</span><br><span class="line">xmlhttp.send();</span><br></pre></td></tr></table></figure>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fjmb975e5gj20pg08ydgx.jpg" alt=""></p>
<p>当 <code>async = false</code> 时，JavaScript 会等到服务器响应就绪才继续执行。如果服务器繁忙或缓慢，应用程序会挂起或停止。但是对于一些小型的请求，也是可以的。这时请不要编写 <code>onreadystatechange()</code> 函数，而是把代码放到 <code>send()</code> 语句后面即可：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xmlhttp.open(<span class="string">"GET"</span>,<span class="string">"/try/ajax/ajax_info.txt"</span>,<span class="literal">false</span>);</span><br><span class="line">xmlhttp.send();</span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">"myDiv"</span>).innerHTML=xmlhttp.responseText;</span><br></pre></td></tr></table></figure>
<h4 id="onreadystatechange"><a href="#onreadystatechange" class="headerlink" title="onreadystatechange"></a>onreadystatechange</h4><p>当请求被发送到服务器时，我们需要执行一些基于响应的任务。而每当 xmlhttp.readyState 改变时就会触发本函数。</p>
<h4 id="使用回调函数"><a href="#使用回调函数" class="headerlink" title="使用回调函数"></a>使用回调函数</h4><p>如果网站上存在多个 AJAX 任务，那么应该为创建 XMLHttpRequest 对象编写一个标准函数，并为每个 AJAX 任务调用该函数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">var</span> xmlhttp;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadXMLDoc</span>(<span class="params">url,cfunc</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">window</span>.XMLHttpRequest)&#123;<span class="comment">// IE7+, Firefox, Chrome, Opera, Safari 代码</span></span><br><span class="line">    xmlhttp=<span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;<span class="comment">// IE6, IE5 代码</span></span><br><span class="line">    xmlhttp=<span class="keyword">new</span> ActiveXObject(<span class="string">"Microsoft.XMLHTTP"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  xmlhttp.onreadystatechange=cfunc;</span><br><span class="line">  xmlhttp.open(<span class="string">"GET"</span>,url,<span class="literal">true</span>);</span><br><span class="line">  xmlhttp.send();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  loadXMLDoc(<span class="string">"/try/ajax/ajax_info.txt"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (xmlhttp.readyState==<span class="number">4</span> &amp;&amp; xmlhttp.status==<span class="number">200</span>)&#123;</span><br><span class="line">      <span class="built_in">document</span>.getElementById(<span class="string">"myDiv"</span>).innerHTML=xmlhttp.responseText;</span><br><span class="line">    &#125;</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;div id=<span class="string">"myDiv"</span>&gt;<span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>使用 AJAX 修改文本内容<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;button type=<span class="string">"button"</span> onclick=<span class="string">"myFunction()"</span>&gt;修改内容&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;/</span>body&gt;</span><br><span class="line">&lt;<span class="regexp">/html&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="AJAX的请求与服务器语言的互动"><a href="#AJAX的请求与服务器语言的互动" class="headerlink" title="AJAX的请求与服务器语言的互动"></a>AJAX的请求与服务器语言的互动</h4><p>当请求发送到服务器后，服务器端语言 ASP 或 PHP 以及其他语言会去处理发送过来的请求并生成结果发送结果到浏览器上。</p>
<h4 id="AJAX发送请求获取-XML-文件并解析"><a href="#AJAX发送请求获取-XML-文件并解析" class="headerlink" title="AJAX发送请求获取 XML 文件并解析"></a>AJAX发送请求获取 XML 文件并解析</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">table,th,td &#123;</span></span><br><span class="line"><span class="undefined">  border : 1px solid black;</span></span><br><span class="line"><span class="undefined">  border-collapse: collapse;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">th,td &#123;</span></span><br><span class="line"><span class="undefined">  padding: 5px;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>XMLHttpRequest 对象<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"loadDoc()"</span>&gt;</span>获取我收藏的 CD<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">id</span>=<span class="string">"demo"</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="function"><span class="keyword">function</span> <span class="title">loadDoc</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> xhttp = <span class="keyword">new</span> XMLHttpRequest();</span></span><br><span class="line"><span class="javascript">  xhttp.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">if</span> (<span class="keyword">this</span>.readyState == <span class="number">4</span> &amp;&amp; <span class="keyword">this</span>.status == <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="javascript">      myFunction(<span class="keyword">this</span>);					<span class="comment">// this 在这里指的就是 xhttp</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="javascript">  xhttp.open(<span class="string">"GET"</span>, <span class="string">"cd_catalog.xml"</span>, <span class="literal">true</span>);</span></span><br><span class="line"><span class="undefined">  xhttp.send();</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="javascript"><span class="function"><span class="keyword">function</span> <span class="title">myFunction</span>(<span class="params">xml</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> i;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> xmlDoc = xml.responseXML;</span></span><br><span class="line"><span class="xml">  var table="<span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">th</span>&gt;</span>Artist<span class="tag">&lt;/<span class="name">th</span>&gt;</span><span class="tag">&lt;<span class="name">th</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">th</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span>";</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> x = xmlDoc.getElementsByTagName(<span class="string">"CD"</span>); <span class="comment">//所有标签名为CD的节点的数组</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt;x.length; i++) &#123;</span></span><br><span class="line"><span class="xml">    table += "<span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>" +</span></span><br><span class="line"><span class="javascript">    <span class="comment">//childNodes[0]是标签名为ARTIST节点数组种索引为0的节点下子节点数组中索引为0的节点（文本节点）</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">//nodeValue为文本节点的节点内容，就是文本本身</span></span></span><br><span class="line"><span class="javascript">    x[i].getElementsByTagName(<span class="string">"ARTIST"</span>)[<span class="number">0</span>].childNodes[<span class="number">0</span>].nodeValue +	</span></span><br><span class="line"><span class="xml">    "<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>" +</span></span><br><span class="line"><span class="javascript">    x[i].getElementsByTagName(<span class="string">"TITLE"</span>)[<span class="number">0</span>].childNodes[<span class="number">0</span>].nodeValue +</span></span><br><span class="line"><span class="xml">    "<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span>";</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="javascript">  <span class="built_in">document</span>.getElementById(<span class="string">"demo"</span>).innerHTML = table;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>上面这个例子中使用的 URL 地址实际上是一个名为 “<a href="http://www.runoob.com/try/demo_source/cd_catalog.xml" target="_blank" rel="noopener">cd_catalog.xml</a>“ XML 文件。</p>
<h3 id="HTTP的报文结构"><a href="#HTTP的报文结构" class="headerlink" title="HTTP的报文结构"></a>HTTP的报文结构</h3><p>请求报文：从客户向服务器发送请求报文</p>
<p>响应报文：从服务器到客户的回答</p>
<p>报文中的每一个字段都是一些 ASCII 码串。请求报文和响应报文都是由三部分组成——开始行、首部行、实体主题，两种报文的区别就来自于第一部分的不同。</p>
<p><img src="http://ww1.sinaimg.cn/large/7b6c9535gy1fjmcwhdd75j20hr06d3z0.jpg" alt=""></p>
<ol>
<li>开始行，用于区分是请求报文还是响应报文。在请求报文中的开始行叫做请求行（Request-Line），而在响应报文中的开始行叫做状态行（Status-Line）。在开始行的三个字段之间都以空格分隔开，最后的 <code>CR</code>和<code>LF</code>分别代表“回车”和“换行”</li>
<li>首部行，用来<strong>说明浏览器、服务器或报文主体的一些信息</strong>。首部可以有好几行，但也可以不使用。在每一个首部行中都有首部字段名和它的值，每一行在结束的地方都要有“回车”和“换行”。整个首部行结束时，还有一空行将首部行和后面的实体主体分开。</li>
<li>实体主体（entity body），在请求报文中一般都不用这个字段，而在响应报文中也可能没有这个字段</li>
</ol>
<h4 id="请求报文"><a href="#请求报文" class="headerlink" title="请求报文"></a>请求报文</h4><p>请求报文的第一行“请求行”只有三个内容，即<strong><em>方法、请求资源的 URL、以及 HTTP 的版本</em></strong>。这里的“方法”是指请求函数的不同。请求报文中常见的几个请求函数如下：</p>
<table>
<thead>
<tr>
<th style="text-align:center">方法（操作）</th>
<th style="text-align:center">意义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">OPTION</td>
<td style="text-align:center">请求一些选项的信息</td>
</tr>
<tr>
<td style="text-align:center">GET</td>
<td style="text-align:center">请求读取由 URL 所标志的信息</td>
</tr>
<tr>
<td style="text-align:center">HEAD</td>
<td style="text-align:center">请求读取由 URL 所标志的信息的首部</td>
</tr>
<tr>
<td style="text-align:center">POST</td>
<td style="text-align:center">给服务器添加信息（例如，注释）</td>
</tr>
<tr>
<td style="text-align:center">PUT</td>
<td style="text-align:center">在指明的 URL 下存储一个文档</td>
</tr>
<tr>
<td style="text-align:center">DELETE</td>
<td style="text-align:center">删除指明的 URL 所标志的资源</td>
</tr>
<tr>
<td style="text-align:center">TRACE</td>
<td style="text-align:center">用来进行环回测试的请求报文</td>
</tr>
<tr>
<td style="text-align:center">CONNECT</td>
<td style="text-align:center">用于代理服务器</td>
</tr>
</tbody>
</table>
<p>当我们浏览清华大学院系设置的页面时，HTTP 的请求报文的请求行是：</p>
<blockquote>
<p>GET <a href="http://www.tsinghua.edu.cn/chn/yxsz/index.htm" target="_blank" rel="noopener">http://www.tsinghua.edu.cn/chn/yxsz/index.htm</a> HTTP/1.1</p>
</blockquote>
<p>下面是这个请求报文的详细信息</p>
<blockquote>
<p>GET /chn/yxsz/index. htm HTTP/1.1 {请求行使用了相对 URL}</p>
<p>Host: www.tsinghua.edu.cn {此行是首部行的开始。这行给出主机的域名} </p>
<p>Connection: close {告诉服务器发送完请求的文档后就可释放连接}</p>
<p>User-Agent: Mozilla/5.0 {表明用户代理是使用Netscape浏览器}</p>
<p>Accept-Language : cn {表示用户希望优先得到中文版本的文档}</p>
<p>{请求报文的最后还有一个空行}</p>
</blockquote>
<p>在请求行使用了相对 URL（即省略了主机的域名）是因为下面的首部行（第2行）给出了主机的域名。第 3 行是告诉服务器不使用持续连接，表示浏览器希望服务器在传送完所 请求的对象后即关闭 TCP 连接。这个请求报文没有实体主体。</p>
<h5 id="不同请求函数的比较"><a href="#不同请求函数的比较" class="headerlink" title="不同请求函数的比较"></a>不同请求函数的比较</h5><ul>
<li>GET——最常见的一种请求方式，当客户端要从服务器中读取文档时，当点击网页上的链接或者通过在浏览器的地址栏输入网址来浏览网页的，使用的都是 GET 方式。GET 方法要求服务器将 URL 定位的资源放在响应报文的数据部分，回送给客户端。使用 GET 方法时，请求参数和对应的值附加在URL后面，利用一个问号（“?”）代表URL的结尾与请求参数的开始，传递参数长度受限制。同时，GET 方式的请求一般不包含实体主体内容，请求数据已通过在 URL 后添加字符串的方式添加到请求报文中。在 URL 后添加请求数据，各个数据之间用“&amp;”符号隔开。显然，这种方式不适合传送私密数据。虽然 HTTP 协议没有对传输的数据大小进行限制，HTTP 协议规范也没有对 URL 长度进行限制。但是由于浏览器和操作系统对 URL 字符的长度有所限制，所以我们可以认为添加到 URL 后面的请求数据也是有限的。所以如果需要传送大量数据的时候，也不适合使用 GET 方式。</li>
<li>POST——对于上面提到的不适合使用 GET 方式的情况，可以考虑使用 POST 方式，因为这时 POST 方法将请求参数封装在请求报文中的实体主体中，以名称/值的形式出现，可以传输大量数据，这样 POST 方式对传送的数据大小没有限制，而且也不会显示在URL中。各数据之间也是使用“&amp;”符号隔开。</li>
<li>HEAD——HEAD 就像 GET ，只不过服务端接受到 HEAD 请求后只返回响应头，而不会发送响应内容。当我们只需要查看某个页面的状态的时候，使用 HEAD 是非常高效的，因为在传输的过程中省去了页面内容。</li>
</ul>
<h4 id="响应报文"><a href="#响应报文" class="headerlink" title="响应报文"></a>响应报文</h4><p>每一个请求报文发出后，都能收到一个响应报文。响应报文的第一行就是状态行。状态行包括三项内容，即 HTTP 的版本，状态码，以及解释状态码的简单短语。状态码（Status-Code）都是三位数字的，分为5大类共33种（见RFC 2616)。例如， </p>
<blockquote>
<p>lxx——表示通知信息的，如请求收到了或正在进行处理。</p>
<p>2xx——表示成功，如接受或知道了。</p>
<p>3xx——表示重定向，如要完成请求还必须采取进一步的行动。</p>
<p>4xx——表示客户的差错，如请求中有错误的语法或不能完成</p>
<p>5xx——表示服务器的差错，如服务器失效无法完成请求。</p>
</blockquote>
<hr>
<blockquote>
<p>本文作者：刘志宇</p>
<p>版权声明：本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank" rel="noopener">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！</p>
</blockquote>
]]></content>
      
        <categories>
            
            <category> 学习日记 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 理解计算机 </tag>
            
            <tag> 计算机网络 </tag>
            
            <tag> Web前端 </tag>
            
            <tag> CSS </tag>
            
            <tag> HTML </tag>
            
            <tag> Git </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[RxJava 基础扫盲]]></title>
      <url>/2017/07/03/RxJava-%E5%9F%BA%E7%A1%80%E6%89%AB%E7%9B%B2/</url>
      <content type="html"><![CDATA[<p>前几天浏览了一下稀土 App，发现有个挺不错的新闻 App 实战实例。正好最近想学习一下<a href="https://github.com/onlyloveyd/JuheNews" target="_blank" rel="noopener">完整项目</a>的源码（特别是后台代码，就是各种框架等等）。然后想起以前很多大牛都谈起过 RxJava、Retrofit、Gson 等等框架，所以现在决定来学习学习这些常用的框架</p>
<a id="more"></a>
<hr>
<h2 id="RxJava-到底是什么"><a href="#RxJava-到底是什么" class="headerlink" title="RxJava 到底是什么"></a>RxJava 到底是什么</h2><p>一个词概括：<strong>异步</strong>。说到底它就是一个实现异步操作的库。那什么是异步操作，我之前在<a href="http://www.jianshu.com/p/e311df0f0e1c" target="_blank" rel="noopener">Android 消息传递机制</a>这篇博文中讲过 Android 是单线程模型。进程启动时，也就是 App 启动后默认就只有一个线程运行，而该线程就是我们说的主线程，也叫 UI 线程。顾名思义，UI 线程就是用来更新界面显示，而如果运行当中具有耗时操作如网络请求，数据库读写，文件下载等这些耗时操作都需要在其他线程当中去完成，完成之后再更新在 UI 界面中显示出来。这就是异步加载，而 Android 中我们有现成的方式去完成这一操作，如 AsyncTask 、Handler。那为什么还要用 RxJava？</p>
<h2 id="RxJava-好在哪里"><a href="#RxJava-好在哪里" class="headerlink" title="RxJava 好在哪里"></a>RxJava 好在哪里</h2><p>还是用一个词概括：<strong>简洁</strong>。异步操作很关键的一点是要注意程序的简洁性，因为在调度过程比较复杂的情况下，异步代码经常会既难写也难被读懂。 Android 创造的 AsyncTask 和 Handler ，其实都是为了让异步代码更加简洁。RxJava 的优势也是简洁，但它的简洁的与众不同之处在于，随着程序逻辑变得越来越复杂，它依然能够保持简洁。</p>
<p>假设有这样一个需求：界面上有一个自定义的视图 ImageCollectorView ，它的作用是显示多张图片，并能使用addImage(Bitmap)方法来任意增加显示的图片。现在需要程序将一个给出的目录数组folders中每个目录下的.png图片都加载出来并显示在 ImageCollectorView 中。需要注意的是，由于读取图片的这一过程较为耗时，需要放在后台执行，而图片的显示则必须在 UI 线程执行。常用的实现方式有多种，我这里贴出其中一种：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Thread()&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.run();</span><br><span class="line">    <span class="keyword">for</span>(File folder:folders)&#123;</span><br><span class="line">      File[] files = folder.listFiles();</span><br><span class="line">      <span class="keyword">for</span>(File file:files)&#123;</span><br><span class="line">        <span class="keyword">if</span>(file.getName().endsWith(<span class="string">".png"</span>))&#123;</span><br><span class="line">          <span class="keyword">final</span> Bitmap bitmap = getBitmapFromFile(file);</span><br><span class="line">          getActivity().runOnUiThread(<span class="keyword">new</span> Runnable()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">              mImageCollcetorView.addImage(bitmap);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;.start();</span><br></pre></td></tr></table></figure>
<p>而如果使用 RxJava，就可以写成：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Observable.from(folders)</span><br><span class="line">  .flatMap(<span class="keyword">new</span> Func1&lt;File,Observable&lt;File&gt;&gt;()&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Observable&lt;File&gt; <span class="title">call</span><span class="params">(File file)</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> Observable.from(file.listFiles());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  .filter(<span class="keyword">new</span> Func1&lt;File,Boolean&gt;()&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Boolean <span class="title">call</span><span class="params">(File file)</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> file.getName().endsWith(<span class="string">".png"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  .map(<span class="keyword">new</span> Func1&lt;File,Bitmap&gt;()&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Bitmap <span class="title">call</span><span class="params">(File file)</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> getBitmapFromFile(file);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  .subscribeOn(Schedulers.io())</span><br><span class="line">  .observeOn(AndroidSchedulers.mainThread())</span><br><span class="line">  .subscribe(<span class="keyword">new</span> Action1&lt;Bitmap&gt;()&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Bitmap bitmap)</span></span>&#123;</span><br><span class="line">      mImageCollectorView.addImage(bitmap);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></p>
<p>那看到这里有人可能说了这代码敲得更多了，哪来的简洁。注意，我们这里说的简洁指的是逻辑上的简洁，不是单纯的代码量少。观察一下你会发现， RxJava 的这个实现，是一条从上到下的链式调用，没有任何嵌套，这在逻辑的简洁性上是具有优势的。当需求变得复杂时，这种优势将更加明显。</p>
<h2 id="RxJava-原理与使用简析"><a href="#RxJava-原理与使用简析" class="headerlink" title="RxJava 原理与使用简析"></a>RxJava 原理与使用简析</h2><h4 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h4><p>RxJava 的异步实现是通过一种通用概念下的观察者模式来实现的。那么我们了解一下设计模式当中的观察者模式。</p>
<p>观察者模式面向的需求是：A 对象(观察者)对 B 对象(被观察者)的某种变化高度敏感，需要在 B 变化的一瞬间做出反应。举个例子，新闻里喜闻乐见的警察抓小偷，警察需要在小偷伸手作案的时候实施抓捕。在这个例子里，警察是观察者，小偷是被观察者，警察需要时刻盯着小偷的一举一动，才能保证不会漏过任何瞬间。程序的观察者模式和这种真正的『观察』略有不同，观察者不需要时刻盯着被观察者(例如 A 不需要每过 2ms 就检查一次 B 的状态)，而是采用注册(Register)或者称为订阅(subscribe)的方式，告诉被观察者：我需要你的某某状态，你要在它变化的时候通知我。 Android 开发中一个比较典型的例子是点击监听器 OnClickListener 。对设置 OnClickListener 来说， View 是被观察者， OnClickListener 是观察者，二者通过setOnClickListener()方法达成订阅关系。订阅之后用户点击按钮的瞬间，Android Framework 就会将点击事件发送给已经注册的 OnClickListener 。采取这样被动的观察方式，既省去了反复检索状态的资源消耗，也能够得到最高的反馈速度。</p>
<p>RxJava 作为一个工具库，使用的就是通用形式的观察者模式。它有四个基本概念：Observable(被观察者)、Observer(观察者)、subscribe(订阅)、事件。Observable 与 Observer 通过 subscribe 订阅这一动作联系在一起，从而使 Observable 可以在需要的时候发出事件来通知Observer。RxJava 的事件回调方法除了普通事件 onNext() 之外，还定义了两个特殊的事件 onCompleted() 和 onError()。这些方法具体内容如下：</p>
<ul>
<li>onCompleted()——事件队列完结。RxJava 不仅把每个事件单独处理，还会把他们看做一个队列。RxJava 规定如果队列处理完毕，需要回调此方法作为标志</li>
<li>onError()——事件队列异常。在事件处理过程中出现异常时，此方法会被回调，同时事件停止发出</li>
</ul>
<p>在一个正确运行的事件序列中， onCompleted() 和 onError() 有且只有一个，并且是事件序列中的最后一个。需要注意的是， onCompleted() 和 onError() 二者也是互斥的，即在队列中调用了其中一个，就不应该再调用另一个。</p>
<h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><h5 id="1-创建-Observer"><a href="#1-创建-Observer" class="headerlink" title="1.创建 Observer"></a>1.创建 Observer</h5><p>Observer 即观察者，它决定事件触发的时候将有怎样的行为。RxJava 中的 Observer 接口的实现方式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Observer&lt;String&gt; observer = <span class="keyword">new</span> Observer&lt;String&gt;()&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(String s)</span></span>&#123;</span><br><span class="line">    Log.d(TAG,<span class="string">"Item:"</span>+s);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Log.d(TAG,<span class="string">"Completed!"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span></span>&#123;</span><br><span class="line">    Log.d(TAG,<span class="string">"Error!"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其实 RxJava 中还有一个实现了 Observer 接口的抽象类 Subscriber。这两个类基本使用方式一样，而且在subscribe()时 Observer 对象先被转换成 Subscriber 对象再使用。但他们的区别对于使用者来说主要有两点：</p>
<ul>
<li>onStart()——这是 Subscriber 增加的方法。它会在subscribe()刚开始，而事件还未发送之前被调用，可以用于做一些准备工作，例如数据的清零或重置。这是一个可选方法，默认情况下它的实现为空。需要注意的是，如果对准备工作的线程有要求（例如弹出一个显示进度的对话框，这必须在主线程执行）， 该方法就不适用了，因为它总是在subscribe()所发生的线程被调用，而不能指定线程。要在指定的线程来做准备工作，可以使用doOnSubscribe()方法。</li>
<li>unsubscribe()——这是 Subscriber 所实现的另一个接口 Subscription 的方法，用于取消订阅。在这个方法被调用后，Subscriber 将不再接收事件。一般在这个方法调用前，可以使用isUnsubscribed()先判断一下状态。 unsubscribe()这个方法很重要，因为在subscribe()之后， Observable 会持有 Subscriber 的引用，这个引用如果不能及时被释放，将有内存泄露的风险。所以最好保持一个原则：要在不再使用的时候尽快在合适的地方（例如onPause()、onStop()等方法中）调用unsubscribe()来解除引用关系，以避免内存泄露的发生。</li>
</ul>
<h5 id="2-创建-Observable"><a href="#2-创建-Observable" class="headerlink" title="2.创建 Observable"></a>2.创建 Observable</h5><p>Observable 即被观察者，它决定什么时候触发事件以及触发怎样的事件。它有三种方法来创建一个 Observable，并为它定义事件触发规则</p>
<ul>
<li>create()</li>
</ul>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Observable observable = Observable.create(<span class="keyword">new</span> Observable.OnSubscribe&lt;String&gt;()&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Subscriber&lt;? <span class="keyword">super</span> String&gt; subscriber)</span></span>&#123;</span><br><span class="line">    subscriber.onNext(<span class="string">"Hello"</span>);</span><br><span class="line">    subscriber.onNext(<span class="string">"Hi"</span>);</span><br><span class="line">    subscriber.onNext(<span class="string">"Aloha"</span>);</span><br><span class="line">    subscriber.onCompleted();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>create()方法的参数 OnSubscribe 相当于一个计划表，当 Observable 被订阅时 OnSubscribe 的call()方法会被自动调用，事件序列就会依照设定依次触发(对于上面的代码，就是观察者 Subscriber 将会被调用三次onNext()和一次onCompleted())。这样，由被观察者调用了观察者的回调方法，就实现了由被观察者向观察者的事件传递，即观察者模式。</p>
<ul>
<li>just()</li>
</ul>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Observable observable = Observable.just(<span class="string">"Hello"</span>,<span class="string">"Hi"</span>,<span class="string">"Aloha"</span>);</span><br><span class="line"><span class="comment">//将会依次调用</span></span><br><span class="line"><span class="comment">//onNext("Hello");</span></span><br><span class="line"><span class="comment">//onNext("Hi");</span></span><br><span class="line"><span class="comment">//onNext("Aloha");</span></span><br><span class="line"><span class="comment">//onCompleted();</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>from(T[] t)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">String[] words = &#123;<span class="string">"Hello"</span>,<span class="string">"Hi"</span>,<span class="string">"Aloha"</span>&#125;;</span><br><span class="line">Observable observable = Observable.from(words);</span><br><span class="line"><span class="comment">//将会依次调用</span></span><br><span class="line"><span class="comment">//onNext("Hello");</span></span><br><span class="line"><span class="comment">//onNext("Hi");</span></span><br><span class="line"><span class="comment">//onNext("Aloha");</span></span><br><span class="line"><span class="comment">//onCompleted();</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="3-subscribe-订阅"><a href="#3-subscribe-订阅" class="headerlink" title="3.subscribe()订阅"></a>3.subscribe()订阅</h5><p>创建了 Observable 和 Observer 之后，再用subscribe()方法将它们联结起来，整条链子就可以工作了。代码形式很简单：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">observable.subscribe(observer);</span><br><span class="line"><span class="comment">//或者</span></span><br><span class="line">observable.subscribe(subscriber);</span><br></pre></td></tr></table></figure>
<p>我们再来关注一下subscribe()方法的内部实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Subscription <span class="title">subscribe</span><span class="params">(Subscriber subscriber)</span></span>&#123;</span><br><span class="line">  ......</span><br><span class="line">  subscriber.onStart();</span><br><span class="line">  onSubscriber.call(subscriber); <span class="comment">//事件发送逻辑开始运行</span></span><br><span class="line">  <span class="keyword">return</span> subscriber;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="4-线程控制"><a href="#4-线程控制" class="headerlink" title="4.线程控制"></a>4.线程控制</h5><p>在不指定线程的情况下， RxJava 遵循的是线程不变的原则，即：在哪个线程调用subscribe()，就在哪个线程生产事件；在哪个线程生产事件，就在哪个线程消费事件。如果需要切换线程，就需要用到 Scheduler (调度器)。</p>
<p>在 RxJava 中，Scheduler ——调度器，相当于线程控制器，RxJava 通过它来指定每一段代码应该运行在什么样的线程。RxJava 已经内置了几个 Scheduler ，它们已经适合大多数的使用场景：</p>
<ul>
<li>Schedulers.immediate()——直接在当前线程运行，相当于不指定线程。这是默认的情况。</li>
<li>Schedulers.newThread()——总是启用新线程，并在新线程执行操作。</li>
<li>Schedulers.io()——I/O 操作（读写文件、读写数据库、网络信息交互等）所使用的 Scheduler。行为模式和newThread()差不多，区别在于该方法的内部实现是是用一个无数量上限的线程池，可以重用空闲的线程，因此多数情况下该方法比newThread()更有效率。不要把计算工作放在该方法中，可以避免创建不必要的线程。</li>
<li>Schdeulers.computation()——计算所使用的 Scheduler。这个计算指的是 CPU 密集型计算，即不会被 I/O 等操作限制性能的操作，例如图形的计算。这个 Scheduler 使用的固定的线程池，大小为 CPU 核数。不要把 I/O 操作放在computation()中，否则 I/O 操作的等待时间会浪费 CPU。</li>
<li>AndroidSchedulers.mainThread()——它指定的操作将在 Android 主线程运行。</li>
</ul>
<p>有了这几个 Scheduler ，就可以使用subscribeOn()和observeOn()两个方法来对线程进行控制了。 subscribeOn()指定subscribe()所发生的线程，即 Observable.OnSubscribe 被激活时所处的线程。或者叫做事件产生的线程。 observeOn() 指定 Subscriber 所运行在的线程。或者叫做事件消费的线程。举个例子</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">  .subscribeOn(Schedulers.io())</span><br><span class="line">  .observeOn(AndroidSchedulers.mainThread())</span><br><span class="line">  .subscribe(<span class="keyword">new</span> Action&lt;Integer&gt;()&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Integer number)</span></span>&#123;</span><br><span class="line">      Log.d(TAG,<span class="string">"number:"</span>+number);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>
<p>上面这段代码中，由于<code>subscribeOn(Schedulers.io())</code>的指定，被创建的事件的内容 1、2、3、4 将会在 IO 线程发出；而由于<code>observeOn(AndroidScheculers.mainThread())</code>的指定，因此 subscriber 数字的打印将发生在主线程 。事实上，这种使用方式非常常见，它适用于多数的『后台线程取数据，主线程显示』的程序策略。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>对于 RxJava，我们应该记住两个关键字：异步、简洁。而 RxJava 还有一些比较重要的关键点需要理解，但本篇仅仅用于向初学者普及 RxJava 的一些简单原理和使用方法，更多内容大家可以查看<a href="http://gank.io/post/560e15be2dca930e00da1083" target="_blank" rel="noopener">给 Android 开发者的 RxJava 详解</a>。</p>
<blockquote>
<p>本文作者：刘志宇</p>
<p>版权声明：本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank" rel="noopener">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！</p>
</blockquote>
]]></content>
      
        <categories>
            
            <category> 学习总结 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 理解计算机 </tag>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[学习笔记(一)]]></title>
      <url>/2017/06/30/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(%E4%B8%80)/</url>
      <content type="html"><![CDATA[<p>本文章只是个人记录日常学习的笔记，将不定期更新</p>
<a id="more"></a>
<h2 id="2017-3-11"><a href="#2017-3-11" class="headerlink" title="2017.3.11"></a>2017.3.11</h2><p><img src="http://upload-images.jianshu.io/upload_images/2685420-bc5b5e4459782d52.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="学习总结"></p>
<h2 id="2017-3-14"><a href="#2017-3-14" class="headerlink" title="2017.3.14"></a>2017.3.14</h2><ol>
<li>Android 线程与进程</li>
<li>Android app 启动过程</li>
<li>Service 与耗时工作线程的区别</li>
<li>何时使用 Service，何时使用 Working Thread 即 UI 线程（主线程）开启耗时操作线程</li>
<li>Local Service 与 Remote Service</li>
<li>Service 的使用（实时温度显示客户端）</li>
</ol>
<h2 id="2017-3-16"><a href="#2017-3-16" class="headerlink" title="2017.3.16"></a>2017.3.16</h2><ol>
<li>Service 与 Activity交互</li>
<li>Service 开启线程后与 Activity 交互，注意线程之间的数据传递要么用 Handler 或者 AsyncTask 类</li>
<li>只能在 UI 主线程更新界面的真正含义（慕课网笔记）</li>
</ol>
<h2 id="2017-3-20"><a href="#2017-3-20" class="headerlink" title="2017.3.20"></a>2017.3.20</h2><ol>
<li>ArrayBlockingQueue 是阻塞队列且线程安全</li>
<li>线程池的使用</li>
</ol>
<h2 id="2017-3-21"><a href="#2017-3-21" class="headerlink" title="2017.3.21"></a>2017.3.21</h2><ol>
<li>HandlerThread 与 Handler 的关系</li>
<li>Handler , Looper , MessageQueue 与线程的关系</li>
</ol>
<h2 id="2017-3-22"><a href="#2017-3-22" class="headerlink" title="2017.3.22"></a>2017.3.22</h2><p>知乎 live 总结</p>
<ol>
<li>要有兴趣学安卓</li>
<li>边学边实践项目，加深印象</li>
<li>需要用什么就学什么</li>
<li>巩固计算机基础知识，如操作系统、计算机网络、熟练掌握两三门编程语言</li>
<li>关注新兴技术，比如人工智能</li>
</ol>
<h2 id="2017-3-25"><a href="#2017-3-25" class="headerlink" title="2017.3.25"></a>2017.3.25</h2><ol>
<li>一次只有一个进程可以在一个处理器核心上运行</li>
<li>单线程模型：一个进程是一个只能进行单个执行线程的程序</li>
<li>“超线程”（Hyperthreading Technology）技术就是通过采用特殊的硬件指令，可以把<strong>一个物理内核</strong>模拟成<strong>两个逻辑内核</strong>，在单处理器中实现<strong>线程级</strong>的<strong>并行计算</strong>，同时在相应的软硬件的支持下大幅度提高运行效能，从而实现在单处理器上模拟双处理器的效能。其实，从实质上说，超线程是一种可以将 CPU 内部暂时闲置处理资源充分“调动”起来的技术。虽然采用超线程技术能同时执行两个线程，但它并不象两个真正的 CPU 那样，每个 CPU 都具有独立的资源。当两个线程都同时需要某一个资源时，其中一个要暂时停止，并让出资源，直到这些资源闲置后才能继续。<strong>因此超线程的性能并不等于两颗 CPU 的性能</strong></li>
<li>一个应用程序通常是作为一个具有多个控制线程的独立进程实现的</li>
<li>多进程的优点之一就是能够充分使用多处理器体系结构，以便每个进程能并行运行在不同的处理器上。而使用多线程加强了并发功能（在不谈论 Intel 的超线程技术）</li>
<li>数据结构是一堆数据元素和这些数据元素之间关系的总和，数据元素是数据的基本单位</li>
<li>按关系或结构分。数据结构可归结为以下4类：集合结构、线性结构、树形结构和图状结构</li>
</ol>
<h2 id="2017-4-8"><a href="#2017-4-8" class="headerlink" title="2017.4.8"></a>2017.4.8</h2><ol>
<li>内存可以看作是所有小房间连续线性排列而组成的大房子</li>
<li>为了标识大房子中的某一个小房子，我们给所有小房子编号，这就是内存地址，或者叫指针。指针就是特别指向了某一个小房子以方便找出房子里存储的货物（数据）。指针本质就是内存空间地址</li>
<li>而新建一个以链表为存储结构的线性表，如 List a；“a”所代表的含义其实就是这个链表的头指针，指向链表的第一个数据单元结点</li>
</ol>
<h2 id="2017-4-10"><a href="#2017-4-10" class="headerlink" title="2017.4.10"></a>2017.4.10</h2><h3 id="模块化设计"><a href="#模块化设计" class="headerlink" title="模块化设计"></a>模块化设计</h3><p>根据模块化程序设计思想，采用分解法把问题分解为多个相对独立的子问题，每个子问题对应程序的一个功能模块</p>
<h3 id="C语言程序文件结构"><a href="#C语言程序文件结构" class="headerlink" title="C语言程序文件结构"></a>C语言程序文件结构</h3><p>一个源程序文件一般定义多个函数解决复杂问题。一个C程序由一个或多个源程序文件组成。</p>
<h3 id="C语言参数传递"><a href="#C语言参数传递" class="headerlink" title="C语言参数传递"></a>C语言参数传递</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> x=<span class="number">10</span>,y=<span class="number">100</span>;</span><br><span class="line">swap(x,y);</span><br></pre></td></tr></table></figure>
<p>按照C语言的参数传递规则，实参变量x和y的值分别被“单向传递”给形参变量a和b。数组元素作为函数参数，这种情况下与简单变量作为函数的参数完全一样，数组元素的值被单向传递给形参变量。另一种情况是数组名作为函数的参数，此时作为实参的数组名讲其存储的数组的首地址单向传递给作为形参的数组名。所以第二种情况下实参数组名和形参数组名中存放相同的地址，实际上实参数组名和形参数组名代表的是同一个数组。这样，如果在被调函数中通过形参数组名去改变数组元素，则程序流程返回主调函数后，实参数组名对应的数组内容也随之变化</p>
<h3 id="单个C语言源程序文件的全局变量"><a href="#单个C语言源程序文件的全局变量" class="headerlink" title="单个C语言源程序文件的全局变量"></a>单个C语言源程序文件的全局变量</h3><p>由于C语言是以源程序文件为单位进行编译的，所以在一个源程序文件中定义的全局变量，默认情况下不能在其他源程序文件中使用</p>
<h3 id="内存空间分类"><a href="#内存空间分类" class="headerlink" title="内存空间分类"></a>内存空间分类</h3><p>C 语言中，供用户程序运行使用的内存空间分为3个部分：程序区、静态存储区、动态存储区</p>
<p>程序区：存放可执行的程序指令</p>
<p>静态存储区：存放程序运行期间占用固定内存单元的变量，比如全局变量、静态局部变量等</p>
<p>动态存储区：存放程序运行期间根据需要动态分配存储单元的变量，比如非static的局部变量、函数的形参等</p>
<h3 id="局部变量"><a href="#局部变量" class="headerlink" title="局部变量"></a>局部变量</h3><p>局部变量的存储类别有自动、静态、寄存器。全局变量的存储类别有外部和静态。外部全局变量(外部函数)允许其他源程序文件直接使用。而静态全局变量(内部函数)只允许在本源程序文件中使用</p>
<h3 id="内存原貌"><a href="#内存原貌" class="headerlink" title="内存原貌"></a>内存原貌</h3><p>数据在程序的运行过程中存储在计算机内存中，而内存是以字节为基本存储单元的连续存储空间。为了能够标识内存中不同的存储单元，每个存储单元都有一个编号，这个编号就是内存单元的“地址”。每个变量的值存储在内存空间中，通过变量名访问变量的值，这就是“按名访问”。“直接访问”是通过存储单元的地址读取其中的值。变量名在编译器中会与实际内存地址关联</p>
<h3 id="什么是指针变量"><a href="#什么是指针变量" class="headerlink" title="什么是指针变量"></a>什么是指针变量</h3><p>一个变量的内存地址称为该变量的“指针”。如果把一个变量的指针(地址)存放到另一个变量中，则存放指针的变量称为“指针变量”。其中指向结构体类型数据的指针变量称为结构体指针变量，他存放结构体变量的起始地址。</p>
<hr>
<h2 id="2017-4-23"><a href="#2017-4-23" class="headerlink" title="2017.4.23"></a>2017.4.23</h2><ol>
<li>带参数的宏的定义：一切都要括号，指整个值要括号，参数出现的每个地方都要括号</li>
</ol>
<h2 id="2017-4-24"><a href="#2017-4-24" class="headerlink" title="2017.4.24"></a>2017.4.24</h2><p><img src="http://upload-images.jianshu.io/upload_images/2685420-4816c6a52c505d7d.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="子网划分"></p>
<ol>
<li>子网划分是某个网络内部的事情。在某个网络之外的视角下他是不具有子网的特点。只有当IP数据报传入到与该网络相连的路由器上时。该网络内部的子网划分就会将整个网络划分为若干个子网网络，每个子网络的标识就是由网络号和主机号重新组合形成的广义上的网络号。</li>
<li>由于子网划分是一个网络在内部的特性，所以某个网络的子网掩码是一定的。而为了节省地址资源，后来使用了变长子网掩码来根据实际情况在子网下再划分子网，所以一个网络下就存在多个子网掩码，这样可进一步提高IP地址资源的利用率。</li>
</ol>
<h2 id="2017-4-26"><a href="#2017-4-26" class="headerlink" title="2017.4.26"></a>2017.4.26</h2><p>1.内存中的堆栈：操作系统对于正在运行的进程会分配一个独立的内存空间，这个内存空间在逻辑上分为3个部分：代码区、静态数据区和动态数据区。其中动态数据区一般又分为“堆”与”栈”。“栈stack”和“堆heap”是两种不同的动态数据区。</p>
<ul>
<li>栈空间是由栈操作系统自动分配和释放，该部分主要用于存放函数的参数值、局部变量等。栈区的操作方式类似于数据结构中栈。</li>
<li>堆区空间一般由程序员分配和释放，如 C 语言中的<code>malloc</code>函数申请的空间就是堆空间。</li>
<li>静态数据区：全局变量和静态变量都存放于该区。初始化的全局变量和初始化的静态变量放在一块区域，未初始化的全局变量和未初始化的静态变量放在相邻的另一区域。程序结束后由系统自动释放。</li>
<li>代码区：该区用于存放函数体的二进制代码。</li>
</ul>
<p>2.数据结构的堆栈：数据结构意义上的”栈“是逻辑概念，具有后进先出的特点。而数据结构意义上的“堆”是一种树形结构，其满足树中任一非叶结点的关键字均不大于或不小于其左右子树的结点的关键字。</p>
<h2 id="2017-4-27"><a href="#2017-4-27" class="headerlink" title="2017.4.27"></a>2017.4.27</h2><ol>
<li>Android 作为一个移动设备平台，其软件层次结构包括操作系统、各种库和 Android 运行环境、应用程序框架和应用程序。</li>
<li>Android 运行环境主要指虚拟机技术—— Dalvik 虚拟机。Dalvik 虚拟机和一般 Java 虚拟机不同，他执行的不是 Java 标准的字节码而是 Dalvik 可执行格式（.dex）中执行文件。他们两者最大不同就是 Java 虚拟机是基于栈的虚拟机，而 Dalvik 是基于寄存器的虚拟机。</li>
<li><strong>Android 的应用程序框架这一层级</strong>为应用程序的开发者提供 APIs。就是我们常说的 Android 四大组件 Activity、Broadcast Receiver、Service、Content Provider。</li>
<li>XML 只是一种简单的数据存储语言，只用来存储数据，而 HTML 是用来表现数据的。</li>
<li>多种编程语言都支持获取 XML 文档。</li>
<li>CSS 技术是 Web 网页技术的重要组成，页面通过 CSS 的修饰可以实现用户需要的显示效果。</li>
<li>JavaScript 是一种脚本技术，页面通过脚本程序可以实现用户数据的传输和动态交互。</li>
</ol>
<h2 id="2017-4-28"><a href="#2017-4-28" class="headerlink" title="2017.4.28"></a>2017.4.28</h2><h3 id="socket"><a href="#socket" class="headerlink" title="socket"></a>socket</h3><p>Socket 是支持 TCP/IP 协议的网络通信基本操作单元，是操作系统为应用程序提供的一套针对 TCP 或 UDP 的编程接口。而类似 HttpURLConnection 、ftpClient 之类的类是基于 Socket 对应用层专属协议的封装。</p>
<h3 id="递归函数"><a href="#递归函数" class="headerlink" title="递归函数"></a>递归函数</h3><p>递归函数是一层一层调用函数的。而在计算机中函数调用是通过栈(stack)这种数据结构实现，每当调用一层函数，栈就会加一层栈帧，每当函数返回，栈就会减少一层栈帧。所以递归用的不好可能会导致栈溢出。或者运行时间特别长。递归调用过程必须在进行有限次后终止，这就必须在编写递归调用函数时进行条件控制</p>
<h3 id="尾递归"><a href="#尾递归" class="headerlink" title="尾递归"></a>尾递归</h3><p>尾递归：在函数返回时只调用自身。尾递归在执行过程中<strong>不需要回溯</strong>。因为尾递归把结果包含在一部分参数中。故每次调用实际上都是对参数的一个更新过程。</p>
<h2 id="2017-5-3"><a href="#2017-5-3" class="headerlink" title="2017.5.3"></a>2017.5.3</h2><ol>
<li>运输层的“端口”概念可以类比于一个机构的收发室，这个机构收发公文都由这个收发室负责。而运输层中具体的某一个端口号可以认为是收发室中负责机构中某一个部门（可以理解为进程）收发公文的工作人员。而且这个端口号（工作人员）不是一直固定负责具体某个部门收发公文的工作（工作时由某个进程占有，通信结束后解除占有），可以在空闲时也为其他部门工作。</li>
<li>每一个 TCP 连接只能连接两个端点，就是点对点通信。而这个“点”就是我们通常所说的套接字 socket 。但是“套接字”这个翻译非常不准确，我们可以讲 socket 理解为插座，而 TCP 逻辑连接实体化为普通电线。而   socket 本身的翻译就是“插座，接头”</li>
</ol>
<h2 id="2017-5-4"><a href="#2017-5-4" class="headerlink" title="2017.5.4"></a>2017.5.4</h2><ol>
<li><p>注意回调机制和监听器的设计模式</p>
</li>
<li><p>注意 Android 项目目录下的 drawable 和 mipmap 文件夹的不同</p>
</li>
<li><p>关于回调机制的理解：Java 是面向对象语言，一切万物皆对象。父类暴露一个接口，接口内有一个抽象方法。该抽象方法不在父类中实现，而是在其他继承这个接口的类中实现。为了就是父类的实例能够根据实际情况各自做出反应。比如Button、ImageButton等都具有可被点击的共性，但是被点击之后相关事件的处理是不同的，比如说我想点击的这个Button弹出一个消息提示，然而我希望我的ImageButton点击之后可以弹出一个Notifaction通知，这个时候回调方法的好处就体现出来了。通过暴露接口方法可以减少很多重复，代码更加优雅。Android 当中的各种监听器采取的设计模式也是回调机制，设计模式如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;</span><br><span class="line">  <span class="keyword">private</span> CallBack mCallBack;</span><br><span class="line">  <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">CallBack</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">work</span><span class="params">()</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCallBack</span><span class="params">(CallBack callBack)</span></span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.mCallBack=CallBack;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//调用回调接口对象中的方法</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doWork</span><span class="params">()</span></span>&#123;</span><br><span class="line">    mCallBack.work();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">B</span></span>&#123;</span><br><span class="line">  <span class="keyword">private</span> A a;</span><br><span class="line">  a.setCallBack(<span class="keyword">new</span> A.CallBack()&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">work</span><span class="params">()</span></span>&#123;</span><br><span class="line">      ......</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用对话框最好采用 DialogFragment ，因为 DialogFragment 具有完整的生命周期，方便管理。代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MapLayerDialog</span> <span class="keyword">extends</span> <span class="title">DialogFragment</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ImageButton btn_normal, btn_satellite;</span><br><span class="line"></span><br><span class="line">  	<span class="comment">//把它理解成监听者</span></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ChoiceListener</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">onMapLayerListener</span><span class="params">(<span class="keyword">int</span> view)</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> View <span class="title">onCreateView</span><span class="params">(LayoutInflater inflater, @Nullable ViewGroup container, Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        getDialog().requestWindowFeature(Window.FEATURE_NO_TITLE);</span><br><span class="line">        View view = inflater.inflate(R.layout.maplayer_choice_dialog, container);</span><br><span class="line">        btn_normal = (ImageButton) view.findViewById(R.id.NORMAL_layer);</span><br><span class="line">        btn_satellite = (ImageButton) view.findViewById(R.id.SATELLITE_layer);</span><br><span class="line"></span><br><span class="line">        btn_normal.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">                ChoiceListener listener= (ChoiceListener) getActivity();</span><br><span class="line">                listener.onMapLayerListener(R.id.NORMAL_layer);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        btn_satellite.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">                ChoiceListener listener= (ChoiceListener) getActivity();</span><br><span class="line">                listener.onMapLayerListener(R.id.SATELLITE_layer);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> view;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title">LocationSource</span>, <span class="title">AMapLocationListener</span>,<span class="title">MapLayerDialog</span>.<span class="title">ChoiceListener</span> </span>&#123;  <span class="comment">//把监听者的功能赋予 Activity</span></span><br><span class="line">    <span class="keyword">private</span> MapView mMapView;</span><br><span class="line">    <span class="keyword">private</span> AMap mAMap;</span><br><span class="line">    <span class="keyword">private</span> MyLocationStyle mMyLocationStyle;</span><br><span class="line">    OnLocationChangedListener mListener;</span><br><span class="line">    AMapLocationClient mLocationClient;</span><br><span class="line">    AMapLocationClientOption mLocationOption;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ImageButton mImageButton;</span><br><span class="line">    <span class="keyword">private</span> Context mContext;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) &#123;</span><br><span class="line">            getWindow().addFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        mContext=<span class="keyword">this</span>;</span><br><span class="line">        mMapView = (MapView) findViewById(mapView);</span><br><span class="line">        mMapView.onCreate(savedInstanceState);</span><br><span class="line"></span><br><span class="line">        mImageButton=(ImageButton)findViewById(R.id.choiceDialog);</span><br><span class="line">        mImageButton.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">                MapLayerDialog mapLayerDialog=<span class="keyword">new</span> MapLayerDialog();</span><br><span class="line">                mapLayerDialog.show(getFragmentManager(),<span class="string">"ChoiceMapLayer"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        init();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  	......</span><br><span class="line">    ......</span><br><span class="line">      </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onMapLayerListener</span><span class="params">(<span class="keyword">int</span> view)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (view)&#123;</span><br><span class="line">            <span class="keyword">case</span> R.id.NORMAL_layer:mAMap.setMapType(AMap.MAP_TYPE_NORMAL);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.SATELLITE_layer:mAMap.setMapType(AMap.MAP_TYPE_SATELLITE);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="2017-5-11"><a href="#2017-5-11" class="headerlink" title="2017.5.11"></a>2017.5.11</h2><ol>
<li>Intent 是 Android 程序中各组件之间进行交互的一种重要方式，它不仅可以指明当前组件想要执行的动作，还可以在不同组件之间传递数据。 Intent 一般可被用于启动活动、启动服务、以及发送广播等场景</li>
</ol>
<h2 id="2017-5-14"><a href="#2017-5-14" class="headerlink" title="2017.5.14"></a>2017.5.14</h2><ol>
<li>抽象类是对整个类整体进行抽象，包括属性、行为，但是接口却是对类局部（行为）进行抽象。</li>
<li>如何保证Service不被杀死或被kill之后自动重启：利用系统广播(Intent.ACTION_TIME_TICK)每隔一分钟检测一次Service的运行状态。</li>
</ol>
<h2 id="2017-6-10"><a href="#2017-6-10" class="headerlink" title="2017.6.10"></a>2017.6.10</h2><ol>
<li>当应用继承 ContentProvider 类，并重写该类用于提供数据和存储数据的方法，就可以向其他应用共享其数据。虽然使用其他方法也可以对外共享数据，但数据访问方式会因数据存储的方式而不同，如：采用文件方式对外共享数据，需要进行文件操作读写数据；采用 SharedPreferences 共享数据，需要使用 SharedPreferences API 读写数据。而使用 ContentProvider 共享数据的好处是统一了数据访问方式。‍‍</li>
<li>服务不能自己运行，需要通过调用 Context.startService() 或者 Context.bindService() 方法启动服务。这两个方法都可以启动 Service，但是它们的使用场合有所不同。使用 startService() 方法启用服务，调用者与服务之间没有关连，即使调用者退出了，服务仍然运行。使用 bindService() 方法启用服务，调用者与服务绑定在了一起，调用者一旦退出，服务也就终止，大有“不求同时生，必须同时死”的特点。</li>
</ol>
<h2 id="2017-6-11"><a href="#2017-6-11" class="headerlink" title="2017.6.11"></a>2017.6.11</h2><ol>
<li>Android 的官方建议应用程序的开发采用MVC 模式。MVC 是 Model,View,Controller 的缩写，MVC 包含三个部分：<ul>
<li>模型层（model）：对数据库的操作、对网络等的操作都应该在model里面处理，当然对业务计算等操作也是必须放在的该层的。</li>
<li>视图层（view）：是应用程序中负责生成用户界面的部分。也是在整个mvc架构中用户唯一可以看到的一层，接收用户的输入，显示处理结果。</li>
<li>控制层（controller）：是根据用户的输入，控制用户界面数据显示及更新model对象状态的部分，控制器更重要的一种导航功能，响应用户出发的相关事件，交给模型层处理。</li>
</ul>
</li>
<li><p>Service 和 Thread 的区别？<br>答：Service 是系统的组件，它由系统进程托管（ServiceManager）；它们之间的通信类似于 Client 和 Server，是一种轻量级的IPC 通信，这种通信的载体是 Binder ，它是在 Linux 层交换信息的一种 IPC 机制。而 Thread 是由本应用程序托管。</p>
<ul>
<li>Thread：Thread 是程序执行的最小单元，它是分配 CPU 的基本单位。可以用 Thread 来执行一些异步的操作。</li>
<li>Service：Service 是 Android 的一种机制，当它运行的时候如果是 Local Service，那么对应的 Service 是运行在主进程的 main 线程上的。如：<code>onCreate</code>，<code>onStart</code>这些函数在被系统调用的时候都是在主进程的 main 线程上运行的。如果是 Remote Service，那么对应的 Service 则是运行在独立进程的 main 线程上。</li>
</ul>
<p>既然这样，那么我们为什么要用 Service 呢？其实这跟 Android 的系统机制有关，我们先拿 Thread 来说。Thread 的运行是独立于 Activity 的，也就是说当一个 Activity 被杀掉之后，如果你没有主动停止 Thread 或者 Thread 里的<code>run</code>方法没有执行完毕的话，Thread 也会一直执行。因此这里会出现一个问题：当 Activity 被杀掉之后，你不再持有该 Thread 的引用。另一方面，你没有办法在不同的 Activity 中对同一 Thread 进行控制。<br>举个例子：如果你的 Thread 需要不停地隔一段时间就要连接服务器做某种同步的话，该 Thread 需要在 Activity 没有创建并运行的时候也在运行。这个时候当你创建一个 Activity 就没有办法在该 Activity 里面控制之前创建的 Thread。因此你便需要创建并启动一个 Service ，在 Service 里面创建、运行并控制该 Thread，这样便解决了该问题（因为任何 Activity 都可以控制同一 Service，而系统也只会创建一个对应 Service 的实例）。</p>
</li>
</ol>
<h2 id="2017-6-12"><a href="#2017-6-12" class="headerlink" title="2017.6.12"></a>2017.6.12</h2><ol>
<li>如果后台的Activity由于某原因被系统回收了，如何在被系统回收之前保存当前状态？<br>答：重写 onSaveInstanceState() 方法，在此方法中保存需要保存的数据，该方法将会在 Activity 被回收之前调用。通过重写onRestoreInstanceState() 方法可以从中提取保存好的数据</li>
<li>如何退出Activity？如何安全退出已调用多个 Activity 的 Application ？<ul>
<li>单个 Activity：<ul>
<li>finish()</li>
<li>System.exit()</li>
</ul>
</li>
<li>多个 Activity：<ul>
<li>抛异常强制退出：该方法通过抛异常，使程序 Force Close。方法可行。但是需要解决的问题是，如何使程序结束掉，而不弹出 Force Close 的窗口</li>
<li>记录打开的 Activity：每打开一个 Activity，就记录下来。在需要退出时，关闭每一个 Activity 即可。</li>
<li>发送特定广播：在需要结束应用时，发送一个特定的广播，每个 Activity 收到广播后，关闭即可</li>
<li>递归退出：在打开新的 Activity 时使用<code>startActivityForResult()</code>，然后自己加标志，在<code>onActivityResult()</code>中处理，递归关闭</li>
<li>Activity 基类：让所有 Activity 继承这个基类，基类中定义一个方法解决这个关闭各个 Activity 的共同问题</li>
</ul>
</li>
</ul>
</li>
<li>请解释下Android程序运行时权限与文件系统权限的区别。<ul>
<li>运行时权限 Dalvik ( Android 授权) </li>
<li>文件系统 Linux 内核授权</li>
</ul>
</li>
</ol>
<ol>
<li>Android dvm 的进程和 Linux 的进程, 应用程序的进程是否为同一个概念<br>答：DVM 指 dalivk 的虚拟机。每一个 Android 应用程序都在它自己的进程中运行，都拥有一个独立的 Dalvik 虚拟机实例。而每一个 DVM 都是在 Linux 中的一个进程，所以说可以认为是同一个概念。</li>
</ol>
<h2 id="2017-6-17"><a href="#2017-6-17" class="headerlink" title="2017.6.17"></a>2017.6.17</h2><p>###浏览器概述</p>
<p>浏览器之所以能够工作，它的核心是一个叫做「内核」的东西，这个内核就类似于汽车的引擎，没有它浏览器是没法工作的，而市面上的内核有很多种，比如：KHTML、Presto、Trident、WebKit 等，大家熟知的浏览器如 Firefox、IE、Opera、Chrome、Safari 等所用的内核都不一样，而 Chrome 和 Safari 浏览器所用的内核是一样的，叫做「WebKit」，WebKit 其实是苹果基于开源的内核 KHTML 来改造的，也是开源的。而内核其实又分为两部分：渲染引擎和 js 引擎。渲染引擎主要就是负责获取网页的 html、xml、图片、css 等内容进行渲染显示，js 引擎则负责解析 javascript 语言，实现网页的动态效果。Chrome 虽然也是基于 WebKit 内核的，但是 Google 一开始觉得 WebKit 自带的 js 引擎性能上有问题，所以 Google 专门为 Chrome 搞了个 js 引擎叫做「V8」，所以在内核方面，Chrome 和 Safari 的主要区别就在于 js 引擎不一样。</p>
<h3 id="TCP主要过程"><a href="#TCP主要过程" class="headerlink" title="TCP主要过程"></a>TCP主要过程</h3><p>TCP 是面向连接的协议。那么采用 TCP 协议的运输层的连接的建立和释放是每一次面向连接的通信中不可少的过程。因此运输层连接包含了连接建立、数据传送、连接释放。</p>
<h3 id="三次握手、四次挥手"><a href="#三次握手、四次挥手" class="headerlink" title="三次握手、四次挥手"></a>三次握手、四次挥手</h3><p>运输层的连接建立过程也可称作<strong>三次握手</strong></p>
<p><img src="http://upload-images.jianshu.io/upload_images/2685420-417fd9462b2680ca.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="用三次握手建立TCP连接"></p>
<ol>
<li><p>第一次握手：A 主动向 B 发出建立连接的请求</p>
</li>
<li><p>第二次握手：B 向 A 发出确认建立连接的请求</p>
</li>
<li><p>第三次握手：A 向 B 发出确认</p>
</li>
</ol>
<p>至于为什么连接建立后客户进程 A 还要发送一次确认报文。这主要是为了防止已失效(已失效：滞留在网络中而后才到达B）的连接请求报文段突然又传到了服务进程 B 中而产生错误。</p>
<p>运输层的连接释放过程也称作<strong>四次挥手</strong></p>
<p><img src="http://upload-images.jianshu.io/upload_images/2685420-5a8c2b5ab3405db7.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="连接释放的过程"></p>
<ol>
<li>第一次握手：A 主动向 B 发出释放连接的请求</li>
<li>第二次握手：B 向 A 发出确认释放连接的请求</li>
<li>第三次握手：B 主动向 A 发出释放连接的请求</li>
<li>第四次握手：A 向 B 发出确认释放连接的请求</li>
</ol>
<p>经过四次握手过程，TCP 连接还没有释放掉。必须经过时间等待计时器设置的时间 2MSL 后客户进程 A 才进入 CLOSED 状态。而 B 只要收到了 A 发过来的确认就立即进入 CLOSED 状态。因此 B 结束 TCP 连接的时间要比 A 早一些。当然服务进程也会有一个保活计时器来探测客户端是否有响应。至于为什么是两倍的 MSL 时间是保证 A 发送的最后一个报文段能够到达 B 。</p>
<h2 id="2017-6-20"><a href="#2017-6-20" class="headerlink" title="2017.6.20"></a>2017.6.20</h2><ol>
<li>RecyclerView 是 Android 5.0 系统官方推出的一个代替 ListView 的组件，ListView 和 RecycleView 的原理大致相同，如下图。<br><img src="http://upload-images.jianshu.io/upload_images/2685420-620f85687b360d35.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1080/q/50" alt="原理示意图"><br>都是在内部维护一个缓存池，回收划出列表的 item，添加给将要进入列表的 item。只不过 ListView 内部是两级缓存，分别是<code>mActiveViews</code>和<code>mScrapViews</code>。而 RecycleView 内部有四级缓存。</li>
</ol>
<h2 id="2017-6-25"><a href="#2017-6-25" class="headerlink" title="2017.6.25"></a>2017.6.25</h2><ol>
<li>应用层协议与网络应用并不是同一个概念。应用层协议只是网络应用的一部分。例如，万维网应用是一种基于客户-服务器体系结构的网络应用。万维网应用包含很多部件，有万维网浏览器、万维网服务器、万维网文档的格式标准，以及一个应用层协议。万维网的应用层协议是 HTTP，它定义了在万维网浏览器和万维网服务器之间传送的报文类型、格式和序列等规则，而万维网浏览器如何显示一个万维网页面，万维网服务器是用多线程还是多进程来实现并不是 HTTP 定义的内容</li>
<li>许多应用层软件经常直接使用域名系统 DNS。虽然计算机的用户只是间接而不是直接使用域名系统，但 DNS 却为因特网的各种网络应用提高了核心服务</li>
<li>因特网的域名系统 DNS 被设计成为一个联机分布式数据库系统，并采用客户-服务器方式。</li>
</ol>
<h2 id="2017-6-30"><a href="#2017-6-30" class="headerlink" title="2017.6.30"></a>2017.6.30</h2><ol>
<li>设计模式原则：修改原有代码就说明解耦性太低。其次依赖倒转原则是让程序实体运行类都依赖抽象类，而不是实体运行类互相依赖。注意解耦！</li>
<li>设计模式——观察者模式：观察者模式又叫做发布-订阅(Publish/Subsrcibe)模式。它定义了一种一对多的依赖关系，让多个观察者对象同时监听某一个主体对象。这个主题对象在状态发生变化时，会通知所有观察者对象，使它们能够 自动更新自己。<img src="https://ooo.0o0.ooo/2017/06/30/5955c6c8ab56a.jpg" alt="观察者模式结构图"></li>
</ol>
<h2 id="2017-7-1"><a href="#2017-7-1" class="headerlink" title="2017.7.1"></a>2017.7.1</h2><ol>
<li>响应式编程：响应式编程是一种面向数据流和变化传播的编程范式。这意味着可以在编程语言中很方便地表达静态或动态的数据流，而相关的计算模型会自动将变化的值通过数据流进行传播。例如，在命令式编程环境中，<code>a=b+c</code>表示将表达式的结果赋给<code>a</code>，而之后改变<code>b</code>或<code>c</code>的值不会影响<code>a</code>。但在响应式编程中，<code>a</code>的值会随着<code>b</code>或<code>c</code>的更新而更新。电子表格程序就是响应式编程的一个例子。单元格可以包含字面值或类似<code>=B1+C1</code>的公式，而包含公式的单元格的值会依据其他单元格的值的变化而变化。响应式编程最初是为了简化交互式用户界面的创建和实时系统动画的绘制而提出来的一种方法，但它本质上是一种通用的编程范式。</li>
</ol>
<h2 id="2017-7-2"><a href="#2017-7-2" class="headerlink" title="2017.7.2"></a>2017.7.2</h2><ol>
<li>从理论上来讲，可以让每一级的域名都有一个相对应的域名服务器，使所有的域名服务器构成树状结构。但这样做会使域名服务器的数量太多，使域名系统的运行效率降低。因此 DNS 就采用划分区的办法来解决这个问题。一个服务器所负责管辖的范围叫做<strong>区</strong>。各单位根据具体情况来划分自己管辖范围的区。但在一个区中的所有节点必须是能够连通的。每一个区设置相应的<strong>权限域名服务器</strong>，用来保存该区中所有主机的域名到 IP 地址的映射。因此 DNS 服务器的管辖范围是以”区“为单位的。</li>
<li>因特网上的 DNS 域名服务器也是按照层次安排的。每一个域名服务器都只对域名体系中的一部分进行管辖</li>
<li>根名服务器：根域名服务器是最高层次的域名服务器。所有的根域名服务器都知道所有的顶级域名服务器的域名和 IP 地址。因特网上任何一个域名的解析，只要在本地服务器无法解析，就首先要求助于根域名服务器。因此根域名服务器的工作情况对整个 DNS 系统的工作至关重要。同时在许多情况下，根域名服务器并不直接把待查询的域名直接转换成 IP 地址，而是告诉本地域名服务器下一步应当找哪一个顶级域名服务器进行查询</li>
<li>顶级域名服务器：这些域名服务器负责在该顶级域名服务器注册的所有二级域名</li>
<li>本地域名服务器：本地域名服务器并不属于域名服务器层级结构中。当一个主机发出 DNS 查询请求时，这个查询请求报文就发送给本地域名服务器。每一个因特网服务提供者 ISP ，或一个大学，甚至一个大学里的系，都可以拥有一个本地域名服务器，这种域名服务器有时也称为默认域名服务器。本地域名服务器离用户较近，一般不超过几个路由器的距离。当所要查询的主机也属于同一个本地 ISP 时，该本地域名服务器立即就能将所查询的主机名转换为它的 IP 地址，而不需要再去询问其他的域名服务器</li>
<li>文件传送协议 FTP 只提供文件传送的一些基本服务，它使用了 TCP 可靠的运输服务。FTP 的主要功能是减少或消除在不同操作系统下处理文件的不兼容性。FTP 使用C/S 模式，即客户服务器模式。一个 FTP 服务器进程可同时为多个客户进程提供服务。FTP 的服务器进程有两大部分组成：一个主进程，负责接受新的请求；另外有若干个从属进程，负责处理单个请求。从属进程对客户进程的请求处理完毕后即终止，但从属进程在运行期间根据需要还可能创建其他一些子进程。FTP 的工作情况如图所示，图中的服务器端有两个从属进程：控制进程和数据传送进程。客户端除控制进程和数据传送进程还有一个用户界面进程。文件进行传输时 FTP 的客户和服务器之间要建立两个并行的 TCP 连接：控制连接和数据连接。<img src="https://ooo.0o0.ooo/2017/07/02/5958ae6f05644.jpg" alt="FTP两个并行连接"></li>
<li>万维网 WWW 并非某种特殊的计算机网络。万维网是一个大规模的、联机式的信息储藏所，英文简称为 Web。万维网用链接的方法能非常方便地从因特网上一个站点访问另一个站点。</li>
<li>万维网是一个分布式的超媒体系统，它是超文本系统的扩充。所谓超文本是包含指向其他文档的链接的文本。超文本是万维网的基础。超媒体与超文本的区别是文档内容不同，超文本文档仅包含文本信息，而超媒体文档还包含其他表示方式的信息，如图形、图像、声音、动画，甚至活动视频图像。</li>
</ol>
<h2 id="2017-7-3"><a href="#2017-7-3" class="headerlink" title="2017.7.3"></a>2017.7.3</h2><ol>
<li><p>统一资源定位符 URL (Uniform Resource Locator)来标志万维网上的各种文档，并使每一个文档在整个因特网的范围内具有唯一的标识符 URL。URL 是与因特网相连的机器上的任何可访问对象的一个指针。URL 的一般形式由以下四个部分组成：</p>
<blockquote>
<p>&lt;协议&gt;://&lt;主机域名&gt;:&lt;端口&gt;/&lt;路径&gt;</p>
</blockquote>
</li>
<li><p>使用超文本传送协议 HTTP(HyperText Transfer Protocol)实现万维网上各种链接</p>
</li>
<li><p>万维网使用超文本标记语言 HTML(HyperText Markup Language)使得万维网网页的设计者可以很方便地用链接从本页面的某处链接到因特网上的任何一个万维网页面，并且能够在自己的主机屏幕上将这些页面显示出来。</p>
</li>
</ol>
<h2 id="2017-7-4"><a href="#2017-7-4" class="headerlink" title="2017.7.4"></a>2017.7.4</h2><ol>
<li><p>应用需要因特网的支持，但这些应用又不能直接使用已经标准化的因特网协议，那么我们应当了解一下<strong>系统调用</strong>和<strong>应用编程接口</strong></p>
</li>
<li><p>大多数操作系统使用系统调用的机制在应用程序和操作系统之间传递控制权。</p>
</li>
<li><p>当某个应用进程启动系统调用时，控制权就从应用进程传递给了系统调用接口。此接口再把控制权传递给计算机的操作系统。操作系统把这个调用转给某个内部过程，并执行所请求的操作。内部过程一旦执行完毕，控制权就又通过系统调用接口返回给应用进程。总之，只要应用进程需要从操作系统获得服务，就要把控制权传递给操作系统，操作系统在执行必要的操作后把控制权返回给应用进程。因此，系统调用接口实际上就是应用进程的控制权和操作系统的控制权进行转换的一个接口。由于应用程序在使用系统调用之前要编写一些程序，特别是需要设置系统调用中的许多参数，因此这种系统调用接口又称为应用编程接口 API(Application Programming Interface)<img src="http://i4.piimg.com/1949/c5838e8e1c2127ee.jpg" alt="套接字称为应用进程与运输层协议的接口"></p>
</li>
<li><p>现在 TCP/IP 协议软件已驻留在操作系统中。因此 TCP/IP 标准没有规定应用程序与 TCP/IP 协议软件如何接口的细节。目前只有几种可供应用程序使用 TCP/IP 的应用编程接口 API——Socket</p>
</li>
<li><p>在讨论网络编程时常常把套接字作为应用进程与运输层协议之间的接口。在套接字以上的进程是受应用程序控制的，而在套接字一下的运输层协议软件则是受计算机操作系统的控制。因此，只要应用程序使用 TCP/IP 协议进行通信，他就必须通过套接字与操作系统交互并请求其服务。由此可见套接字是应用进程为了获得网络通信服务而与操作系统进行交互使用的一种机制。</p>
</li>
<li><p>TCP 系统调用过程：</p>
<ul>
<li><p>连接建立阶段——应用进程创建套接字并绑定来指明本地端口号和本地 IP 地址。服务器进程同样过程，但之后需要调用 listen 把套接字设置为被动方式。紧接着调用 accept 以便把远地客户进程发来的连接请求提取出来。该服务进程也称为主服务器进程就为每一个新的连接请求创建一个新的套接字，并把这个新创建的套接字的识别符返回给发起连接的客户进程。与此同时，主服务器进程还要新创建一个从属服务器进程来处理新建立的连接。这样，从属服务器进程用这个新创建的套接字和客户进程建立连接，而主服务器进程用原来的套接字重新调用 accept ，继续接受下一个连接请求。客户进程调用 connect ，以便和远地服务器建立连接，此过程必须指明远地服务器的 IP 地址和端口号</p>
</li>
<li><p>数据传送阶段——客户和服务器都在 TCP 连接上使用 send 系统调用传送数据，使用 recv 系统调用接受数据。调用 send 需要三个变量：数据要发往的套接字的描述符、要发送数据的地址(操作系统的内核的缓存中)以及数据的长度。调用 recv 也需要三个变量：套接字的描述符、缓存地址以及缓存空间的长度</p>
</li>
<li><p>连接释放阶段——一旦任何一方结束使用套接字，就把套接字撤消。这时就调用 close 释放连接和撤消套接字</p>
<p><img src="http://i4.piimg.com/1949/99203f3e805a1db6.jpg" alt="TCP连接系统调用顺序"></p>
<blockquote>
<p>UDP 服务器只提供无连接服务，因此不使用 listen 和 accept 系统调用</p>
</blockquote>
</li>
</ul>
</li>
</ol>
<h2 id="2017-7-8"><a href="#2017-7-8" class="headerlink" title="2017.7.8"></a>2017.7.8</h2><ol>
<li>HTTP 是面向事务的应用层协议</li>
<li>当我们点击了网页当中的某个链接，如“清华大学院系设置”的页面，其 URL 是 <code>http://www.tsinghua.edu.cn/chn/yxsz/index.html</code>。下面我们将列举用户点击鼠标后所发生的几个事件<ol>
<li>浏览器分析链接指向页面的 URL </li>
<li>浏览器向 DNS 请求解析 www.tsinghua.edu.cn 的 IP 地址</li>
<li>域名系统 DNS 解析出清华大学服务器的 IP 地址为 116.111.4.100</li>
<li>浏览器与服务器建立 TCP 连接（第一次握手，服务器需要发出确认连接报文）</li>
<li>TCP 建立连接的第三次握手中浏览器发出取文件命令（具体查看 HTTP 协议的请求报文）</li>
<li>服务器给出相应，发出响应报文</li>
<li>释放 TCP 连接</li>
<li>浏览器解析渲染得到的 html 文件显示网页</li>
</ol>
</li>
</ol>
<h2 id="2017-7-11"><a href="#2017-7-11" class="headerlink" title="2017.7.11"></a>2017.7.11</h2><ol>
<li>XHTML 是更严格更纯净的 HTML 版本</li>
<li>在数据交换， 配置文件， 任务和流程的描述， Web服务的描述， 还有界面描述领域都取得了成功</li>
<li>XML 是独立于软件和硬件的信息传输工具</li>
<li>XHTML 是更严格更纯净的 HTML 版本</li>
<li>XHTML 是作为一种 XML 应用被重新定义的 HTML</li>
</ol>
<blockquote>
<p>本文作者：刘志宇</p>
<p>版权声明：本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank" rel="noopener">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！</p>
</blockquote>
]]></content>
      
        <categories>
            
            <category> 学习日记 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 理解计算机 </tag>
            
            <tag> Android </tag>
            
            <tag> 计算机网络 </tag>
            
            <tag> 数据结构 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[博文搬运]]></title>
      <url>/2017/06/28/%E5%8D%9A%E6%96%87%E6%90%AC%E8%BF%90/</url>
      <content type="html"><![CDATA[<p>本篇不生产博文，而只是<a href="http://www.jianshu.com/u/8ef65a9ba5fe" target="_blank" rel="noopener">简书博文</a>的搬运工</p>
<a id="more"></a>
<hr>
<h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><p>　　其实本人在今年情人节的时候就在简书上开通了个人账号。本来打算一个月更新5篇左右，后来发现并不是什么时候都有干货能写出来。我也不想让大家花时间去看一些没有意义的东西，所以我如果更新了博文，那么它肯定是花了我很多时间和精力写的。所以也希望学习开发的朋友能从我这得到你们想要的答案。</p>
<h3 id="搬运的博文"><a href="#搬运的博文" class="headerlink" title="搬运的博文"></a>搬运的博文</h3><blockquote>
<p><a href="http://www.jianshu.com/p/de35226afecc" target="_blank" rel="noopener">Android自定义圆形进度条源码解析</a></p>
<p><a href="http://www.jianshu.com/p/e311df0f0e1c" target="_blank" rel="noopener">Android 消息传递机制</a></p>
<p><a href="http://www.jianshu.com/p/202abfcb7b96" target="_blank" rel="noopener">进程与线程、并发与并行，傻傻分不清</a></p>
<p><a href="http://www.jianshu.com/p/24e3e7bf4761" target="_blank" rel="noopener">Java基础课程——static代码块</a></p>
<p><a href="http://www.jianshu.com/p/3482a9e0ca65" target="_blank" rel="noopener">翻滚吧！Scroller</a></p>
<p><a href="http://www.jianshu.com/p/3d4e425d6ca7" target="_blank" rel="noopener">Android事件分发机制的系统性解析</a></p>
<p><a href="http://www.jianshu.com/p/d7d63f6ad4f1" target="_blank" rel="noopener">Android Studio日常使用技巧</a></p>
<p><a href="http://www.jianshu.com/p/a9b200f0acd3" target="_blank" rel="noopener">关于我、我的博客、我的Android开发之路</a></p>
</blockquote>
]]></content>
      
        <categories>
            
            <category> 生活日常 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[我的新天地]]></title>
      <url>/2017/06/27/%E6%88%91%E7%9A%84%E6%96%B0%E5%A4%A9%E5%9C%B0/</url>
      <content type="html"><![CDATA[<p>本篇更新自简书博客</p>
<a id="more"></a>
<hr>
<h2 id="开篇尬谈"><a href="#开篇尬谈" class="headerlink" title="开篇尬谈"></a>开篇尬谈</h2><p>　　真是没想到，时间过得可真快。距离上篇博文的发布正好两个月了。关注我的网友可能会问“说好的持续更新呢”（泪目，啪啪打脸），其实说不定关注我的网友都可能忘了我这茬事（别说了，人艰不拆）。哈哈，跟大家开开玩笑先。我跟大家聊聊我自从上次更新博文之后为什么那么久没更新以及中间遇到的事吧</p>
<h2 id="我干什么去了"><a href="#我干什么去了" class="headerlink" title="我干什么去了"></a>我干什么去了</h2><p>　　其实自从4.27号更新以后，我们专业的课程基本都已经结课了。后面陆陆续续的当然就是各种各样的考试（其实要考试的科目也不多，总共4科）。基本五月份开始就是一星期一门期末考试。而我很自信的整个学期都没有怎么去上专业课，基本都是在图书馆捣鼓我的开发。估计这段生活经历也是我过得最大胆的一次，因为之前无论在老师还是在家长、同学、朋友面前我给大家留下的都是一个好学生的印象。接下来大家可能都能猜到：五月份就基本边自己学习开发边复习课程准备期末考试。就这样一个月就过去了，但是我这个专业对我来说还有一个大 bug ，就是六月份还得去湖北十堰进行专业实践实习半个月，这属于教学计划，很难申请不去这个实习。没办法我就把这次实习看成一次旅行，因为我已经对本专业没有任何感觉了，就很陌生。六月中旬就回到广州了，这也是我本人第一次出省，顺便说一下本人真的很喜欢北方的那种人文氛围，除了一开始去到那里对吃辣，澡堂，厕所这几样东西不习惯之外（其实后面也习惯了），真的感觉是我好像就像那里的本地人一样。对周围的一切事物感觉很舒服，很适应。</p>
<p>　　回到广州之后基本上这个学期也就结束了。之后我就开始尝试寻找 Android 开发工程师的实习。那几天就不断的在各大招聘 App 上投简历，想着广撒网，看能不能钓上大鱼。喜悦的是陆陆续续能收到一些面试通知，但经历的几次面试来说，就只有少数几个是比较正规的实习生招聘面试，其余都是培训机构（又一次泪目）。所以在这里还是要提醒一下大家现在很多培训机构都在招聘 App 上以招聘实习生的名义去找培训生。可能会有人说培训班这条路是进入 IT 行业比较常见的一种方式，特别对于非科班生来说。一开始不了解培训机构的我也是这么认为，可后面去仔细了解过后深思熟虑，觉得培训班这条路子并不适合我个人。因为很有可能在培训班学到的知识还不如我自己学习来的更有效果（在学习上我从小到大就是一个很有自主性的人，对学习有自己的规划）。况且培训班的学习目的很强，不利于以后的职业的多方向发展。但是培训班那种学习的氛围也是很让人羡慕。综合来看，最起码现在来说走培训班这条路并不是我现在最明智的选择。而在仅有的几次正规实习生招聘面试中我也收获到了一些面试经验以及自我肯定，面试中两位技术面试官先后考验我开发技术的问题。第一位面试官问的都是 Android 开发的知识，比较基础，没有问到很偏的问题。第二位面试官就问的都是专业基础知识，比如操作系统，数据结构，排序算法等等。其实两位面试官问的问题我都有接触过，但因为有些知识点在学习之后没有去实际应用，就忘得特别快，而我刚好从湖北十堰回来没有好好准备面试。所以总体面试表现一般。这也是我现在自学 Android 开发最大的问题——没有在实际项目中去应用自己学到的知识。那这里肯定有人会说那就去找项目做啊？其实我自己也有一些想做的项目，但是每次一做项目就会有各种各样的问题难以用谷歌或百度搜索解决问题，即使找到解决办法又还得自己去验证技术的准确性，导致整个项目进度拖得太慢，后面因为没有阶段性结果就难以坚持下去。这时候就好希望能有人给我一个方向性的指导。这也是我为什么想找实习的原因：一是希望在实际项目中加深对知识的理解；二是希望能认识一些技术大牛对自己指导一下，提高开发效率。面试官最后对我的评价就是专业基础一般。仅仅这个评价对我来说就是肯定了我自己在前两个月自学专业基础课程的努力。因为毕竟在两三个月前自己还是对计算机网络以及算法，数据结构知识略知一二。当然这个评价不足以让我获得想要的工作，所以后面还是需要继续提高水平。</p>
<p>　　记得知乎上有个程序猿这么说“如果自学不能为你带来一份工作，那么你也可能不适合这份职业”。也记得其他人说过开发这种东西是需要时间积累，就是所谓的厚积薄发。总之，我选择了自己的道路就希望能一直走下去。</p>
<h2 id="个人博客预告"><a href="#个人博客预告" class="headerlink" title="个人博客预告"></a>个人博客预告</h2><p>　　我现在说说我的个人博客吧。从湖北回来后我就有了想搭建独立博客的想法，因为老觉得搭建独立博客平台逼格更大（哈哈，请允许我装装13先），说不定还能提高我更新博客的主动性，以后打算博文更新在我搭建的博客上。就这样用一两天的时间待在宿舍上谷歌，百度搜索教程初步成功搭建好了个人博客。域名是阿里买的，文档托管在 GitHub pages ，框架用的是 hexo，主题用的是 material。欢迎大家来我的博客踩踩！谢谢大家。</p>
<blockquote>
<p><strong><a href="http://barryliu1995.studio/">刘志宇的新天地</a></strong></p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/2685420-292ec16f81408a19.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="刘志宇的新天地.jpg"></p>
<blockquote>
<p>因为评论系统集成的是网易云跟帖，因为主题的原因现在还存在 PC 访问网页可能无法评论博文以及评论控件时隐时现的问题。这些问题还得通过后面的更新解决</p>
</blockquote>
<hr>
<blockquote>
<p>本文作者：刘志宇</p>
<p>版权声明：本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank" rel="noopener">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！</p>
</blockquote>
]]></content>
      
        <categories>
            
            <category> 生活日常 </category>
            
        </categories>
        
        
    </entry>
    
  
  
</search>
